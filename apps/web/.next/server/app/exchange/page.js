(()=>{var a={};a.id=806,a.ids=[806],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},28354:a=>{"use strict";a.exports=require("util")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30783:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H={children:["",{children:["exchange",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,69056)),"/Volumes/2Tb-Backup/NFT Robinhood Chain/apps/web/app/exchange/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,16953)),"/Volumes/2Tb-Backup/NFT Robinhood Chain/apps/web/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,I=["/Volumes/2Tb-Backup/NFT Robinhood Chain/apps/web/app/exchange/page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/exchange/page",pathname:"/exchange",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/exchange/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},33873:a=>{"use strict";a.exports=require("path")},37632:(a,b,c)=>{"use strict";c.d(b,{PoolsPanel:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call PoolsPanel() from the server but PoolsPanel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Volumes/2Tb-Backup/NFT Robinhood Chain/apps/web/app/exchange/pools/PoolsPanel.tsx","PoolsPanel")},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},52402:(a,b,c)=>{"use strict";c.d(b,{SwapPanel:()=>v});var d=c(21124),e=c(38301),f=c(29808),g=c(79426),h=c(20596),i=c(85258),j=c(69656);c(93992);var k=c(20003),l=c(85365),m=c(39632),n=c(66335),o=c(16140);let p=[{label:"0.05%",fee:500,hint:"Stables"},{label:"0.30%",fee:3e3,hint:"Standard"},{label:"1.00%",fee:1e4,hint:"Volatile"}],q=[{label:"0.5%",bps:50},{label:"1%",bps:100},{label:"3%",bps:300}],r={address:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",symbol:"ETH",decimals:18,logoURI:""};function s(a){return a.toLowerCase()===r.address.toLowerCase()}function t(a,b=6){let c=Number(a);return isNaN(c)||0===c?"0":c>=1e6?`${(c/1e6).toFixed(2)}M`:c>=1e3?`${(c/1e3).toFixed(2)}K`:c>=1?c.toFixed(Math.min(4,b)):c>=1e-4?c.toFixed(b):c.toExponential(2)}function u({tokens:a,value:b,onChange:c,customAddr:f,onCustomAddr:g,customMeta:h,label:i,balance:k,symbol:l,onMax:m,amount:n,onAmountChange:o,amountReadonly:p,quoteDisplay:q,isNativeEth:s}){let u="__custom__"===b,[v,w]=(0,e.useState)(!1),x=(0,e.useRef)(null),y=[{addr:r.address,symbol:"ETH",hint:"Native",isEth:!0},...a.map(a=>({addr:a.address,symbol:a.symbol,hint:a.address.slice(0,6)+"...",isEth:!1})),{addr:"__custom__",symbol:"Custom",hint:"Paste address",isEth:!1}],z=u?h?.symbol||"Custom":l||y.find(a=>a.addr===b)?.symbol||"Select";return(0,d.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-3 space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:i}),void 0!==k&&(0,d.jsxs)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-mono flex items-center gap-1",children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-2.5 h-2.5 opacity-60",children:(0,d.jsx)("path",{d:"M8 1a7 7 0 100 14A7 7 0 008 1zm-.5 3h1v1h-1V4zm-1 2h3v1h-1v3h1v1h-3V10h1V7h-1V6z"})}),(0,d.jsx)("span",{className:"text-white",children:t(k)})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("div",{className:"relative flex-shrink-0",ref:x,children:[(0,d.jsxs)("button",{type:"button",onClick:()=>w(!v),className:"flex items-center gap-1.5 h-10 px-3 bg-lm-black border border-lm-terminal-gray hover:border-lm-orange transition-colors min-w-[100px]",children:[(0,d.jsx)("span",{className:"text-white font-bold text-sm",children:z}),(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-3 h-3 text-lm-terminal-lightgray",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M4.22 6.22a.75.75 0 011.06 0L8 8.94l2.72-2.72a.75.75 0 111.06 1.06l-3.25 3.25a.75.75 0 01-1.06 0L4.22 7.28a.75.75 0 010-1.06z",clipRule:"evenodd"})})]}),v&&(0,d.jsx)("div",{className:"absolute top-full left-0 mt-1 z-50 bg-lm-black border border-lm-orange w-56 max-h-60 overflow-y-auto shadow-lg",children:y.map(a=>{let e=b===a.addr;return(0,d.jsxs)("button",{type:"button",onClick:()=>{c(a.addr),w(!1)},className:`w-full text-left px-3 py-2 flex items-center justify-between transition-colors ${e?"bg-lm-orange/10 text-lm-orange":"text-white hover:bg-lm-terminal-darkgray"}`,children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-bold text-sm",children:a.symbol}),a.isEth&&(0,d.jsx)("span",{className:"text-lm-terminal-lightgray text-[10px] ml-1.5",children:"Native"})]}),(0,d.jsx)("span",{className:"text-lm-terminal-lightgray text-[10px] lm-mono",children:a.hint})]},a.addr)})})]}),(0,d.jsx)("div",{className:"flex-1 relative",children:p&&void 0!==q?(0,d.jsx)("div",{className:"h-10 bg-lm-black border border-lm-terminal-gray px-3 flex items-center justify-end",children:(0,d.jsx)("span",{className:`lm-mono text-sm ${q&&"No liquidity"!==q?"text-white font-bold":"text-lm-terminal-lightgray"}`,children:q||"—"})}):(0,d.jsx)(j.p,{value:n||"",onValueChange:o,placeholder:"0.0",className:"h-10 text-sm font-bold"})}),m&&k&&Number(k)>0&&(0,d.jsx)("button",{type:"button",onClick:m,className:"h-10 px-2 text-[10px] font-bold text-lm-orange border border-lm-orange/30 hover:border-lm-orange hover:bg-lm-orange/5 transition-colors lm-upper",children:"Max"})]}),u&&(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("input",{className:"lm-input text-left text-xs h-8",placeholder:"Paste token address (0x...)",value:f,onChange:a=>g(a.target.value)}),h?(0,d.jsxs)("div",{className:"text-lm-green text-[10px] flex items-center gap-1",children:[(0,d.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-lm-green"}),"Detected: ",(0,d.jsx)("span",{className:"text-white font-bold",children:h.symbol})," (",h.decimals," decimals)"]}):42===f.length?(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] animate-pulse",children:"Detecting token..."}):null]}),s&&(0,d.jsxs)("div",{className:"text-[9px] text-lm-terminal-lightgray flex items-center gap-1",children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-2.5 h-2.5",children:(0,d.jsx)("path",{d:"M8 1a7 7 0 100 14A7 7 0 008 1zm-.5 3h1v1h-1V4zm-1 2h3v1h-1v3h1v1h-3V10h1V7h-1V6z"})}),"Auto-wraps to WETH for the swap"]})]})}function v(){var a;let{address:b,walletClient:c,requireCorrectChain:j}=(0,n.v)(),[v,w]=(0,e.useState)([]),[x,y]=(0,e.useState)(""),[z,A]=(0,e.useState)(""),[B,C]=(0,e.useState)(""),[D,E]=(0,e.useState)(""),[F,G]=(0,e.useState)(null),[H,I]=(0,e.useState)(null),[J,K]=(0,e.useState)(3e3),[L,M]=(0,e.useState)(""),[N,O]=(0,e.useState)(0n),[P,Q]=(0,e.useState)(""),[R,S]=(0,e.useState)(!1),[T,U]=(0,e.useState)(100),[V,W]=(0,e.useState)(!1),[X,Y]=(0,e.useState)(""),[Z,$]=(0,e.useState)("info"),[_,aa]=(0,e.useState)(!1),[ab,ac]=(0,e.useState)(""),[ad,ae]=(0,e.useState)(""),[af,ag]=(0,e.useState)("");(0,e.useRef)(null);let ah=(0,e.useMemo)(()=>{if(s(x))return{addr:l.$.weth,meta:{...r,address:l.$.weth},isNativeEth:!0};if("__custom__"===x&&F&&/^0x[0-9a-fA-F]{40}$/.test(B))return{addr:B,meta:F,isNativeEth:!1};let a=v.find(a=>a.address===x);return a?{addr:a.address,meta:a,isNativeEth:!1}:{addr:"",meta:null,isNativeEth:!1}},[x,B,F,v]),ai=(0,e.useMemo)(()=>{if(s(z))return{addr:l.$.weth,meta:{...r,address:l.$.weth},isNativeEth:!0};if("__custom__"===z&&H&&/^0x[0-9a-fA-F]{40}$/.test(D))return{addr:D,meta:H,isNativeEth:!1};let a=v.find(a=>a.address===z);return a?{addr:a.address,meta:a,isNativeEth:!1}:{addr:"",meta:null,isNativeEth:!1}},[z,D,H,v]),aj=(0,e.useRef)(v);aj.current=v;let ak=(0,e.useRef)(ar);ak.current=ar;let al=(0,e.useRef)(ab);al.current=ab,(0,o.SL)((0,e.useCallback)(a=>{if("swap"===a.type){let b=aj.current,c=a=>{if(!a)return;let c=a.toUpperCase();if("ETH"===c||"WETH"===c)return r.address;let d=b.find(a=>a.symbol.toUpperCase()===c);return d?.address},d=c(a.tokenIn),e=c(a.tokenOut);d&&y(d),e&&A(e),a.amount&&M(a.amount),a.fee&&K(Number(a.fee)),a.slippage&&U(Number(a.slippage))}else"flip_tokens"===a.type?ak.current():"max_balance"===a.type?al.current&&M(al.current):"set_fee"===a.type?K(Number(a.fee)):"set_slippage"===a.type&&U(Number(a.bps))},[]));let am=(0,e.useCallback)(async()=>{if(!l.$.quoterV2||!ah.addr||!ai.addr||!ah.meta||!ai.meta)return;let a=(L||"").trim();if(!a||"0"===a||"0."===a||"."===a){O(0n),Q("");return}S(!0);try{let b=(0,g.X)(a,ah.meta.decimals);if(0n===b){O(0n),Q("");return}let c=await k.R.readContract({address:l.$.quoterV2,abi:m.D8,functionName:"quoteExactInputSingle",args:[{tokenIn:ah.addr,tokenOut:ai.addr,amountIn:b,fee:J,sqrtPriceLimitX96:0n}]});O(c[0]),Q((0,f.J)(c[0],ai.meta.decimals))}catch{O(0n),Q("No liquidity")}finally{S(!1)}},[L,J,ah.addr,ah.meta,ai.addr,ai.meta]),an=(0,e.useMemo)(()=>{if(!L||!P||"No liquidity"===P||!ah.meta||!ai.meta)return null;let a=Number(L),b=Number(P);return a<=0||b<=0?null:{forward:b/a,inverse:a/b,inSymbol:ah.isNativeEth?"ETH":ah.meta.symbol,outSymbol:ai.isNativeEth?"ETH":ai.meta.symbol}},[L,P,ah.meta,ah.isNativeEth,ai.meta,ai.isNativeEth]),ao=(0,e.useMemo)(()=>N<=0n?0n:N*(10000n-BigInt(T))/10000n,[N,T]);async function ap(a,b,d,e,f){if(await k.R.readContract({address:d,abi:m.bx,functionName:"allowance",args:[a,b]})>=e)return;if(Y(`Approving ${f}...`),$("info"),!c)throw Error("No wallet client");let g=await c.writeContract({address:d,abi:m.bx,functionName:"approve",args:[b,e],chain:k.A,account:a});await k.R.waitForTransactionReceipt({hash:g})}async function aq(){if(!b){Y("Connect wallet to swap."),$("error");return}if(!l.$.swapRouter||!ah.addr||!ai.addr||!ah.meta||!ai.meta){Y("Select valid tokens."),$("error");return}let a=ah.isNativeEth?"ETH":ah.meta.symbol,d=ai.isNativeEth?"ETH":ai.meta.symbol;aa(!0),ag("");try{let e,f=(L||"").trim(),i=(0,g.X)(f||"0",ah.meta.decimals);if(0n===i)throw Error("Amount must be greater than 0");if(ab){let b=(0,g.X)(ab,ah.meta.decimals);if(i>b){Y(`Insufficient ${a} balance. You have ${t(ab)} but need ${f}.`),$("error"),aa(!1);return}}if(Y(`Preparing swap: ${f} ${a} → ${d}...`),$("info"),await j(),!c)throw Error("No wallet client");let n=BigInt(Math.floor(Date.now()/1e3)+600),o=BigInt(Math.max(0,Math.min(3e3,T))),p=0n;try{p=(await k.R.readContract({address:l.$.quoterV2,abi:m.D8,functionName:"quoteExactInputSingle",args:[{tokenIn:ah.addr,tokenOut:ai.addr,amountIn:i,fee:J,sqrtPriceLimitX96:0n}]}))[0]*(10000n-o)/10000n}catch{Y("Could not fetch quote. Pool may not have liquidity for this pair."),$("error"),aa(!1);return}let q=ah.isNativeEth;if(ai.isNativeEth){q||await ap(b,l.$.swapRouter,ah.addr,i,a),Y(`Swapping ${f} ${a} → ~${P?t(P):"?"} ${d}...`),$("info");let g=(0,h.p)({abi:m.zO,functionName:"exactInputSingle",args:[{tokenIn:ah.addr,tokenOut:ai.addr,fee:J,recipient:l.$.swapRouter,deadline:n,amountIn:i,amountOutMinimum:p,sqrtPriceLimitX96:0n}]}),j=(0,h.p)({abi:m.zO,functionName:"unwrapWETH9",args:[p,b]});e=await c.writeContract({address:l.$.swapRouter,abi:m.zO,functionName:"multicall",args:[[g,j]],value:q?i:0n,chain:k.A,account:b})}else q||await ap(b,l.$.swapRouter,ah.addr,i,a),Y(`Swapping ${f} ${a} → ~${P?t(P):"?"} ${d}...`),$("info"),e=await c.writeContract({address:l.$.swapRouter,abi:m.zO,functionName:"exactInputSingle",args:[{tokenIn:ah.addr,tokenOut:ai.addr,fee:J,recipient:b,deadline:n,amountIn:i,amountOutMinimum:p,sqrtPriceLimitX96:0n}],value:q?i:0n,chain:k.A,account:b});ag(e),Y("Confirming on-chain..."),$("info");let r=await k.R.waitForTransactionReceipt({hash:e});"success"===r.status?(Y(`Swap confirmed! Received ~${P?t(P):"?"} ${d}`),$("success"),M("")):(Y("Transaction reverted. The price may have moved beyond your slippage tolerance."),$("error")),am().catch(()=>{})}catch(b){let a=String(b?.shortMessage||b?.message||b);a.includes("user rejected")||a.includes("User denied")?Y("Transaction cancelled by user."):Y(`Swap failed: ${a}`),$("error")}finally{aa(!1)}}function ar(){y(z),C(D),G(H),A(x),E(B),I(F),M(""),O(0n),Q("")}let as=ah.isNativeEth?"ETH":ah.meta?.symbol||"",at=ai.isNativeEth?"ETH":ai.meta?.symbol||"",au=R?"Quoting...":P&&"No liquidity"!==P?`${t(P)} ${at}`:P,av=ah.addr&&ai.addr&&L&&Number(L)>0&&P&&"No liquidity"!==P;(0,e.useMemo)(()=>(!an,null),[an,P]);let aw=!!ab&&!!L&&Number(L)>Number(ab),ax=_?"Processing...":b?ah.addr&&ai.addr?!L||0>=Number(L)?"Enter Amount":"No liquidity"===P?"No Liquidity for This Pair":aw?`Insufficient ${as} Balance`:`Swap ${as} for ${at}`:"Select Tokens":"Connect Wallet",ay=!av||_||aw;return(0,d.jsxs)("div",{className:"lm-swap-card p-1",children:[(0,d.jsx)(u,{tokens:v,value:x,onChange:y,customAddr:B,onCustomAddr:C,customMeta:F,label:"You Pay",balance:ab||void 0,symbol:as,onMax:()=>{ab&&M(ab)},amount:L,onAmountChange:M,isNativeEth:ah.isNativeEth}),(0,d.jsx)("div",{className:"flex justify-center -my-2 relative z-10",children:(0,d.jsx)("button",{type:"button",onClick:ar,disabled:_,className:"w-10 h-10 flex items-center justify-center bg-lm-terminal-darkgray border-2 border-lm-terminal-gray hover:border-lm-orange hover:bg-lm-black text-lm-terminal-lightgray hover:text-lm-orange group disabled:opacity-40 disabled:pointer-events-none",title:"Flip tokens",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 group-hover:rotate-180 transition-transform duration-300",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M2.24 6.8a.75.75 0 001.06-.04l1.95-2.1v8.59a.75.75 0 001.5 0V4.66l1.95 2.1a.75.75 0 101.1-1.02l-3.25-3.5a.75.75 0 00-1.1 0L2.2 5.74a.75.75 0 00.04 1.06zm8 6.4a.75.75 0 00-.04 1.06l3.25 3.5a.75.75 0 001.1 0l3.25-3.5a.75.75 0 10-1.1-1.02l-1.95 2.1V6.75a.75.75 0 00-1.5 0v8.59l-1.95-2.1a.75.75 0 00-1.06-.04z",clipRule:"evenodd"})})})}),(0,d.jsx)(u,{tokens:v,value:z,onChange:A,customAddr:D,onCustomAddr:E,customMeta:H,label:"You Receive",balance:ad||void 0,symbol:at,amountReadonly:!0,quoteDisplay:au,isNativeEth:ai.isNativeEth}),(an||av)&&(0,d.jsxs)("div",{className:"mx-1 mt-2",children:[(0,d.jsxs)("button",{type:"button",onClick:()=>W(!V),className:"flex items-center justify-between w-full py-2 px-2 text-[10px] hover:bg-lm-terminal-darkgray/50 transition-colors",children:[(0,d.jsx)("div",{className:"flex items-center gap-2 text-lm-terminal-lightgray",children:an&&(0,d.jsxs)("span",{className:"text-white lm-mono",children:["1 ",an.inSymbol," = ",0===(a=an.forward)||isNaN(a)?"—":a>=1e6?`${(a/1e6).toFixed(2)}M`:a>=1e3?`${(a/1e3).toFixed(2)}K`:a>=1?a.toFixed(4):a>=1e-4?a.toFixed(6):a.toExponential(2)," ",an.outSymbol]})}),(0,d.jsxs)("div",{className:"flex items-center gap-1.5 text-lm-terminal-lightgray",children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-3 h-3",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M6.955 1.45A.5.5 0 017.452 1h1.096a.5.5 0 01.497.45l.17 1.699c.484.12.94.312 1.356.562l1.321-.916a.5.5 0 01.67.033l.774.775a.5.5 0 01.033.67l-.916 1.32c.25.417.443.873.563 1.357l1.699.17a.5.5 0 01.45.497v1.096a.5.5 0 01-.45.497l-1.699.17c-.12.484-.312.94-.562 1.356l.916 1.321a.5.5 0 01-.034.67l-.774.774a.5.5 0 01-.67.033l-1.32-.916c-.417.25-.873.443-1.357.563l-.17 1.699a.5.5 0 01-.497.45H7.452a.5.5 0 01-.497-.45l-.17-1.699a4.973 4.973 0 01-1.356-.562l-1.321.916a.5.5 0 01-.67-.034l-.774-.774a.5.5 0 01-.034-.67l.916-1.32a4.973 4.973 0 01-.562-1.357l-1.699-.17A.5.5 0 011 8.548V7.452a.5.5 0 01.45-.497l1.699-.17c.12-.484.312-.94.562-1.356l-.916-1.321a.5.5 0 01.034-.67l.774-.774a.5.5 0 01.67-.033l1.32.916c.417-.25.873-.443 1.357-.563l.17-1.699zM8 10a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:`w-3 h-3 transition-transform ${V?"rotate-180":""}`,children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M4.22 6.22a.75.75 0 011.06 0L8 8.94l2.72-2.72a.75.75 0 111.06 1.06l-3.25 3.25a.75.75 0 01-1.06 0L4.22 7.28a.75.75 0 010-1.06z",clipRule:"evenodd"})})]})]}),V&&(0,d.jsxs)("div",{className:"bg-lm-black border border-lm-terminal-gray/50 p-3 space-y-3 mt-1 lm-fade-in",children:[av&&ai.meta&&(0,d.jsxs)("div",{className:"space-y-1.5 text-[10px]",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Minimum received"}),(0,d.jsxs)("span",{className:"text-white lm-mono font-bold",children:[t((0,f.J)(ao,ai.meta.decimals))," ",at]})]}),(ah.isNativeEth||ai.isNativeEth)&&(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Route"}),(0,d.jsxs)("div",{className:"flex items-center gap-1 text-white lm-mono",children:[(0,d.jsx)("span",{children:as}),(0,d.jsx)("span",{className:"text-lm-terminal-lightgray",children:"→"}),ah.isNativeEth&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"text-lm-terminal-lightgray",children:"WETH"}),(0,d.jsx)("span",{className:"text-lm-terminal-lightgray",children:"→"})]}),ai.isNativeEth&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"text-lm-terminal-lightgray",children:"WETH"}),(0,d.jsx)("span",{className:"text-lm-terminal-lightgray",children:"→"})]}),(0,d.jsx)("span",{children:at})]})]}),(0,d.jsx)("div",{className:"h-px bg-lm-terminal-gray/30 my-1"})]}),(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Fee Tier"}),(0,d.jsx)("div",{className:"flex gap-1",children:p.map(a=>(0,d.jsxs)("button",{type:"button",onClick:()=>K(a.fee),className:`flex-1 py-2 border text-center ${J===a.fee?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"}`,children:[(0,d.jsx)("div",{className:"text-xs font-bold",children:a.label}),(0,d.jsx)("div",{className:"text-[9px] opacity-60",children:a.hint})]},a.fee))})]}),(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Max Slippage"}),(0,d.jsx)("div",{className:"flex gap-1",children:q.map(a=>(0,d.jsx)("button",{type:"button",onClick:()=>U(a.bps),className:`flex-1 text-xs py-2 border ${T===a.bps?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"}`,children:a.label},a.bps))}),(0,d.jsx)("div",{className:"text-[9px] text-lm-terminal-lightgray",children:"Swap reverts if price moves beyond this tolerance."})]})]})]}),aw&&(0,d.jsxs)("div",{className:"mx-1 mt-1.5 lm-callout lm-callout-red text-[10px] flex items-center gap-2",children:[(0,d.jsx)("span",{className:"lm-dot lm-dot-red"}),(0,d.jsxs)("span",{children:["Insufficient balance. You have ",(0,d.jsx)("span",{className:"text-white font-bold",children:t(ab)})," ",as," but need ",(0,d.jsx)("span",{className:"text-white font-bold",children:L}),"."]})]}),(0,d.jsx)("div",{className:"p-1 pt-2",children:(0,d.jsx)(i.$,{onClick:aq,loading:_,disabled:ay,variant:ay?"default":"primary",size:"lg",className:`w-full ${!ay?"bg-lm-orange text-black":""}`,children:ax})}),X&&(0,d.jsxs)("div",{className:`mx-1 mb-1 text-xs p-2.5 border bg-lm-black flex items-center justify-between gap-2 ${"success"===Z?"text-lm-green":"error"===Z?"text-lm-red":"text-lm-gray"} ${"success"===Z?"border-lm-green/20":"error"===Z?"border-lm-red/20":"border-lm-terminal-gray"}`,children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:["info"===Z&&(0,d.jsx)("span",{className:"lm-spinner flex-shrink-0",style:{width:12,height:12,borderWidth:1.5}}),"success"===Z&&(0,d.jsx)("span",{className:"lm-dot lm-dot-green flex-shrink-0"}),"error"===Z&&(0,d.jsx)("span",{className:"lm-dot lm-dot-red flex-shrink-0"}),(0,d.jsx)("span",{className:"truncate",children:X})]}),af&&(0,d.jsx)("a",{href:`${l.$.blockExplorerUrl||"https://explorer.testnet.chain.robinhood.com"}/tx/${af}`,target:"_blank",rel:"noreferrer",className:"text-lm-orange hover:underline text-[10px] flex-shrink-0",children:"View Tx →"})]})]})}},53058:(a,b,c)=>{"use strict";c.d(b,{PoolsPanel:()=>E});var d=c(21124),e=c(38301),f=c(29808),g=c(79426),h=c(20596),i=c(85258),j=c(69656);c(93992);var k=c(85365),l=c(39632),m=c(20003),n=c(66335),o=c(16140);let p=[{label:"0.05%",fee:500,tickSpacing:10,hint:"Stables"},{label:"0.30%",fee:3e3,tickSpacing:60,hint:"Standard"},{label:"1.00%",fee:1e4,tickSpacing:200,hint:"Volatile"}],q=[{label:"0.5%",bps:50},{label:"1%",bps:100},{label:"3%",bps:300}],r=2n**160n-1n;function s(a){return a<-887272?-887272:a>887272?887272:a}function t(a,b){let c=Math.trunc(a/b)*b;return a<0&&c>a&&(c-=b),s(c)}function u(a,b,c){return Math.pow(1.0001,a)*Math.pow(10,b-c)}function v(a){return 0!==a&&Number.isFinite(a)?a>=1e6?`${(a/1e6).toFixed(2)}M`:a>=1e3?`${(a/1e3).toFixed(2)}K`:a>=1?a.toFixed(4):a>=1e-4?a.toFixed(6):a>=1e-7?a.toFixed(10):a.toExponential(2):"—"}function w(a){return a<=0?1n:10n**BigInt(a)}function x(a){if(a<-887272||a>887272)throw Error("tick out of range");let b=a<0?-a:a,c=(1&b)!=0?0xfffcb933bd6fad37aa2d162d1a594001n:0x100000000000000000000000000000000n;(2&b)!=0&&(c=0xfff97272373d413259a46990580e213an*c>>128n),(4&b)!=0&&(c=0xfff2e50f5f656932ef12357cf3c7fdccn*c>>128n),(8&b)!=0&&(c=0xffe5caca7e10e4e61c3624eaa0941cd0n*c>>128n),(16&b)!=0&&(c=0xffcb9843d60f6159c9db58835c926644n*c>>128n),(32&b)!=0&&(c=0xff973b41fa98c081472e6896dfb254c0n*c>>128n),(64&b)!=0&&(c=0xff2ea16466c96a3843ec78b326b52861n*c>>128n),(128&b)!=0&&(c=0xfe5dee046a99a2a811c461f1969c3053n*c>>128n),(256&b)!=0&&(c=0xfcbe86c7900a88aedcffc83b479aa3a4n*c>>128n),(512&b)!=0&&(c=0xf987a7253ac413176f2b074cf7815e54n*c>>128n),(1024&b)!=0&&(c=0xf3392b0822b70005940c7a398e4b70f3n*c>>128n),(2048&b)!=0&&(c=0xe7159475a2c29b7443b29c7fa6e889d9n*c>>128n),(4096&b)!=0&&(c=0xd097f3bdfd2022b8845ad8f792aa5825n*c>>128n),(8192&b)!=0&&(c=0xa9f746462d870fdf8a65dc1f90e061e5n*c>>128n),(16384&b)!=0&&(c=0x70d869a156d2a1b890bb3df62baf32f7n*c>>128n),(32768&b)!=0&&(c=0x31be135f97d08fd981231505542fcfa6n*c>>128n),(65536&b)!=0&&(c=0x9aa508b5b7a84e1c677de54f3e99bc9n*c>>128n),(131072&b)!=0&&(c=0x5d6af8dedb81196699c329225ee604n*c>>128n),(262144&b)!=0&&(c=0x2216e584f5fa1ea926041bedfe98n*c>>128n),(524288&b)!=0&&(c=0x48a170391f7dc42444e8fa2n*c>>128n),a>0&&(c=((1n<<256n)-1n)/c);let d=(c&(1n<<32n)-1n)!==0n;return(c>>32n)+(d?1n:0n)}function y(a,b,c){if(0n===c)throw Error("div by zero");return a*b/c}function z(a,b,c){return a>b&&([a,b]=[b,a]),y(c,y(a,b,2n**96n),b-a)}function A(a,b,c){return a>b&&([a,b]=[b,a]),y(c,2n**96n,b-a)}function B(a,b,c,d){let e=2n**96n;return(b>c&&([b,c]=[c,b]),a<=b)?{amount0:y(d,(c-b)*e,b*c),amount1:0n}:a<c?{amount0:y(d,(c-a)*e,a*c),amount1:y(d,a-b,e)}:{amount0:0n,amount1:y(d,c-b,e)}}function C({mode:a,lower:b,upper:c,current:e,quoteLabel:f}){if(!e||!Number.isFinite(e)||e<=0)return null;if("full"===a||!b||!c||!Number.isFinite(b)||!Number.isFinite(c)||b<=0||c<=0||b>=c)return(0,d.jsxs)("div",{className:"bg-lm-black border border-lm-terminal-gray p-2 space-y-1 text-[10px]",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-lm-terminal-lightgray lm-upper font-bold tracking-wider",children:"Range"}),(0,d.jsx)("span",{className:"lm-badge lm-badge-gray",children:"Full Range"})]}),(0,d.jsxs)("svg",{viewBox:"0 0 320 90",className:"w-full h-[90px] border border-lm-terminal-gray bg-lm-terminal-darkgray",children:[(0,d.jsx)("rect",{x:"0",y:"0",width:"320",height:"90",fill:"transparent"}),(0,d.jsx)("line",{x1:"40",y1:"65",x2:"308",y2:"65",stroke:"rgba(255,255,255,0.12)",strokeWidth:"1"}),(0,d.jsx)("line",{x1:"40",y1:"20",x2:"308",y2:"20",stroke:"rgba(255,255,255,0.06)",strokeWidth:"1"}),(0,d.jsx)("line",{x1:"40",y1:"42",x2:"308",y2:"42",stroke:"rgba(255,255,255,0.06)",strokeWidth:"1"}),(0,d.jsx)("line",{x1:"174",y1:"18",x2:"174",y2:"68",stroke:"rgba(255,255,255,0.75)",strokeWidth:"2"}),(0,d.jsx)("text",{x:"40",y:"82",fill:"rgba(255,255,255,0.6)",fontSize:"10",children:"0"}),(0,d.jsxs)("text",{x:"174",y:"82",fill:"rgba(255,255,255,0.9)",fontSize:"10",textAnchor:"middle",children:[v(e)," ",f]}),(0,d.jsx)("text",{x:"308",y:"82",fill:"rgba(255,255,255,0.6)",fontSize:"10",textAnchor:"end",children:"∞"})]})]});let g=e>=b&&e<=c,h=Math.log(b),i=Math.log(c),j=40+268*Math.max(0,Math.min(1,(Math.log(e)-h)/(i-h)));return(0,d.jsxs)("div",{className:"bg-lm-black border border-lm-terminal-gray p-2 space-y-1 text-[10px]",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-lm-terminal-lightgray lm-upper font-bold tracking-wider",children:"Range"}),(0,d.jsx)("span",{className:g?"lm-badge lm-badge-green":"lm-badge lm-badge-orange",children:g?"In Range":"Out of Range"})]}),(0,d.jsxs)("svg",{viewBox:"0 0 320 90",className:"w-full h-[90px] border border-lm-terminal-gray bg-lm-terminal-darkgray",children:[(0,d.jsx)("rect",{x:"0",y:"0",width:320,height:90,fill:"transparent"}),(0,d.jsx)("line",{x1:40,y1:65,x2:308,y2:65,stroke:"rgba(255,255,255,0.12)",strokeWidth:"1"}),(0,d.jsx)("line",{x1:40,y1:12,x2:308,y2:12,stroke:"rgba(255,255,255,0.06)",strokeWidth:"1"}),(0,d.jsx)("line",{x1:40,y1:38.5,x2:308,y2:38.5,stroke:"rgba(255,255,255,0.06)",strokeWidth:"1"}),(0,d.jsx)("line",{x1:107,y1:12,x2:107,y2:65,stroke:"rgba(255,255,255,0.06)",strokeWidth:"1"}),(0,d.jsx)("line",{x1:174,y1:12,x2:174,y2:65,stroke:"rgba(255,255,255,0.06)",strokeWidth:"1"}),(0,d.jsx)("line",{x1:241,y1:12,x2:241,y2:65,stroke:"rgba(255,255,255,0.06)",strokeWidth:"1"}),(0,d.jsx)("rect",{x:40,y:13,width:268,height:51,fill:g?"rgba(0,255,0,0.10)":"rgba(207,255,4,0.08)"}),(0,d.jsx)("line",{x1:j,y1:12,x2:j,y2:68,stroke:"rgba(255,255,255,0.85)",strokeWidth:"2"}),(0,d.jsx)("text",{x:40,y:80,fill:"rgba(255,255,255,0.65)",fontSize:"10",className:"lm-mono",children:v(b)}),(0,d.jsx)("text",{x:j,y:80,fill:"rgba(255,255,255,0.95)",fontSize:"10",textAnchor:"middle",className:"lm-mono",children:v(e)}),(0,d.jsx)("text",{x:308,y:80,fill:"rgba(255,255,255,0.65)",fontSize:"10",textAnchor:"end",className:"lm-mono",children:v(c)}),(0,d.jsx)("text",{x:308,y:12,fill:"rgba(255,255,255,0.45)",fontSize:"9",textAnchor:"end",children:f})]})]})}function D(a){let b=Number(a);return isNaN(b)||0===b?"0":b>=1e6?`${(b/1e6).toFixed(2)}M`:b>=1e3?`${(b/1e3).toFixed(2)}K`:b>=1?b.toFixed(4):b>=1e-4?b.toFixed(6):b.toExponential(2)}function E(){let{address:a,walletClient:b,requireCorrectChain:c,connect:y}=(0,n.v)(),[E,F]=(0,e.useState)([]),[G,H]=(0,e.useState)(""),[I,J]=(0,e.useState)(""),[K,L]=(0,e.useState)(3e3),[M,N]=(0,e.useState)(""),[O,P]=(0,e.useState)(!1),[Q,R]=(0,e.useState)(""),[S,T]=(0,e.useState)(""),[U,V]=(0,e.useState)(""),[W,X]=(0,e.useState)(!0),[Y,Z]=(0,e.useState)("amt0"),[$,_]=(0,e.useState)(100),[aa,ab]=(0,e.useState)("full"),[ac,ad]=(0,e.useState)(""),[ae,af]=(0,e.useState)(""),[ag,ah]=(0,e.useState)(""),[ai,aj]=(0,e.useState)("info"),[ak,al]=(0,e.useState)(!1),[am,an]=(0,e.useState)(""),[ao,ap]=(0,e.useState)(""),aq=(0,e.useMemo)(()=>E.find(a=>a.address===G),[E,G]),ar=(0,e.useMemo)(()=>E.find(a=>a.address===I),[E,I]),as=(0,e.useMemo)(()=>p.find(a=>a.fee===K),[K]),at=(0,e.useMemo)(()=>G&&I&&G.toLowerCase()!==I.toLowerCase()?{token0:G.toLowerCase()<I.toLowerCase()?G:I,token1:G.toLowerCase()<I.toLowerCase()?I:G}:null,[G,I]),au=(0,e.useMemo)(()=>at?E.find(a=>a.address===at.token0):void 0,[at,E]),av=(0,e.useMemo)(()=>at?E.find(a=>a.address===at.token1):void 0,[at,E]),aw=(0,e.useMemo)(()=>{try{var a,b;if(!at||!au||!av)return"";let c=(M||"").trim();if(!c||"0"===c)return"";let d=(0,g.X)(c,18);if(d<=0n)return"";let e=(a=au.decimals,(b=av.decimals)>a?d*w(b-a):a>b?d/w(a-b):d);if(e<=0n)return"";let f=2n**96n,h=f*f*e/10n**18n;if(h<=0n)return"";let i=function(a){if(a<0n)throw Error("sqrt of negative");if(a<2n)return a;let b=a,c=b+1n>>1n;for(;c<b;)b=c,c=c+a/c>>1n;return b}(h);if(i<=0n||i>r)return"";return i.toString()}catch{return""}},[M,au,av,at]),ax=(0,e.useMemo)(()=>Q.trim()?Q.trim():aw,[aw,Q]),[ay,az]=(0,e.useState)(""),[aA,aB]=(0,e.useState)(null),[aC,aD]=(0,e.useState)(null),[aE,aF]=(0,e.useState)(""),aG=(0,e.useCallback)(async()=>{if(!k.$.uniFactory||!at||!as||!au||!av){az(""),aB(null),aD(null),aF("");return}try{let a=await m.R.readContract({address:k.$.uniFactory,abi:l.HB,functionName:"getPool",args:[at.token0,at.token1,K]});if(!a||"0x0000000000000000000000000000000000000000"===a){az(""),aB(null),aD(null),aF("");return}az(a);let b=await m.R.readContract({address:a,abi:l.ld,functionName:"slot0"}),c=b[0],d=b[1];aD(c),aB(d);let e={num:c*c,den:2n**192n},f=BigInt(au.decimals),g=BigInt(av.decimals),h=e.num,i=e.den;f>g&&(h*=10n**(f-g)),g>f&&(i*=10n**(g-f)),aF(function(a,b,c=6){if(0n===b)return"0";let d=10n**BigInt(c),e=(a*d/b).toString().padStart(c+1,"0"),f=e.slice(0,-c),g=e.slice(-c);return`${f}.${g}`.replace(/\.?0+$/,a=>"")}(h,i,8))}catch{az(""),aB(null),aD(null),aF("")}},[K,as,au,av,at]),aH=(0,e.useMemo)(()=>{if(!as)return{ticks:null,error:""};if("full"===aa)return{ticks:function(a){let b=b=>{let c=Math.trunc(b/a)*a;return b<0&&c>b&&(c-=a),c};return{tickLower:b(-887272),tickUpper:b(887272)}}(as.tickSpacing),error:""};if(!au||!av)return{ticks:null,error:"Select tokens first."};let a=(ac||"").trim(),b=(ae||"").trim();if(!a||!b)return{ticks:null,error:""};let c=Number(a),d=Number(b);if(!Number.isFinite(c)||!Number.isFinite(d))return{ticks:null,error:"Enter valid numbers for min/max price."};if(c<=0||d<=0)return{ticks:null,error:"Min/max price must be greater than 0."};if(c>=d)return{ticks:null,error:"Min price must be lower than max price."};let e=Math.pow(10,av.decimals-au.decimals);if(!Number.isFinite(e)||e<=0)return{ticks:null,error:"Price scaling overflow. Try a smaller range."};let f=c*e,g=d*e;if(!Number.isFinite(f)||!Number.isFinite(g)||f<=0||g<=0)return{ticks:null,error:"Price range is too large/small to compute ticks."};let h=Math.log(1.0001),i=Math.log(f)/h,j=Math.log(g)/h;if(!Number.isFinite(i)||!Number.isFinite(j))return{ticks:null,error:"Price range is out of tick bounds."};let k=Math.floor(j),l=t(Math.floor(i),as.tickSpacing),m=function(a,b){let c=t(a,b);return c===a?c:s(c+b)}(k,as.tickSpacing);return Number.isFinite(l)&&Number.isFinite(m)?l>=m?{ticks:null,error:"Range too narrow for this fee tier. Widen the range."}:{ticks:{tickLower:l,tickUpper:m},error:""}:{ticks:null,error:"Invalid tick calculation."}},[as,ae,ac,aa,au,av]),aI=aH.ticks,aJ=aH.error,aK=(0,e.useMemo)(()=>aI&&au&&av?{lower:u(aI.tickLower,au.decimals,av.decimals),upper:u(aI.tickUpper,au.decimals,av.decimals)}:null,[aI,au,av]),aL=(0,e.useMemo)(()=>{try{if(null!==aA&&au&&av){let a=u(aA,au.decimals,av.decimals);return Number.isFinite(a)&&a>0?a:null}let a=Number((M||"").trim());return Number.isFinite(a)&&a>0?a:null}catch{return null}},[aA,M,au,av]),aM=(0,e.useMemo)(()=>{if(ay&&aC)return aC;try{let a=BigInt((ax||"").trim()||"0");if(a<=0n||a>r)return null;return a}catch{return null}},[aC,ay,ax]),aN=(0,e.useMemo)(()=>{if(!aI||!aq||!ar||!au||!av||!aM)return null;try{let a,b,c=x(aI.tickLower),d=x(aI.tickUpper),e=(0,g.X)(S||"0",aq.decimals),f=(0,g.X)(U||"0",ar.decimals);if(0n===e&&0n===f)return{used0:0n,used1:0n,desired0:0n,desired1:0n,leftover0:0n,leftover1:0n,mode:"unknown",note:"Enter amounts to see preview."};if(!at)return null;let h=at.token0.toLowerCase()===G.toLowerCase()?e:f,i=at.token0.toLowerCase()===G.toLowerCase()?f:e,j=c<d?c:d,k=c>d?c:d;if(aM<=j)b="below",a=z(c,d,h);else if(aM>=k)b="above",a=A(c,d,i);else{b="in";let e=z(aM,d,h),f=A(c,aM,i);a=e<f?e:f}let{amount0:l,amount1:m}=B(aM,c,d,a),n=h>l?h-l:0n,o=i>m?i-m:0n;return{used0:l,used1:m,desired0:h,desired1:i,leftover0:n,leftover1:o,mode:b,note:""}}catch(a){return{used0:0n,used1:0n,desired0:0n,desired1:0n,leftover0:0n,leftover1:0n,mode:"unknown",note:String(a?.message||a)}}},[S,U,aM,aI,au,av,at,aq,ar,G]),aO=(0,e.useRef)(E);async function aP(a,c,d,e){if(await m.R.readContract({address:d,abi:l.bx,functionName:"allowance",args:[a,c]})>=e)return;if(ah(`Approving ${E.find(a=>a.address===d)?.symbol||"token"}...`),aj("info"),!b)throw Error("No wallet client");let f=await b.writeContract({address:d,abi:l.bx,functionName:"approve",args:[c,e],chain:m.A,account:a});await m.R.waitForTransactionReceipt({hash:f})}async function aQ(){if(!a){ah("Connect wallet."),aj("error");return}if(!k.$.positionManager||!at)return;let d=aq?.symbol||"Token0",e=ar?.symbol||"Token1";al(!0);try{let f;await c();try{f=BigInt((ax||"").trim()||"0")}catch{throw Error("Initial price is invalid. Enter a valid number.")}if(f<=0n)throw Error("Set an initial price first (enter a price in the field above).");if(f>r)throw Error("Initial price is out of range. Try a smaller price.");if(!b)throw Error("No wallet client");ah(`Creating ${d}/${e} pool (${as?.label} fee)...`),aj("info");let g=await b.writeContract({address:k.$.positionManager,abi:l.g4,functionName:"createAndInitializePoolIfNecessary",args:[at.token0,at.token1,K,f],value:0n,chain:m.A,account:a});ah("Confirming pool creation on-chain...");let h=await m.R.waitForTransactionReceipt({hash:g});"success"===h.status?(ah(`Pool created! ${d}/${e} (${as?.label}) is now live.`),aj("success")):(ah("Pool creation reverted. The pool may already exist for this pair + fee tier."),aj("error"))}catch(b){let a=String(b?.shortMessage||b?.message||b);a.includes("user rejected")||a.includes("User denied")?ah("Transaction cancelled."):ah(`Create pool failed: ${a}`),aj("error")}finally{al(!1)}}async function aR(){if(!a){ah("Connect wallet."),aj("error");return}if(k.$.positionManager&&G&&I&&aq&&ar&&as&&at){if(!aI){ah("Invalid price range."),aj("error");return}al(!0);try{let d;await c();let e=(0,g.X)(S||"0",aq.decimals),f=(0,g.X)(U||"0",ar.decimals);if(0n===e&&0n===f)throw Error("Enter amount for at least one token");if(!b)throw Error("No wallet client");let{tickLower:i,tickUpper:j}=aI,n=at.token0.toLowerCase()===G.toLowerCase()?e:f,o=at.token0.toLowerCase()===G.toLowerCase()?f:e;if(!aM){if(!ay)throw Error("No pool found. Set an initial price and create the pool first.");throw Error("Loading pool price. Try again in a moment.")}let p=x(i),q=x(j);if(aM<=(p<q?p:q))d=z(p,q,n);else if(aM>=(p>q?p:q))d=A(p,q,o);else{let a=z(aM,q,n),b=A(p,aM,o);d=a<b?a:b}let s=B(aM,p,q,d);await aP(a,k.$.positionManager,G,e),await aP(a,k.$.positionManager,I,f);let t=BigInt(Math.max(0,Math.min(3e3,$))),u=s.amount0*(10000n-t)/10000n,v=s.amount1*(10000n-t)/10000n,w=BigInt(Math.floor(Date.now()/1e3)+600);if(ay){ah(`Minting LP: ${S||"0"} ${aq.symbol} + ${U||"0"} ${ar.symbol}...`),aj("info");let c=await b.writeContract({address:k.$.positionManager,abi:l.g4,functionName:"mint",args:[{token0:at.token0,token1:at.token1,fee:K,tickLower:i,tickUpper:j,amount0Desired:n,amount1Desired:o,amount0Min:u,amount1Min:v,recipient:a,deadline:w}],value:0n,chain:m.A,account:a});ah("Confirming on-chain...");let d=await m.R.waitForTransactionReceipt({hash:c});"success"===d.status?(ah(`LP position minted! ${aq.symbol}/${ar.symbol} liquidity added. Check the Positions tab.`),aj("success")):(ah("Mint transaction reverted. Check your balances and price range."),aj("error"))}else{let c;try{c=BigInt((ax||"").trim()||"0")}catch{throw Error("Set an initial price to create the pool first.")}if(c<=0n||c>r)throw Error("Initial price is invalid (sqrtPriceX96 out of range).");ah("Creating pool + minting LP..."),aj("info");let d=(0,h.p)({abi:l.g4,functionName:"createAndInitializePoolIfNecessary",args:[at.token0,at.token1,K,c]}),e=(0,h.p)({abi:l.g4,functionName:"mint",args:[{token0:at.token0,token1:at.token1,fee:K,tickLower:i,tickUpper:j,amount0Desired:n,amount1Desired:o,amount0Min:u,amount1Min:v,recipient:a,deadline:w}]}),f=await b.writeContract({address:k.$.positionManager,abi:l.g4,functionName:"multicall",args:[[d,e]],value:0n,chain:m.A,account:a});ah("Confirming on-chain...");let g=await m.R.waitForTransactionReceipt({hash:f});"success"===g.status?(ah("Pool created and LP position minted! Check the Positions tab."),aj("success"),await aG()):(ah("Transaction reverted. Check your balances, range, and initial price."),aj("error"))}}catch(b){let a=String(b?.shortMessage||b?.message||b);a.includes("user rejected")||a.includes("User denied")?ah("Transaction cancelled."):ah(`Add liquidity failed: ${a}`),aj("error")}finally{al(!1)}}}aO.current=E,(0,o.SL)((0,e.useCallback)(a=>{if("add_liquidity"!==a.type&&"create_pool"!==a.type)return;let b=aO.current,c=a=>{if(!a)return"";let c=a.toUpperCase(),d=b.find(a=>a.symbol.toUpperCase()===c);return d?.address||""},d=c(a.token0),e=c(a.token1);d&&H(d),e&&J(e),a.fee&&L(Number(a.fee)),"create_pool"===a.type&&a.price&&N(a.price),"add_liquidity"===a.type&&("full"===a.range?ab("full"):"custom"===a.range&&(ab("custom"),a.minPrice&&ad(a.minPrice),a.maxPrice&&af(a.maxPrice)),a.amount0&&T(a.amount0),a.amount1&&V(a.amount1))},[]));let aS=G&&I&&G.toLowerCase()===I.toLowerCase();return(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-3 space-y-3",children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Select Token Pair"}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Token A"}),(0,d.jsxs)("select",{className:"w-full bg-lm-black border border-lm-terminal-gray hover:border-lm-orange p-2 text-sm h-9 text-white font-bold transition-colors disabled:opacity-40",value:G,onChange:a=>H(a.target.value),disabled:ak,children:[0===E.length&&(0,d.jsx)("option",{value:"",disabled:!0,children:"Loading tokens..."}),E.map(a=>(0,d.jsx)("option",{value:a.address,children:a.symbol},a.address))]}),am&&(0,d.jsxs)("div",{className:"text-[10px] text-lm-terminal-lightgray lm-mono",children:["Balance: ",(0,d.jsx)("span",{className:"text-white",children:D(am)})]})]}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Token B"}),(0,d.jsxs)("select",{className:"w-full bg-lm-black border border-lm-terminal-gray hover:border-lm-orange p-2 text-sm h-9 text-white font-bold transition-colors disabled:opacity-40",value:I,onChange:a=>J(a.target.value),disabled:ak,children:[0===E.length&&(0,d.jsx)("option",{value:"",disabled:!0,children:"Loading tokens..."}),E.map(a=>(0,d.jsx)("option",{value:a.address,children:a.symbol},a.address))]}),ao&&(0,d.jsxs)("div",{className:"text-[10px] text-lm-terminal-lightgray lm-mono",children:["Balance: ",(0,d.jsx)("span",{className:"text-white",children:D(ao)})]})]})]}),aS&&(0,d.jsx)("div",{className:"text-lm-red text-xs",children:"Tokens must be different."}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Trading Fee"}),(0,d.jsx)("div",{className:"flex gap-1",children:p.map(a=>(0,d.jsxs)("button",{type:"button",onClick:()=>L(a.fee),className:`flex-1 py-2 border transition-colors text-center ${K===a.fee?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"}`,children:[(0,d.jsx)("div",{className:"text-xs font-bold",children:a.label}),(0,d.jsx)("div",{className:"text-[9px] opacity-60",children:a.hint})]},a.fee))})]}),at&&(0,d.jsxs)("div",{className:`text-xs bg-lm-black border p-3 space-y-1 ${ay?"border-lm-green/20":"border-lm-red/20"}`,children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:`lm-dot ${ay?"lm-dot-green lm-dot-pulse":"lm-dot-red"}`}),(0,d.jsx)("span",{className:ay?"text-lm-green font-bold":"text-lm-red",children:ay?"Pool Active":"No Pool Found"})]}),ay&&(0,d.jsxs)("a",{href:`${k.$.blockExplorerUrl||"https://explorer.testnet.chain.robinhood.com"}/address/${ay}`,target:"_blank",rel:"noreferrer",className:"text-lm-orange hover:underline lm-mono text-[10px]",children:[ay.slice(0,6)+"..."+ay.slice(-4)," →"]})]}),aE&&au&&av&&(0,d.jsxs)("div",{className:"text-[10px] lm-mono flex items-center gap-1.5 pt-0.5",children:[(0,d.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Current Price:"}),(0,d.jsx)("span",{className:"text-white font-bold",children:aE}),(0,d.jsxs)("span",{className:"text-lm-terminal-lightgray",children:[av.symbol,"/",au.symbol]})]})]})]}),at&&!ay&&(0,d.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-3 space-y-3",children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Initialize New Pool"}),(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px]",children:"This pair has no pool yet. Set an initial price to create one."}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsxs)("div",{className:"text-lm-terminal-lightgray text-xs",children:["Initial Price (",av?.symbol||"B"," per ",au?.symbol||"A",")"]}),(0,d.jsx)(j.p,{value:M,onValueChange:N,placeholder:"e.g. 0.001"}),(M||"").trim()&&!ax?(0,d.jsx)("div",{className:"text-lm-red text-[10px]",children:"Invalid initial price. Enter a positive number."}):null]}),(0,d.jsx)("button",{type:"button",onClick:()=>P(!O),className:"text-lm-terminal-lightgray text-[10px] hover:text-lm-orange transition-colors",children:O?"▾ Hide developer settings":"▸ Developer settings"}),O&&(0,d.jsxs)("div",{className:"space-y-1 text-[10px]",children:[(0,d.jsxs)("div",{className:"text-lm-terminal-lightgray",children:["sqrtPriceX96 (auto: ",(0,d.jsx)("span",{className:"lm-mono text-lm-gray",children:aw||"—"}),")"]}),(0,d.jsx)(j.p,{value:Q,onValueChange:R,placeholder:"Leave blank for auto",className:"text-left text-xs",numeric:!1})]}),(0,d.jsx)(i.$,{onClick:a?aQ:y,loading:ak,disabled:ak||!!a&&!ax,variant:"primary",size:"lg",className:"w-full",children:ak?"Creating Pool...":a?"Create Pool":"Connect Wallet"})]}),(0,d.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-3 space-y-3",children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Add Liquidity"}),ay?null:(0,d.jsx)("div",{className:"text-[10px] text-lm-terminal-lightgray",children:"No pool found for this pair + fee. Set an initial price above and we'll create + initialize + mint in one transaction."}),(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Price Range"}),(0,d.jsxs)("div",{className:"flex gap-1",children:[(0,d.jsxs)("button",{type:"button",onClick:()=>ab("full"),className:`flex-1 text-xs py-2 border transition-colors ${"full"===aa?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"}`,children:[(0,d.jsx)("div",{className:"font-bold",children:"Full Range"}),(0,d.jsx)("div",{className:"text-[9px] opacity-60",children:"Earn fees at any price"})]}),(0,d.jsxs)("button",{type:"button",onClick:()=>ab("custom"),className:`flex-1 text-xs py-2 border transition-colors ${"custom"===aa?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"}`,children:[(0,d.jsx)("div",{className:"font-bold",children:"Custom Range"}),(0,d.jsx)("div",{className:"text-[9px] opacity-60",children:"Concentrated liquidity"})]})]})]}),"custom"===aa&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsxs)("div",{className:"text-lm-terminal-lightgray text-xs",children:["Min Price (",av?.symbol||"B","/",au?.symbol||"A",")"]}),(0,d.jsx)(j.p,{value:ac,onValueChange:ad,placeholder:"0.0005"})]}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsxs)("div",{className:"text-lm-terminal-lightgray text-xs",children:["Max Price (",av?.symbol||"B","/",au?.symbol||"A",")"]}),(0,d.jsx)(j.p,{value:ae,onValueChange:af,placeholder:"0.0020"})]})]}),aJ?(0,d.jsx)("div",{className:"text-lm-red text-[10px]",children:aJ}):null]}),aK&&au&&av&&(0,d.jsxs)("div",{className:"bg-lm-black border border-lm-terminal-gray p-2 flex items-center justify-between text-[10px]",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Low: "}),(0,d.jsx)("span",{className:"text-white lm-mono font-bold",children:"full"===aa?"0":v(aK.lower)})]}),(0,d.jsx)("span",{className:"text-lm-terminal-gray",children:"←→"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-lm-terminal-lightgray",children:"High: "}),(0,d.jsx)("span",{className:"text-white lm-mono font-bold",children:"full"===aa?"∞":v(aK.upper)})]}),(0,d.jsxs)("span",{className:"text-lm-terminal-lightgray",children:[av.symbol,"/",au.symbol]})]}),au&&av?(0,d.jsx)(C,{mode:aa,lower:"custom"===aa&&aK?aK.lower:null,upper:"custom"===aa&&aK?aK.upper:null,current:aL,quoteLabel:`${av.symbol}/${au.symbol}`}):null,(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:aq?.symbol||"Token A"}),am&&Number(am)>0&&(0,d.jsx)("button",{type:"button",onClick:()=>{Z("amt0"),T(am)},className:"text-[10px] text-lm-orange hover:underline",children:"MAX"})]}),(0,d.jsx)(j.p,{value:S,onValueChange:a=>{Z("amt0"),T(a)},placeholder:"0.0"})]}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:ar?.symbol||"Token B"}),ao&&Number(ao)>0&&(0,d.jsx)("button",{type:"button",onClick:()=>{Z("amt1"),V(ao)},className:"text-[10px] text-lm-orange hover:underline",children:"MAX"})]}),(0,d.jsx)(j.p,{value:U,onValueChange:a=>{Z("amt1"),V(a)},placeholder:"0.0"})]})]}),(0,d.jsxs)("label",{className:"flex items-center gap-2 text-[10px] text-lm-terminal-lightgray select-none",children:[(0,d.jsx)("input",{type:"checkbox",checked:W,onChange:a=>X(a.target.checked),className:"accent-lm-orange"}),"Auto-adjust the other token to match the selected range"]}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Slippage Tolerance"}),(0,d.jsx)("div",{className:"flex gap-1",children:q.map(a=>(0,d.jsx)("button",{type:"button",onClick:()=>_(a.bps),className:`flex-1 text-xs py-1.5 border transition-colors ${$===a.bps?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"}`,children:a.label},a.bps))})]}),aN&&(0,d.jsxs)("div",{className:"bg-lm-black border border-lm-terminal-gray p-2.5 space-y-1.5 text-[10px]",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray lm-upper font-bold tracking-wider",children:"Deposit Preview"}),"in"===aN.mode?(0,d.jsx)("span",{className:"lm-badge lm-badge-green",children:"In Range"}):"below"===aN.mode||"above"===aN.mode?(0,d.jsx)("span",{className:"lm-badge lm-badge-orange",children:"Single-Sided"}):null]}),aN.note?(0,d.jsx)("div",{className:"text-lm-terminal-lightgray",children:aN.note}):(0,d.jsxs)("div",{className:"space-y-1",children:["below"===aN.mode&&au&&av?(0,d.jsxs)("div",{className:"text-lm-terminal-lightgray",children:["Current price is below your range. This deposit uses ",au.symbol," only."]}):null,"above"===aN.mode&&au&&av?(0,d.jsxs)("div",{className:"text-lm-terminal-lightgray",children:["Current price is above your range. This deposit uses ",av.symbol," only."]}):null,(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-lm-terminal-lightgray",children:au?.symbol}),(0,d.jsxs)("span",{className:"text-white lm-mono font-bold",children:["Used ",au?D((0,f.J)(aN.used0,au.decimals)):"0",au?` \xb7 Leftover ${D((0,f.J)(aN.leftover0,au.decimals))}`:""]})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-lm-terminal-lightgray",children:av?.symbol}),(0,d.jsxs)("span",{className:"text-white lm-mono font-bold",children:["Used ",av?D((0,f.J)(aN.used1,av.decimals)):"0",av?` \xb7 Leftover ${D((0,f.J)(aN.leftover1,av.decimals))}`:""]})]})]})]}),(0,d.jsx)(i.$,{onClick:a?aR:y,loading:ak,disabled:ak||!!a&&(!aI||!ay&&!aM),variant:"primary",size:"lg",className:"w-full",children:ak?"Processing...":a?ay?"Add Liquidity":"Create + Add Liquidity":"Connect Wallet"})]}),ag&&(0,d.jsxs)("div",{className:`text-xs p-2.5 border bg-lm-black flex items-center gap-2 ${"success"===ai?"text-lm-green":"error"===ai?"text-lm-red":"text-lm-gray"} ${"success"===ai?"border-lm-green/20":"error"===ai?"border-lm-red/20":"border-lm-terminal-gray"}`,children:["info"===ai&&(0,d.jsx)("span",{className:"lm-spinner flex-shrink-0",style:{width:12,height:12,borderWidth:1.5}}),"success"===ai&&(0,d.jsx)("span",{className:"lm-dot lm-dot-green flex-shrink-0"}),"error"===ai&&(0,d.jsx)("span",{className:"lm-dot lm-dot-red flex-shrink-0"}),(0,d.jsx)("span",{children:ag})]})]})}},56997:(a,b,c)=>{Promise.resolve().then(c.bind(c,37632)),Promise.resolve().then(c.bind(c,72464)),Promise.resolve().then(c.bind(c,63297))},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63297:(a,b,c)=>{"use strict";c.d(b,{ExchangeBootstrap:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call ExchangeBootstrap() from the server but ExchangeBootstrap is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Volumes/2Tb-Backup/NFT Robinhood Chain/apps/web/app/exchange/ui/ExchangeBootstrap.tsx","ExchangeBootstrap")},69056:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>i});var d=c(75338),e=c(11125),f=c(72464),g=c(37632),h=c(63297);function i(){return(0,d.jsx)(e.q,{title:"Stonk Exchange",subtitle:"Swap any token pair (including native ETH). Create pools and mint LP positions.",children:(0,d.jsx)(h.ExchangeBootstrap,{SwapPanel:f.SwapPanel,PoolsPanel:g.PoolsPanel})})}},72464:(a,b,c)=>{"use strict";c.d(b,{SwapPanel:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call SwapPanel() from the server but SwapPanel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Volumes/2Tb-Backup/NFT Robinhood Chain/apps/web/app/exchange/swap/SwapPanel.tsx","SwapPanel")},77598:a=>{"use strict";a.exports=require("node:crypto")},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},87855:(a,b,c)=>{"use strict";c.d(b,{ExchangeBootstrap:()=>t});var d=c(21124),e=c(38301),f=c(29808),g=c(96126),h=c(63978),i=c(85258),j=c(66335),k=c(20003),l=c(85365),m=c(39632),n=c(16140);let o=2n**128n-1n;function p(a,b,c){return Math.pow(1.0001,a)*Math.pow(10,b-c)}function q(a){return 0!==a&&Number.isFinite(a)?a>=1e9?`${(a/1e9).toFixed(2)}B`:a>=1e6?`${(a/1e6).toFixed(2)}M`:a>=1e3?`${(a/1e3).toFixed(2)}K`:a>=1?a.toFixed(4):a>=1e-4?a.toFixed(6):a>=1e-7?a.toFixed(10):a.toExponential(2):"—"}function r(a){let b=Number(a);return isNaN(b)||0===b?"0":b>=1e6?`${(b/1e6).toFixed(2)}M`:b>=1e3?`${(b/1e3).toFixed(2)}K`:b>=1?b.toFixed(4):b>=1e-4?b.toFixed(6):b.toExponential(2)}function s(){let{address:a,walletClient:b}=(0,j.v)(),[c,g]=(0,e.useState)([]),[h,n]=(0,e.useState)(""),[s,t]=(0,e.useState)(!1),[u,v]=(0,e.useState)({}),[w,x]=(0,e.useState)({}),[y,z]=(0,e.useState)(null),A=l.$.positionManager;async function B(){if(!a||!A)return void g([]);t(!0),n("Loading positions...");try{let c=await k.R.readContract({address:A,abi:m.g4,functionName:"balanceOf",args:[a]}),d=c>50n?50:Number(c),e=[],f={};async function b(a){let b=a.toLowerCase();if(f[b])return f[b];let c=a.slice(0,6),d=18;try{c=await k.R.readContract({address:a,abi:m.Qi,functionName:"symbol"})}catch{}try{d=Number(await k.R.readContract({address:a,abi:m.Qi,functionName:"decimals"}))}catch{}return f[b]={sym:c,dec:d},f[b]}let h={};for(let c=0;c<d;c++){let d=await k.R.readContract({address:A,abi:m.g4,functionName:"tokenOfOwnerByIndex",args:[a,BigInt(c)]}),f=await k.R.readContract({address:A,abi:m.g4,functionName:"positions",args:[d]}),g=f.token0,i=f.token1,j=await b(g),n=await b(i),o=Number(f.fee),q=p(Number(f.tickLower),j.dec,n.dec),r=p(Number(f.tickUpper),j.dec,n.dec),s=0,t=`${g.toLowerCase()}-${i.toLowerCase()}-${o}`;if(void 0!==h[t])s=h[t];else if(l.$.uniFactory){try{let a=await k.R.readContract({address:l.$.uniFactory,abi:m.HB,functionName:"getPool",args:[g,i,o]});if(a&&"0x0000000000000000000000000000000000000000"!==a){let b=await k.R.readContract({address:a,abi:m.ld,functionName:"slot0"});s=p(b[1],j.dec,n.dec)}}catch{}h[t]=s}let u=s>=q&&s<=r;e.push({tokenId:d,token0:g,token1:i,fee:o,tickLower:Number(f.tickLower),tickUpper:Number(f.tickUpper),liquidity:f.liquidity,sym0:j.sym,sym1:n.sym,dec0:j.dec,dec1:n.dec,tokensOwed0:f.tokensOwed0,tokensOwed1:f.tokensOwed1,priceLower:q,priceUpper:r,currentPrice:s,inRange:u})}g(e),n("")}catch(a){n(String(a?.shortMessage||a?.message||a))}finally{t(!1)}}async function C(c){if(!a||!b||!A)return;t(!0);let d=c.tokenId.toString();v(a=>({...a,[d]:"Collecting fees..."})),x(a=>({...a,[d]:"info"}));try{let e=await b.writeContract({address:A,abi:m.g4,functionName:"collect",args:[{tokenId:c.tokenId,recipient:a,amount0Max:o,amount1Max:o}],chain:b.chain,account:a});v(a=>({...a,[d]:"Confirming..."}));let f=await k.R.waitForTransactionReceipt({hash:e});"success"===f.status?(v(a=>({...a,[d]:"Fees collected!"})),x(a=>({...a,[d]:"success"}))):(v(a=>({...a,[d]:"Tx failed"})),x(a=>({...a,[d]:"error"}))),await B()}catch(a){v(b=>({...b,[d]:String(a?.shortMessage||a?.message||a)})),x(a=>({...a,[d]:"error"}))}finally{t(!1)}}async function D(c){if(!a||!b||!A||c.liquidity<=0n)return;t(!0);let d=c.tokenId.toString();v(a=>({...a,[d]:"Removing liquidity..."})),x(a=>({...a,[d]:"info"}));try{let e=BigInt(Math.floor(Date.now()/1e3)+600),f=await b.writeContract({address:A,abi:m.g4,functionName:"decreaseLiquidity",args:[{tokenId:c.tokenId,liquidity:c.liquidity,amount0Min:0n,amount1Min:0n,deadline:e}],chain:b.chain,account:a});v(a=>({...a,[d]:"Removing... collecting tokens"})),await k.R.waitForTransactionReceipt({hash:f});let g=await b.writeContract({address:A,abi:m.g4,functionName:"collect",args:[{tokenId:c.tokenId,recipient:a,amount0Max:o,amount1Max:o}],chain:b.chain,account:a});await k.R.waitForTransactionReceipt({hash:g}),v(a=>({...a,[d]:"Liquidity removed!"})),x(a=>({...a,[d]:"success"})),await B()}catch(a){v(b=>({...b,[d]:String(a?.shortMessage||a?.message||a)})),x(a=>({...a,[d]:"error"}))}finally{t(!1)}}if(!a)return(0,d.jsxs)("div",{className:"text-lm-gray text-sm p-6 text-center",children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-lg mb-1",children:"No Wallet Connected"}),(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Connect your wallet to view and manage LP positions."})]});let E=c.filter(a=>a.liquidity>0n),F=c.filter(a=>a.liquidity<=0n);return(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("div",{className:"flex items-center gap-3",children:c.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("span",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:[E.length," Active"]}),F.length>0&&(0,d.jsxs)("span",{className:"text-lm-terminal-lightgray text-[10px] lm-upper tracking-wider opacity-50",children:[F.length," Closed"]})]})}),(0,d.jsx)(i.$,{onClick:B,disabled:s,className:"text-lm-orange text-xs border border-lm-terminal-gray hover:border-lm-orange px-3 py-1 transition-colors",children:s?"Loading...":"Refresh"})]}),0===c.length?(0,d.jsxs)("div",{className:"text-center py-8 space-y-2",children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-lg",children:s?"Loading...":"No Positions"}),(0,d.jsx)("div",{className:"text-lm-terminal-lightgray text-xs opacity-60",children:h||"Create an LP position in the Pools tab to start earning fees."})]}):(0,d.jsx)("div",{className:"space-y-2",children:c.map(a=>{let b=a.tokenId.toString(),c=a.liquidity>0n,e=a.tokensOwed0>0n||a.tokensOwed1>0n,g=u[b],h=w[b]||"info",j=y===b,k=`${(a.fee/1e4).toFixed(a.fee<1e3?2:+(a.fee<1e4))}%`;return(0,d.jsxs)("div",{className:`bg-lm-terminal-darkgray border transition-all lm-card-hover ${c&&a.inRange?"border-lm-green/30 lm-in-range":c?"border-lm-orange/30 lm-out-of-range":"border-lm-terminal-gray"}`,children:[(0,d.jsxs)("button",{type:"button",onClick:()=>z(j?null:b),className:"w-full p-3 flex items-center justify-between text-left hover:bg-lm-black/20",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,d.jsx)("span",{className:`lm-dot ${c?a.inRange?"lm-dot-green lm-dot-pulse":"lm-dot-red":"lm-dot-gray"}`}),(0,d.jsxs)("span",{className:"text-white font-bold text-sm",children:[a.sym0,"/",a.sym1]}),(0,d.jsx)("span",{className:"text-lm-terminal-lightgray text-[10px] bg-lm-black px-1.5 py-0.5 border border-lm-terminal-gray lm-mono",children:k}),(0,d.jsxs)("span",{className:"text-lm-terminal-lightgray text-[10px] lm-mono opacity-50",children:["#",a.tokenId.toString()]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[c?(0,d.jsx)("span",{className:`lm-badge font-bold ${a.inRange?"lm-badge-filled-green":"lm-badge-filled-red"}`,children:a.inRange?"IN RANGE":"OUT OF RANGE"}):(0,d.jsx)("span",{className:"lm-badge lm-badge-gray",children:"CLOSED"}),e&&(0,d.jsx)("span",{className:"lm-badge lm-badge-filled-green",children:"FEES"}),(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:`w-3 h-3 text-lm-terminal-lightgray transition-transform ${j?"rotate-180":""}`,children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M4.22 6.22a.75.75 0 011.06 0L8 8.94l2.72-2.72a.75.75 0 111.06 1.06l-3.25 3.25a.75.75 0 01-1.06 0L4.22 7.28a.75.75 0 010-1.06z",clipRule:"evenodd"})})]})]}),(0,d.jsxs)("div",{className:"px-3 pb-2 flex items-center gap-4 text-[10px] flex-wrap",children:[a.currentPrice>0&&(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Price:"}),(0,d.jsx)("span",{className:"text-white lm-mono font-bold",children:q(a.currentPrice)})]}),(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Range:"}),(0,d.jsx)("span",{className:"text-white lm-mono",children:q(a.priceLower)}),(0,d.jsx)("span",{className:"text-lm-terminal-gray",children:"—"}),(0,d.jsx)("span",{className:"text-white lm-mono",children:q(a.priceUpper)})]})]}),c&&a.currentPrice>0&&(0,d.jsx)("div",{className:"px-3 pb-2",children:(0,d.jsxs)("div",{className:"relative h-1.5 bg-lm-black rounded-full overflow-hidden",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-lm-orange/20 rounded-full",style:{left:"10%",right:"10%"}}),(()=>{let b=Math.min(a.priceLower,.5*a.currentPrice),c=Math.max(a.priceUpper,2*a.currentPrice)-b;if(c<=0)return null;let e=(a.priceLower-b)/c*100,f=(a.priceUpper-b)/c*100,g=(a.currentPrice-b)/c*100;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:`absolute top-0 h-full ${a.inRange?"bg-lm-green/40":"bg-lm-orange/40"}`,style:{left:`${e}%`,width:`${f-e}%`}}),(0,d.jsx)("div",{className:"absolute top-0 w-1 h-full bg-white rounded-full",style:{left:`${g}%`,transform:"translateX(-50%)"}})]})})()]})}),j&&(0,d.jsxs)("div",{className:"px-3 pb-3 space-y-2 border-t border-lm-terminal-gray",children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 pt-2 text-[10px]",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"text-lm-terminal-lightgray lm-upper tracking-wider",children:["Price Range (",a.sym1,"/",a.sym0,")"]}),(0,d.jsxs)("div",{className:"text-white lm-mono text-xs mt-0.5",children:[q(a.priceLower)," — ",q(a.priceUpper)]})]}),a.currentPrice>0&&(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray lm-upper tracking-wider",children:"Current Price"}),(0,d.jsxs)("div",{className:"text-white lm-mono text-xs mt-0.5",children:[q(a.currentPrice)," ",a.sym1,"/",a.sym0]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-lm-terminal-lightgray lm-upper tracking-wider",children:"Fee Tier"}),(0,d.jsx)("div",{className:"text-white text-xs mt-0.5",children:k})]})]}),e&&(0,d.jsxs)("div",{className:"bg-lm-black border border-lm-green/20 p-2 text-xs space-y-0.5",children:[(0,d.jsx)("div",{className:"text-lm-green text-[10px] font-bold lm-upper tracking-wider",children:"Uncollected Fees"}),(0,d.jsxs)("div",{className:"flex gap-4 text-white lm-mono",children:[a.tokensOwed0>0n&&(0,d.jsxs)("span",{children:[r((0,f.J)(a.tokensOwed0,a.dec0))," ",a.sym0]}),a.tokensOwed1>0n&&(0,d.jsxs)("span",{children:[r((0,f.J)(a.tokensOwed1,a.dec1))," ",a.sym1]})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 flex-wrap pt-1",children:[(0,d.jsx)(i.$,{size:"sm",className:"bg-lm-green/10 text-lm-green border-lm-green/30 hover:bg-lm-green/20 hover:border-lm-green",onClick:()=>C(a),disabled:s,children:"Collect Fees"}),c&&(0,d.jsx)(i.$,{size:"sm",variant:"danger",onClick:()=>D(a),disabled:s,children:"Remove All Liquidity"}),g&&(0,d.jsxs)("div",{className:"flex items-center gap-1.5",children:["info"===h&&(0,d.jsx)("span",{className:"lm-spinner",style:{width:10,height:10,borderWidth:1}}),"success"===h&&(0,d.jsx)("span",{className:"lm-dot lm-dot-green"}),"error"===h&&(0,d.jsx)("span",{className:"lm-dot lm-dot-red"}),(0,d.jsx)("span",{className:`text-[10px] ${"success"===h?"text-lm-green":"error"===h?"text-lm-red":"text-lm-gray"}`,children:g})]})]})]})]},b)})}),h&&c.length>0&&(0,d.jsxs)("div",{className:"text-xs p-2.5 border border-lm-red/20 bg-lm-black flex items-center gap-2 text-lm-red",children:[(0,d.jsx)("span",{className:"lm-dot lm-dot-red flex-shrink-0"}),(0,d.jsx)("span",{children:h})]})]})}function t({SwapPanel:a,PoolsPanel:b}){let c=(0,e.useMemo)(()=>[{id:"swap",label:"Swap",hint:"Quote + swap any token pair"},{id:"pools",label:"Pools",hint:"Create pools + add liquidity"},{id:"positions",label:"Positions",hint:"Manage your LP positions"}],[]),[f,i]=(0,e.useState)("swap"),j=(0,e.useCallback)(a=>{["swap","flip_tokens","max_balance","set_fee","set_slippage"].includes(a.type)?i("swap"):["add_liquidity","create_pool"].includes(a.type)?i("pools"):["collect_fees","remove_liquidity","refresh_positions"].includes(a.type)?i("positions"):"switch_tab"===a.type&&["swap","pools","positions"].includes(a.tab)&&i(a.tab)},[]);return(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)(n.jc,{context:"exchange",onIntent:j,placeholder:"swap 10 ETH for TSLA \xb7 add liquidity \xb7 create pool \xb7 collect fees \xb7 help"}),(0,d.jsxs)(g.Z,{title:"Exchange",hint:"Swap any token pair. Native ETH supported. Create and manage LP positions.",right:(0,d.jsx)(h.Z,{tabs:c,active:f,onChange:i}),children:["swap"===f?(0,d.jsx)(a,{}):null,"pools"===f?(0,d.jsx)(b,{}):null,"positions"===f?(0,d.jsx)(s,{}):null]})]})}},93445:(a,b,c)=>{Promise.resolve().then(c.bind(c,53058)),Promise.resolve().then(c.bind(c,52402)),Promise.resolve().then(c.bind(c,87855))},93992:(a,b,c)=>{"use strict";c.d(b,{V:()=>g});var d=c(20003),e=c(85365),f=c(39632);async function g(){if(!e.$.tokenRegistry)return[];let a=await d.R.readContract({address:e.$.tokenRegistry,abi:f.wn,functionName:"tokenCount"}),b=[];for(let c=0n;c<a;c++){let a=await d.R.readContract({address:e.$.tokenRegistry,abi:f.wn,functionName:"tokenAt",args:[c]}),g=await d.R.readContract({address:e.$.tokenRegistry,abi:f.wn,functionName:"getToken",args:[a]});g?.whitelisted&&b.push({address:a,symbol:g.symbol,decimals:Number(g.decimals),logoURI:g.logoURI||void 0,metadataURI:g.metadataURI||void 0})}return b}}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[617,446,295,632,408],()=>b(b.s=30783));module.exports=c})();