(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[615],{4547:(e,t,a)=>{"use strict";a.d(t,{LauncherBootstrap:()=>M});var l=a(5155),r=a(2115),s=a(2619),n=a.n(s),i=a(598),o=a(8245),c=a(9361),d=a(2307),m=a(6630),x=a(6594),h=a(8070),g=a(8590),u=a(9719),p=a(8839),b=a(2933),f=a(3376),y=a(8604);let v="0x0000000000000000000000000000000000000000";function j(e){let{open:t,onClose:a}=e;return((0,r.useEffect)(()=>{if(!t)return;let e=e=>{"Escape"===e.key&&a()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,a]),t)?(0,l.jsxs)("div",{className:"fixed inset-0 z-[80] flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-label":"Stonk Launcher information",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:a,"aria-hidden":"true"}),(0,l.jsxs)("div",{className:"relative w-full max-w-2xl bg-lm-terminal-darkgray border-4 border-lm-orange border-dashed p-4 md:p-5 space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,l.jsxs)("div",{className:"min-w-0",children:[(0,l.jsx)("div",{className:"text-white font-bold text-lg lm-upper",children:"How Stonk Launcher Works"}),(0,l.jsx)("div",{className:"text-lm-gray text-xs mt-1",children:"Launch a token, create a Uniswap v3 pool, and share LP fees with stakers."})]}),(0,l.jsx)(m.$,{variant:"ghost",size:"sm",onClick:a,"aria-label":"Close info",children:"Close"})]}),(0,l.jsxs)("div",{className:"space-y-3 text-sm text-lm-terminal-lightgray",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-white font-bold text-xs lm-upper tracking-wider",children:"1) Create a Launch"}),(0,l.jsx)("div",{className:"mt-1",children:"Use the `Create` tab to set your token name/symbol, total supply, sale allocation, and sale price. This deploys a launch contract and a token, and prepares the sale."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-white font-bold text-xs lm-upper tracking-wider",children:"2) Finalize and Create the Pool"}),(0,l.jsx)("div",{className:"mt-1",children:"Finalizing creates the trading pool and initializes pricing. After finalization, trading is live on the `Exchange` page."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-white font-bold text-xs lm-upper tracking-wider",children:"3) LP Fees and Fee Splitting"}),(0,l.jsx)("div",{className:"mt-1",children:"Trading fees accrue in the Uniswap v3 pool. The launch includes a fee splitter that can collect LP fees and route them to the staking system for distribution."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-white font-bold text-xs lm-upper tracking-wider",children:"4) Stake to Earn Your Share"}),(0,l.jsx)("div",{className:"mt-1",children:"Stake the launched token to earn a pro-rata share of the collected LP fees. You can manage staking in the `Stake/Yield` tab or by opening a specific launch and using `Stake & Earn`. Staking positions have a minimum lock period (typically ~2 weeks)."})]}),(0,l.jsx)("div",{className:"text-[11px] text-lm-gray",children:"Tip: You can also use the intent terminal at the top (e.g. `launch PEPE PEP 1M`, `buy 0.01 ETH`, `stake 1000`, `claim rewards`)."})]})]})]}):null}function N(e){return e.slice(0,6)+"..."+e.slice(-4)}function w(e){return"".concat(b.$.blockExplorerUrl||"https://explorer.testnet.chain.robinhood.com","/address/").concat(e)}function k(e){let t=Math.floor(Date.now()/1e3)-e;return t<60?"just now":t<3600?"".concat(Math.floor(t/60),"m ago"):t<86400?"".concat(Math.floor(t/3600),"h ago"):"".concat(Math.floor(t/86400),"d ago")}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,a=Number((0,i.J)(e,t));return 0===a?"0":a>=1e9?"".concat((a/1e9).toFixed(2),"B"):a>=1e6?"".concat((a/1e6).toFixed(2),"M"):a>=1e3?"".concat((a/1e3).toFixed(2),"K"):a>=1?a.toLocaleString(void 0,{maximumFractionDigits:2}):a>=.01?a.toFixed(4):a.toExponential(2)}function S(e){if(0n===e)return"0";let t=Number((0,i.J)(e,18));return t>=1e3?"".concat((t/1e3).toFixed(2),"K"):t>=1?t.toFixed(4):t>=.001?t.toFixed(6):t>=1e-6?t.toFixed(8):t.toExponential(2)}function T(e){if(0n===e)return"—";let t=Number((0,o.c)(e));return t>=1?"".concat(t.toFixed(4)," ETH"):t>=.001?"".concat(t.toFixed(6)," ETH"):t>=1e-6?"".concat((1e6*t).toFixed(2)," \xb5ETH"):"".concat(t.toExponential(2)," ETH")}function E(e){let t=["from-orange-500 to-yellow-400","from-cyan-500 to-blue-500","from-emerald-500 to-green-400","from-purple-500 to-pink-500","from-red-500 to-orange-400","from-indigo-500 to-cyan-400","from-amber-400 to-red-500","from-lime-400 to-emerald-500"],a=0;for(let t=0;t<e.length;t++)a=(a<<5)-a+e.charCodeAt(t)|0;return t[Math.abs(a)%t.length]}function L(e){let{launches:t,onSelect:a}=e,s=(0,r.useRef)(null),[n,i]=(0,r.useState)(0),[o,c]=(0,r.useState)(!1),d=t.length,m=(0,r.useCallback)(e=>{let t=s.current;if(!t)return;let a=t.children[e];a&&(t.scrollTo({left:a.offsetLeft-12,behavior:"smooth"}),i(e))},[]);return((0,r.useEffect)(()=>{if(d<=1||o)return;let e=setInterval(()=>{i(e=>{let t=(e+1)%d;return m(t),t})},5e3);return()=>clearInterval(e)},[d,o,m]),(0,r.useEffect)(()=>{let e=s.current;if(!e)return;let t=!1;function a(){t||(t=!0,requestAnimationFrame(()=>{if(!e){t=!1;return}let a=Array.from(e.children),l=e.scrollLeft+e.clientWidth/2,r=0,s=1/0;a.forEach((e,t)=>{let a=Math.abs(e.offsetLeft+e.clientWidth/2-l);a<s&&(s=a,r=t)}),i(r),t=!1}))}return e.addEventListener("scroll",a,{passive:!0}),()=>e.removeEventListener("scroll",a)},[]),0===d)?null:(0,l.jsxs)("div",{className:"space-y-2",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Featured Launches"}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("button",{type:"button",onClick:()=>m(Math.max(0,n-1)),className:"w-6 h-6 flex items-center justify-center border border-lm-terminal-gray text-lm-terminal-lightgray hover:border-lm-orange hover:text-lm-orange transition-colors","aria-label":"Previous",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-3 h-3",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M9.78 4.22a.75.75 0 010 1.06L7.06 8l2.72 2.72a.75.75 0 11-1.06 1.06L5.47 8.53a.75.75 0 010-1.06l3.25-3.25a.75.75 0 011.06 0z",clipRule:"evenodd"})})}),(0,l.jsx)("button",{type:"button",onClick:()=>m(Math.min(d-1,n+1)),className:"w-6 h-6 flex items-center justify-center border border-lm-terminal-gray text-lm-terminal-lightgray hover:border-lm-orange hover:text-lm-orange transition-colors","aria-label":"Next",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-3 h-3",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M6.22 4.22a.75.75 0 011.06 0l3.25 3.25a.75.75 0 010 1.06l-3.25 3.25a.75.75 0 01-1.06-1.06L8.94 8 6.22 5.28a.75.75 0 010-1.06z",clipRule:"evenodd"})})})]})]}),(0,l.jsx)("div",{ref:s,className:"flex gap-3 overflow-x-auto pb-2 snap-x snap-mandatory scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:t.map((e,t)=>{let r=0n===e.saleSupply?0:Number(10000n*e.sold/e.saleSupply)/100,s=0n===e.remaining&&e.saleSupply>0n,n=e.priceWeiPerToken>0n&&e.sold>0n?e.sold*e.priceWeiPerToken/10n**18n:0n,i=E(e.symbol);return(0,l.jsxs)("button",{type:"button",onClick:()=>a(e),className:"snap-start flex-shrink-0 w-[280px] sm:w-[320px] bg-lm-black border border-lm-terminal-gray hover:border-lm-orange transition-all group text-left",children:[(0,l.jsxs)("div",{className:"h-20 bg-gradient-to-br ".concat(i," relative overflow-hidden"),children:[e.imageURI&&e.imageURI.startsWith("http")&&(0,l.jsx)("img",{src:e.imageURI,alt:e.symbol,className:"absolute inset-0 w-full h-full object-cover mix-blend-overlay opacity-60",onError:e=>{e.target.style.display="none"}}),(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),(0,l.jsxs)("div",{className:"absolute bottom-2 left-3 flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-9 h-9 bg-black/50 border border-white/20 flex items-center justify-center text-white font-bold text-sm backdrop-blur-sm",children:e.symbol.slice(0,2)}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"text-white font-bold text-sm leading-tight",children:["$",e.symbol]}),(0,l.jsx)("div",{className:"text-white/70 text-[10px] leading-tight truncate max-w-[180px]",children:e.name})]})]}),(0,l.jsx)("div",{className:"absolute top-2 right-2",children:(0,l.jsx)("span",{className:"text-[9px] px-1.5 py-0.5 font-bold ".concat(e.finalized?"bg-lm-green/20 text-lm-green border border-lm-green/40":s?"bg-white/10 text-white/60 border border-white/20":"bg-lm-orange/20 text-lm-orange border border-lm-orange/40"),children:e.finalized?"TRADING":s?"SOLD OUT":"SALE OPEN"})})]}),(0,l.jsxs)("div",{className:"p-3 space-y-2",children:[e.saleSupply>0n&&(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"flex justify-between text-[10px]",children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Sale"}),(0,l.jsxs)("span",{className:"text-white font-bold",children:[r.toFixed(1),"%"]})]}),(0,l.jsx)("div",{className:"w-full h-1 bg-lm-terminal-darkgray",children:(0,l.jsx)("div",{className:"h-full transition-all ".concat(e.finalized?"bg-lm-green":"bg-lm-orange"),style:{width:"".concat(Math.min(100,r),"%")}})})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-[10px]",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Price "}),(0,l.jsx)("span",{className:"text-white lm-mono font-bold",children:T(e.priceWeiPerToken)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Raised "}),(0,l.jsxs)("span",{className:"text-white lm-mono font-bold",children:[S(n)," ETH"]})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-[10px] pt-1 border-t border-lm-terminal-gray",children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:e.blockTimestamp?k(e.blockTimestamp):""}),(0,l.jsx)("span",{className:"text-lm-orange group-hover:underline font-bold",children:"View Details →"})]})]})]},e.launch)})}),d>1&&(0,l.jsx)("div",{className:"flex items-center justify-center gap-1.5",children:t.map((e,t)=>(0,l.jsx)("button",{type:"button",onClick:()=>m(t),className:"transition-all ".concat(t===n?"w-5 h-1.5 bg-lm-orange":"w-1.5 h-1.5 bg-lm-terminal-gray hover:bg-lm-terminal-lightgray"),"aria-label":"Go to slide ".concat(t+1)},t))})]})}function R(e){let{x:t,onClose:a,onBuy:s}=e,[i,o]=(0,r.useState)(""),d=0n===t.saleSupply?0:Number(10000n*t.sold/t.saleSupply)/100,m=0n===t.remaining&&t.saleSupply>0n,x=t.priceWeiPerToken>0n&&t.sold>0n?t.sold*t.priceWeiPerToken/10n**18n:0n,h=(()=>{try{let e=(0,c.g)(i||"0");return e>0n&&t.priceWeiPerToken>0n?C(e*10n**18n/t.priceWeiPerToken):""}catch(e){return""}})(),u=E(t.symbol);return(0,l.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:a,children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),(0,l.jsxs)("div",{className:"relative bg-lm-dark-gray border-2 border-dashed border-lm-orange w-full max-w-lg max-h-[85vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)("div",{className:"h-28 bg-gradient-to-br ".concat(u," relative overflow-hidden"),children:[t.imageURI&&t.imageURI.startsWith("http")&&(0,l.jsx)("img",{src:t.imageURI,alt:t.symbol,className:"absolute inset-0 w-full h-full object-cover mix-blend-overlay opacity-50",onError:e=>{e.target.style.display="none"}}),(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"}),(0,l.jsx)("button",{type:"button",onClick:a,className:"absolute top-2 right-2 w-7 h-7 flex items-center justify-center bg-black/50 border border-white/20 text-white hover:text-lm-orange transition-colors","aria-label":"Close",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-4 h-4",children:(0,l.jsx)("path",{d:"M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"})})}),(0,l.jsxs)("div",{className:"absolute bottom-3 left-4 flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-black/50 border border-white/20 flex items-center justify-center text-white font-bold text-lg backdrop-blur-sm",children:t.symbol.slice(0,2)}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"text-white font-bold text-lg leading-tight",children:["$",t.symbol]}),(0,l.jsx)("div",{className:"text-white/70 text-xs leading-tight",children:t.name})]})]}),(0,l.jsx)("div",{className:"absolute bottom-3 right-4",children:(0,l.jsx)("span",{className:"text-[10px] px-2 py-1 font-bold ".concat(t.finalized?"bg-lm-green/20 text-lm-green border border-lm-green/40":m?"bg-white/10 text-white/60 border border-white/20":"bg-lm-orange/20 text-lm-orange border border-lm-orange/40"),children:t.finalized?"TRADING LIVE":m?"SOLD OUT":"SALE OPEN"})})]}),(0,l.jsxs)("div",{className:"p-4 space-y-4",children:[t.saleSupply>0n&&(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Sale Progress"}),(0,l.jsxs)("span",{className:"text-white font-bold",children:[d.toFixed(1),"%"]})]}),(0,l.jsx)("div",{className:"w-full h-2 bg-lm-terminal-darkgray border border-lm-terminal-gray",children:(0,l.jsx)("div",{className:"h-full transition-all ".concat(t.finalized?"bg-lm-green":"bg-lm-orange"),style:{width:"".concat(Math.min(100,d),"%")}})}),(0,l.jsxs)("div",{className:"flex justify-between text-[10px] text-lm-terminal-lightgray",children:[(0,l.jsxs)("span",{children:[(0,l.jsx)("span",{className:"text-white lm-mono",children:C(t.sold)})," sold"]}),(0,l.jsxs)("span",{children:[(0,l.jsx)("span",{className:"text-white lm-mono",children:C(t.remaining)})," remaining"]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,l.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-2",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px]",children:"Price per Token"}),(0,l.jsx)("div",{className:"text-white lm-mono font-bold",children:T(t.priceWeiPerToken)})]}),(0,l.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-2",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px]",children:"Total Raised"}),(0,l.jsxs)("div",{className:"text-white lm-mono font-bold",children:[S(x)," ETH"]})]}),(0,l.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-2",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px]",children:"Total Supply"}),(0,l.jsx)("div",{className:"text-white lm-mono font-bold",children:C(t.saleSupply)})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-[10px]",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray",children:"Creator"}),(0,l.jsx)("a",{href:w(t.creator),target:"_blank",rel:"noreferrer",className:"text-lm-orange hover:underline lm-mono",children:N(t.creator)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray",children:"Token"}),(0,l.jsx)("a",{href:w(t.token),target:"_blank",rel:"noreferrer",className:"text-lm-orange hover:underline lm-mono",children:N(t.token)})]}),t.pool&&t.pool!==v&&(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray",children:"Trading Pool"}),(0,l.jsx)("a",{href:w(t.pool),target:"_blank",rel:"noreferrer",className:"text-lm-orange hover:underline lm-mono",children:N(t.pool)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray",children:"Launch Contract"}),(0,l.jsx)("a",{href:w(t.launch),target:"_blank",rel:"noreferrer",className:"text-lm-orange hover:underline lm-mono",children:N(t.launch)})]})]}),t.blockTimestamp&&(0,l.jsxs)("div",{className:"text-[10px] text-lm-terminal-lightgray",children:["Launched ",k(t.blockTimestamp)]}),!t.finalized&&t.remaining>0n&&(0,l.jsxs)("div",{className:"space-y-2 bg-lm-terminal-darkgray border border-lm-terminal-gray p-3",children:[(0,l.jsx)("div",{className:"text-white font-bold text-xs lm-upper",children:"Quick Buy"}),(0,l.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(g.p,{value:i,onValueChange:o,placeholder:"ETH to spend"})}),(0,l.jsxs)("button",{type:"button",onClick:()=>{s(t,i),a()},className:"text-xs px-4 py-1.5 bg-lm-orange text-black font-bold hover:bg-lm-orange/80 transition-colors whitespace-nowrap",children:["Buy $",t.symbol]})]}),h&&(0,l.jsxs)("div",{className:"text-[10px] text-lm-terminal-lightgray",children:["You'll receive ≈ ",(0,l.jsxs)("span",{className:"text-white font-bold",children:[h," $",t.symbol]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[t.finalized&&t.pool&&t.pool!==v&&(0,l.jsx)(n(),{href:"/exchange?in=ETH&out=".concat(t.token),className:"text-xs px-3 py-1.5 border border-lm-green text-lm-green hover:bg-lm-green/5 transition-colors",onClick:a,children:"Trade on DEX"}),t.finalized&&t.stakingVault&&t.stakingVault!==v&&(0,l.jsxs)(n(),{href:"/launcher/".concat(t.launch),className:"text-xs px-3 py-1.5 border border-lm-orange text-lm-orange hover:bg-lm-orange/5 transition-colors",onClick:a,children:["Stake $",t.symbol]}),(0,l.jsx)(n(),{href:"/launcher/".concat(t.launch),className:"text-xs px-3 py-1.5 bg-lm-orange text-black font-bold hover:bg-lm-orange/80 transition-colors",onClick:a,children:"Full Details"})]})]})]})]})}function P(){let{address:e,walletClient:t,requireCorrectChain:a}=(0,u.v)(),[s,i]=(0,r.useState)([]),[o,m]=(0,r.useState)(""),[x,h]=(0,r.useState)(1),[y,j]=(0,r.useState)(!1),[P,F]=(0,r.useState)("all"),[M,z]=(0,r.useState)({}),[U,I]=(0,r.useState)({}),[A,H]=(0,r.useState)({}),[B,D]=(0,r.useState)(null),O=b.$.launcherFactory;async function W(){if(!O){m("Missing launcher factory address."),i([]);return}j(!0),m("");try{let e=await p.R.getBlockNumber(),t=BigInt(Math.max(1,Math.min(10,x))),a=(0,d.$)("event LaunchCreated(address indexed creator,address indexed token,address indexed launch,string name,string symbol,string metadataURI,string imageURI)"),l=[...await p.R.getLogs({address:O,event:a,fromBlock:e>30000n*t?e-30000n*t:0n,toBlock:e})].reverse(),r=new Set,s=[];for(let e of l){let t=e.args.launch;if(!r.has(t.toLowerCase())&&(r.add(t.toLowerCase()),s.push({creator:e.args.creator,token:e.args.token,launch:t,symbol:e.args.symbol||"TOKEN",name:e.args.name||"LAUNCH",imageURI:e.args.imageURI||"",blockNumber:e.blockNumber}),s.length>=30))break}let n=[...new Set(s.map(e=>e.blockNumber))],o=new Map;await Promise.all(n.map(async e=>{try{let t=await p.R.getBlock({blockNumber:e});o.set(e,Number(t.timestamp))}catch(e){}}));let c=await Promise.all(s.map(async e=>{try{let t,a,l,r=!!(await p.R.readContract({address:O,abi:f.GU,functionName:"launches",args:[e.launch]})).finalized,[s,n,i,c]=await Promise.all([p.R.readContract({address:e.launch,abi:f.F9,functionName:"sold"}),p.R.readContract({address:e.launch,abi:f.F9,functionName:"saleSupply"}),p.R.readContract({address:e.launch,abi:f.F9,functionName:"priceWeiPerToken"}),p.R.readContract({address:e.launch,abi:f.F9,functionName:"remainingForSale"})]);return r&&([t,a,l]=await Promise.all([p.R.readContract({address:e.launch,abi:f.F9,functionName:"pool"}),p.R.readContract({address:e.launch,abi:f.F9,functionName:"feeSplitter"}),p.R.readContract({address:e.launch,abi:f.F9,functionName:"stakingVault"})])),{...e,finalized:r,pool:t,feeSplitter:a,stakingVault:l,sold:s,saleSupply:n,priceWeiPerToken:i,remaining:c,blockTimestamp:o.get(e.blockNumber)}}catch(t){return{...e,finalized:!1,sold:0n,saleSupply:0n,priceWeiPerToken:0n,remaining:0n}}}));i(c),0===c.length&&m("No launches found in recent blocks.")}catch(e){i([]),m(String((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||e))}finally{j(!1)}}async function $(l,r){let s,n=l.launch,i=r||A[n]||"";if(!e||!t){z(e=>({...e,[n]:"Connect wallet."})),I(e=>({...e,[n]:"error"}));return}try{s=(0,c.g)(i||"0")}catch(e){z(e=>({...e,[n]:"Invalid ETH amount."})),I(e=>({...e,[n]:"error"}));return}if(s<=0n){z(e=>({...e,[n]:"Enter an ETH amount."})),I(e=>({...e,[n]:"error"}));return}z(e=>({...e,[n]:"Buying ".concat(i," ETH of ").concat(l.symbol,"...")})),I(e=>({...e,[n]:"info"}));try{await a();let r=await t.writeContract({address:l.launch,abi:f.F9,functionName:"buy",args:[],value:s,chain:p.A,account:e});z(e=>({...e,[n]:"Confirming on-chain..."})),await p.R.waitForTransactionReceipt({hash:r}),z(e=>({...e,[n]:"Purchased ".concat(l.symbol," tokens for ").concat(i," ETH!")})),I(e=>({...e,[n]:"success"})),await W()}catch(t){let e=String((null==t?void 0:t.shortMessage)||(null==t?void 0:t.message)||t);e.includes("user rejected")||e.includes("User denied")?z(e=>({...e,[n]:"Transaction cancelled."})):z(t=>({...t,[n]:"Buy failed: ".concat(e)})),I(e=>({...e,[n]:"error"}))}}async function _(l){let r=l.launch+"-fee";if(!e||!t){z(e=>({...e,[r]:"Connect wallet."})),I(e=>({...e,[r]:"error"}));return}if(!l.feeSplitter||l.feeSplitter===v){z(e=>({...e,[r]:"No fee splitter for this launch."})),I(e=>({...e,[r]:"error"}));return}z(e=>({...e,[r]:"Collecting fees..."})),I(e=>({...e,[r]:"info"}));try{await a();let s=await t.writeContract({address:l.feeSplitter,abi:f.nU,functionName:"collectAndSplit",args:[],chain:p.A,account:e});z(e=>({...e,[r]:"Confirming..."})),await p.R.waitForTransactionReceipt({hash:s}),z(e=>({...e,[r]:"Fees collected & split!"})),I(e=>({...e,[r]:"success"}))}catch(e){z(t=>({...t,[r]:String((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||e)})),I(e=>({...e,[r]:"error"}))}}(0,r.useEffect)(()=>{W().catch(()=>{})},[x,O]);let V=(0,r.useMemo)(()=>"open"===P?s.filter(e=>!e.finalized):"finalized"===P?s.filter(e=>e.finalized):s,[s,P]);return(0,l.jsxs)("div",{className:"space-y-4",children:[s.length>0&&(0,l.jsx)(L,{launches:s,onSelect:D}),B&&(0,l.jsx)(R,{x:B,onClose:()=>D(null),onBuy:(e,t)=>$(e,t)}),(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[(0,l.jsx)("div",{className:"flex items-center gap-1",children:["all","open","finalized"].map(e=>(0,l.jsx)("button",{type:"button",onClick:()=>F(e),className:"text-[10px] px-2 py-1 border transition-colors capitalize ".concat(P===e?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"),children:"all"===e?"All (".concat(s.length,")"):"open"===e?"Open (".concat(s.filter(e=>!e.finalized).length,")"):"Live (".concat(s.filter(e=>e.finalized).length,")")},e))}),(0,l.jsxs)("div",{className:"flex gap-1",children:[(0,l.jsx)("button",{type:"button",onClick:()=>h(1),className:"text-[10px] px-2 py-1 border transition-colors ".concat(1===x?"border-lm-orange text-lm-orange":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"),children:"Latest"}),(0,l.jsx)("button",{type:"button",onClick:()=>h(e=>Math.min(10,e+1)),className:"text-[10px] px-2 py-1 border border-lm-terminal-gray text-lm-gray hover:border-lm-gray transition-colors",children:"Older"}),(0,l.jsx)("button",{type:"button",onClick:()=>W(),disabled:y,className:"text-[10px] px-2 py-1 border border-lm-orange text-lm-orange hover:bg-lm-orange/5 transition-colors disabled:opacity-40 disabled:pointer-events-none",children:y?"...":"Refresh"})]})]}),y&&(0,l.jsx)("div",{className:"text-lm-gray text-xs animate-pulse text-center py-4",children:"Indexing launches..."}),o&&!y&&(0,l.jsx)("div",{className:"text-lm-red text-xs",children:o}),0!==V.length||y?(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:V.map(t=>{let a=t.launch,r=0n===t.saleSupply?0:Number(10000n*t.sold/t.saleSupply)/100,s=0n===t.remaining&&t.saleSupply>0n,i=t.priceWeiPerToken>0n&&t.sold>0n?t.sold*t.priceWeiPerToken/10n**18n:0n,o=A[a]&&t.priceWeiPerToken>0n?(()=>{try{let e=(0,c.g)(A[a]||"0");return e>0n?C(e*10n**18n/t.priceWeiPerToken):""}catch(e){return""}})():"",d=M[a],m=U[a]||"info",x=a+"-fee",h=M[x],u=U[x]||"info";return(0,l.jsxs)("div",{className:"bg-lm-black border border-lm-terminal-gray hover:border-lm-terminal-lightgray transition-colors p-3 space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsxs)("button",{type:"button",onClick:()=>D(t),className:"flex items-center gap-2 min-w-0 text-left group",children:[t.imageURI&&t.imageURI.startsWith("http")?(0,l.jsx)("img",{src:t.imageURI,alt:t.symbol,className:"w-8 h-8 border border-lm-terminal-gray object-cover flex-shrink-0",onError:e=>{e.target.style.display="none"}}):(0,l.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br ".concat(E(t.symbol)," flex items-center justify-center text-white font-bold text-[10px] flex-shrink-0"),children:t.symbol.slice(0,2)}),(0,l.jsxs)("div",{className:"min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsxs)("span",{className:"text-white font-bold text-sm group-hover:text-lm-orange transition-colors",children:["$",t.symbol]}),(0,l.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 border ".concat(t.finalized?"border-lm-green text-lm-green":s?"border-lm-gray text-lm-gray":"border-lm-orange text-lm-orange"),children:t.finalized?"TRADING":s?"SOLD OUT":"SALE OPEN"})]}),(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] truncate",children:t.name})]})]}),(0,l.jsxs)("div",{className:"text-right flex-shrink-0",children:[t.blockTimestamp&&(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px]",children:k(t.blockTimestamp)}),(0,l.jsxs)("a",{href:w(t.creator),target:"_blank",rel:"noreferrer",className:"text-lm-terminal-lightgray hover:text-lm-orange text-[10px] lm-mono transition-colors",children:["by ",N(t.creator)]})]})]}),t.saleSupply>0n&&(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"flex justify-between text-[10px]",children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Sale"}),(0,l.jsxs)("span",{className:"text-white font-bold",children:[r.toFixed(1),"%"]})]}),(0,l.jsx)("div",{className:"w-full h-1.5 bg-lm-terminal-darkgray border border-lm-terminal-gray",children:(0,l.jsx)("div",{className:"h-full transition-all ".concat(t.finalized?"bg-lm-green":"bg-lm-orange"),style:{width:"".concat(Math.min(100,r),"%")}})})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-[10px]",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Price "}),(0,l.jsx)("span",{className:"text-white lm-mono font-bold",children:T(t.priceWeiPerToken)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Raised "}),(0,l.jsxs)("span",{className:"text-white lm-mono font-bold",children:[S(i)," ETH"]})]})]}),!t.finalized&&t.remaining>0n&&(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsxs)("div",{className:"flex gap-1.5 items-end",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(g.p,{value:A[a]||"",onValueChange:e=>H(t=>({...t,[a]:e})),placeholder:"ETH to spend"})}),(0,l.jsx)("button",{type:"button",onClick:()=>$(t),disabled:!e||"info"===U[a],className:"text-xs px-3 py-1.5 bg-lm-orange text-black font-bold hover:bg-lm-orange/80 disabled:opacity-40 disabled:pointer-events-none transition-colors whitespace-nowrap",children:"info"===U[a]?"...":"Buy"})]}),o&&(0,l.jsxs)("div",{className:"text-[10px] text-lm-terminal-lightgray",children:["≈ ",(0,l.jsxs)("span",{className:"text-white font-bold",children:[o," $",t.symbol]})]}),d&&(0,l.jsx)("div",{className:"text-[10px] ".concat("success"===m?"text-lm-green":"error"===m?"text-lm-red":"text-lm-gray"),children:d})]}),t.finalized&&(0,l.jsxs)("div",{className:"flex items-center gap-1.5 flex-wrap",children:[t.pool&&t.pool!==v&&(0,l.jsx)(n(),{href:"/exchange?in=ETH&out=".concat(t.token),className:"text-[10px] px-2 py-1 border border-lm-green text-lm-green hover:bg-lm-green/5 transition-colors",children:"Trade"}),t.stakingVault&&t.stakingVault!==v&&(0,l.jsx)(n(),{href:"/launcher/".concat(t.launch),className:"text-[10px] px-2 py-1 border border-lm-orange text-lm-orange hover:bg-lm-orange/5 transition-colors",children:"Stake"}),t.feeSplitter&&t.feeSplitter!==v&&(0,l.jsx)("button",{type:"button",onClick:()=>_(t),disabled:"info"===U[t.launch+"-fee"],className:"text-[10px] px-2 py-1 border border-lm-terminal-gray text-lm-terminal-lightgray hover:border-lm-orange hover:text-lm-orange transition-colors disabled:opacity-40 disabled:pointer-events-none",children:"info"===U[t.launch+"-fee"]?"...":"Fees"}),h&&(0,l.jsx)("span",{className:"text-[10px] ".concat("success"===u?"text-lm-green":"error"===u?"text-lm-red":"text-lm-gray"),children:h})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between pt-1 border-t border-lm-terminal-gray",children:[(0,l.jsx)("a",{href:w(t.launch),target:"_blank",rel:"noreferrer",className:"text-[10px] text-lm-terminal-lightgray hover:text-lm-orange transition-colors lm-mono",children:N(t.launch)}),(0,l.jsx)("button",{type:"button",onClick:()=>D(t),className:"text-[10px] px-2 py-1 bg-lm-orange text-black font-bold hover:bg-lm-orange/80 transition-colors",children:"Details"})]})]},a)})}):(0,l.jsx)("div",{className:"text-lm-gray text-sm text-center py-8",children:"No launches found. Be the first to create one!"})]})}function F(){let{address:e,walletClient:t,requireCorrectChain:a}=(0,u.v)(),[s,i]=(0,r.useState)([]),[o,c]=(0,r.useState)(""),[m,x]=(0,r.useState)(!1),[h,g]=(0,r.useState)({}),[y,j]=(0,r.useState)({}),w=b.$.launcherFactory;async function k(){if(!e||!w)return void i([]);x(!0),c("");try{let t=await p.R.getBlockNumber(),a=(0,d.$)("event LaunchCreated(address indexed creator,address indexed token,address indexed launch,string name,string symbol,string metadataURI,string imageURI)"),l=await p.R.getLogs({address:w,event:a,fromBlock:t>100000n?t-100000n:0n,toBlock:t}),r=new Set,s=[];for(let e of l){let t=e.args.launch.toLowerCase();r.has(t)||(r.add(t),s.push(e.args.launch))}let n=[];for(let t of s)try{let a=await p.R.readContract({address:t,abi:f.F9,functionName:"stakingVault"});if(!a||a===v)continue;let l=await p.R.readContract({address:a,abi:f.gh,functionName:"users",args:[e]}),r=l.staked;if(r<=0n)continue;let s=await p.R.readContract({address:a,abi:f.gh,functionName:"stakeToken"}),i="TOKEN",o=18;try{i=await p.R.readContract({address:s,abi:f.Qi,functionName:"symbol"})}catch(e){}try{o=Number(await p.R.readContract({address:s,abi:f.Qi,functionName:"decimals"}))}catch(e){}let c=0n,d=0n;try{let t=await p.R.readContract({address:a,abi:f.gh,functionName:"pendingRewards",args:[e]});c=t.pending0||t[0]||0n,d=t.pending1||t[1]||0n}catch(e){}let m="WETH",x=i;try{let e=await p.R.readContract({address:a,abi:f.gh,functionName:"rewardToken0"}),t=await p.R.readContract({address:a,abi:f.gh,functionName:"rewardToken1"});try{m=await p.R.readContract({address:e,abi:f.Qi,functionName:"symbol"})}catch(e){}try{x=await p.R.readContract({address:t,abi:f.Qi,functionName:"symbol"})}catch(e){}}catch(e){}n.push({launchAddr:t,vaultAddr:a,stakeTokenAddr:s,stakeSymbol:i,stakeDecimals:o,staked:r,unlockTime:l.unlockTime,pending0:c,pending1:d,rewardToken0Symbol:m,rewardToken1Symbol:x})}catch(e){}i(n),0===n.length&&c("No active stakes found.")}catch(e){c(String((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||e))}finally{x(!1)}}async function T(l){if(!e||!t)return;let r=l.vaultAddr;g(e=>({...e,[r]:"Claiming..."})),j(e=>({...e,[r]:"info"}));try{await a();let s=await t.writeContract({address:l.vaultAddr,abi:f.gh,functionName:"claim",args:[],chain:t.chain,account:e});g(e=>({...e,[r]:"Confirming..."})),await p.R.waitForTransactionReceipt({hash:s}),g(e=>({...e,[r]:"Claimed!"})),j(e=>({...e,[r]:"success"})),await k()}catch(e){g(t=>({...t,[r]:String((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||e)})),j(e=>({...e,[r]:"error"}))}}async function E(l){if(!e||!t)return;let r=l.vaultAddr,s=BigInt(Math.floor(Date.now()/1e3));if(l.unlockTime>s){g(e=>({...e,[r]:"Still locked for ~".concat(Math.ceil(Number(l.unlockTime-s)/3600)," hours")})),j(e=>({...e,[r]:"error"}));return}g(e=>({...e,[r]:"Unstaking..."})),j(e=>({...e,[r]:"info"}));try{await a();let s=await t.writeContract({address:l.vaultAddr,abi:f.gh,functionName:"unstake",args:[l.staked],chain:t.chain,account:e});g(e=>({...e,[r]:"Confirming..."})),await p.R.waitForTransactionReceipt({hash:s}),g(e=>({...e,[r]:"Unstaked!"})),j(e=>({...e,[r]:"success"})),await k()}catch(e){g(t=>({...t,[r]:String((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||e)})),j(e=>({...e,[r]:"error"}))}}return((0,r.useEffect)(()=>{k().catch(()=>{})},[e]),e)?(0,l.jsxs)("div",{className:"space-y-3",children:[s.length>0&&(0,l.jsx)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-2 flex items-center justify-between text-xs",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Active Positions: "}),(0,l.jsx)("span",{className:"text-white font-bold",children:s.length})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:m?(0,l.jsx)("span",{className:"animate-pulse",children:"Scanning vaults..."}):(0,l.jsxs)("span",{children:[s.length," position",1!==s.length?"s":""]})}),(0,l.jsx)("button",{type:"button",onClick:()=>k(),disabled:m,className:"text-xs px-2 py-1 border border-lm-orange text-lm-orange hover:bg-lm-orange/5 transition-colors",children:m?"...":"Refresh"})]}),o&&0===s.length&&(0,l.jsx)("div",{className:"text-lm-gray text-sm text-center py-6",children:o}),s.length>0&&(0,l.jsx)("div",{className:"space-y-2",children:s.map(e=>{let t=e.vaultAddr,a=BigInt(Math.floor(Date.now()/1e3)),r=e.unlockTime>a,s=r?Math.ceil(Number(e.unlockTime-a)/3600):0,i=e.pending0>0n||e.pending1>0n,o=h[t],c=y[t]||"info";return(0,l.jsxs)("div",{className:"bg-lm-black border border-lm-terminal-gray p-3 space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("span",{className:"text-white font-bold",children:["$",e.stakeSymbol]}),(0,l.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 border ".concat(r?"border-lm-red text-lm-red":"border-lm-green text-lm-green"),children:r?"LOCKED — ".concat(s,"h left"):"UNLOCKED"})]}),(0,l.jsx)(n(),{href:"/launcher/".concat(e.launchAddr),className:"text-[10px] text-lm-orange hover:underline lm-mono",children:N(e.vaultAddr)})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray",children:"Staked"}),(0,l.jsx)("div",{className:"text-white lm-mono font-bold",children:C(e.staked,e.stakeDecimals)})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"text-lm-terminal-lightgray",children:["Rewards (",e.rewardToken0Symbol,")"]}),(0,l.jsx)("div",{className:"text-lm-orange lm-mono",children:S(e.pending0)})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"text-lm-terminal-lightgray",children:["Rewards (",e.rewardToken1Symbol,")"]}),(0,l.jsx)("div",{className:"text-lm-orange lm-mono",children:S(e.pending1)})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[i&&(0,l.jsx)("button",{type:"button",onClick:()=>T(e),className:"text-xs px-3 py-1 bg-lm-orange text-black font-bold hover:bg-lm-orange/80 transition-colors",children:"Claim"}),(0,l.jsx)("button",{type:"button",onClick:()=>E(e),disabled:r,className:"text-xs px-3 py-1 border border-lm-orange text-lm-orange transition-colors ".concat(r?"opacity-40":"hover:bg-lm-orange/5"),children:"Unstake All"}),o&&(0,l.jsx)("span",{className:"text-[10px] ".concat("success"===c?"text-lm-green":"error"===c?"text-lm-red":"text-lm-gray"),children:o})]})]},t)})})]}):(0,l.jsx)("div",{className:"text-lm-gray text-sm text-center py-6",children:"Connect wallet to view your stakes."})}function M(e){let{LauncherPanel:t}=e,a=(0,r.useMemo)(()=>[{id:"launches",label:"Launches",hint:"Discover + buy tokens"},{id:"create",label:"Create",hint:"Launch a new meme coin"},{id:"stake",label:"Stake/Yield",hint:"Your staking positions"}],[]),[s,n]=(0,r.useState)("launches"),[i,o]=(0,r.useState)(!1),c=(0,r.useCallback)(e=>{["launch_token","finalize_launch"].includes(e.type)?n("create"):["buy_token","filter_launches","collect_lp_fees"].includes(e.type)?n("launches"):["stake","unstake","claim_rewards"].includes(e.type)?n("stake"):"switch_tab"===e.type&&["launches","create","stake"].includes(e.tab)&&n(e.tab)},[]);return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(y.jc,{context:"launcher",onIntent:c,placeholder:"launch PEPE PEP 1M \xb7 buy 0.01 ETH \xb7 stake 1000 \xb7 claim rewards \xb7 help"}),(0,l.jsxs)(x.Z,{title:"Stonk Launcher",hint:"Launch meme coins with instant DEX liquidity, fee splitting, and staking rewards.",right:(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,l.jsx)(h.Z,{tabs:a,active:s,onChange:n}),(0,l.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>o(!0),"aria-label":"Launcher information",children:"Info"})]}),children:["launches"===s?(0,l.jsx)(P,{}):null,"create"===s?(0,l.jsx)(t,{}):null,"stake"===s?(0,l.jsx)(F,{}):null]}),(0,l.jsx)(j,{open:i,onClose:()=>o(!1)})]})}},5375:(e,t,a)=>{"use strict";a.d(t,{LauncherPanel:()=>j});var l=a(5155),r=a(2115),s=a(598),n=a(5028),i=a(9361),o=a(2938),c=a(6630),d=a(8590),m=a(9719),x=a(8839),h=a(2933),g=a(3376),u=a(8604);function p(e){return e.slice(0,6)+"..."+e.slice(-4)}function b(e){return"".concat(h.$.blockExplorerUrl||"https://explorer.testnet.chain.robinhood.com","/address/").concat(e)}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,a=(0,s.J)(e,t),l=Number(a);return 0===l?"0":l>=1e6?"".concat((l/1e6).toFixed(2),"M"):l>=1e3?"".concat((l/1e3).toFixed(2),"K"):l>=1?l.toFixed(2):a}function y(e){let t=Number((0,s.J)(e,18));return 0===t?"0":t>=1?t.toFixed(4):t>=.001?t.toFixed(6):t.toExponential(2)}let v=[{label:"0.05%",value:"500",hint:"Stablecoins"},{label:"0.30%",value:"3000",hint:"Recommended"},{label:"1.00%",value:"10000",hint:"Exotic pairs"}];function j(){let{address:e,walletClient:t,requireCorrectChain:a,connect:s}=(0,m.v)(),[j,N]=(0,r.useState)(""),[w,k]=(0,r.useState)(""),[C,S]=(0,r.useState)(""),[T,E]=(0,r.useState)(""),[L,R]=(0,r.useState)("1000000"),[P,F]=(0,r.useState)("5"),[M,z]=(0,r.useState)("60"),[U,I]=(0,r.useState)("0.000001"),[A,H]=(0,r.useState)(""),[B,D]=(0,r.useState)("0.000001"),[O,W]=(0,r.useState)(!1),[$,_]=(0,r.useState)(""),[V,q]=(0,r.useState)(""),[X,Y]=(0,r.useState)("3000"),[G,K]=(0,r.useState)(""),[Q,J]=(0,r.useState)(0n),[Z,ee]=(0,r.useState)(""),[et,ea]=(0,r.useState)("info"),[el,er]=(0,r.useState)(!1),[es,en]=(0,r.useState)(""),[ei,eo]=(0,r.useState)(null),ec=h.$.launcherFactory,ed=(0,r.useMemo)(()=>{try{return(0,n.X)(L||"0",18)}catch(e){return 0n}},[L]);(0,u.SL)((0,r.useCallback)(e=>{"launch_token"===e.type?(e.name&&N(e.name),e.symbol&&k(e.symbol),e.supply&&R(e.supply),e.creatorPct&&F(e.creatorPct),e.salePct&&z(e.salePct),e.price&&I(e.price)):"finalize_launch"===e.type&&(e.address&&H(e.address),e.price&&D(e.price),e.fee&&Y(e.fee))},[]));let em=(0,r.useMemo)(()=>{try{return(0,i.g)(U||"0")}catch(e){return 0n}},[U]),ex=(0,r.useMemo)(()=>Math.round(100*Number(P||"0")),[P]),eh=(0,r.useMemo)(()=>Math.round(100*Number(M||"0")),[M]),eg=(0,r.useMemo)(()=>{if(ed<=0n)return null;let e=BigInt(Math.max(0,Math.min(5e3,ex))),t=BigInt(Math.max(0,Math.min(1e4,eh))),a=ed*e/10000n,l=ed-a,r=l*t/10000n,s=l-r,n=Number(e)/100,i=ed>0n?Number(10000n*r/ed)/100:0,o=ed>0n?Number(10000n*s/ed)/100:0,c=em>0n?r*em/10n**18n:0n;return{creatorTokens:a,saleTokens:r,lpTokens:s,creatorPctNum:n,salePctOfTotal:i,lpPctOfTotal:o,totalSaleCostEth:c}},[ed,ex,eh,em]),eu=(0,r.useMemo)(()=>{try{let e=(0,i.g)(B||"0");if(e<=0n||!h.$.weth||!G)return"";let t=h.$.weth,a=G.toLowerCase()<t.toLowerCase()?G:t,l=e;if(a.toLowerCase()===t.toLowerCase()&&(l=10n**36n/e)<=0n)return"";let r=2n**96n,s=r*r*l/10n**18n;return(function(e){if(e<0n)throw Error("sqrt of negative");if(e<2n)return e;let t=e,a=t+1n>>1n;for(;a<t;)t=a,a=a+e/a>>1n;return t})(s).toString()}catch(e){return""}},[B,G]),ep=(0,r.useMemo)(()=>$.trim()?$.trim():eu,[eu,$]);async function eb(e){try{let t=await x.R.readContract({address:e,abi:g.F9,functionName:"memeToken"});K(t)}catch(e){K("")}}async function ef(){if(!e){ee("Connect wallet."),ea("error");return}if(!t){ee("No wallet client."),ea("error");return}if(!ec){ee("Missing factory address in config."),ea("error");return}er(!0),en(""),eo(null);try{let l=(w||"").trim().slice(0,11);if(!l)throw Error("Symbol is required.");if(!j.trim())throw Error("Name is required.");let r=BigInt(ex),s=BigInt(eh);if(r>5000n)throw Error("Creator allocation cannot exceed 50%.");if(s>10000n)throw Error("Sale portion cannot exceed 100%.");if(r+s>10000n)throw Error("Creator + sale allocation cannot exceed 100%.");if(em<=0n)throw Error("Sale price must be greater than 0.");if(ed<=0n)throw Error("Total supply must be greater than 0.");ee("Launching ".concat(l," (").concat(L," supply)...")),ea("info"),await a(),ee("Awaiting wallet signature...");let n=await t.writeContract({address:ec,abi:g.GU,functionName:"createLaunch",args:[{name:j.trim(),symbol:l,metadataURI:C.trim(),imageURI:T.trim(),totalSupplyWei:ed,creatorAllocationBps:r,saleBpsOfRemaining:s,priceWeiPerToken:em}],chain:x.A,account:e});for(let e of(en(n),ee("Confirming on-chain..."),(await x.R.waitForTransactionReceipt({hash:n})).logs))try{let t=(0,o.j)({abi:g.GU,data:e.data,topics:e.topics});if("LaunchCreated"===t.eventName){let e=t.args,a=e.launch;H(a),K(e.token),D(U),eo({launch:a,token:e.token,symbol:String(e.symbol)}),eb(a).catch(()=>{}),ee("".concat(String(e.symbol)," launched! Token: ").concat(p(e.token),". Proceed to Step 2 (Finalize) to seed DEX liquidity.")),ea("success");return}}catch(e){}ee("Transaction confirmed but no LaunchCreated event found."),ea("info")}catch(t){let e=String((null==t?void 0:t.shortMessage)||(null==t?void 0:t.message)||t);e.includes("user rejected")||e.includes("User denied")?ee("Transaction cancelled by user."):ee("Launch failed: ".concat(e)),ea("error")}finally{er(!1)}}async function ey(){if(!e){ee("Connect wallet."),ea("error");return}if(!t){ee("No wallet client."),ea("error");return}if(!ec){ee("Missing factory address."),ea("error");return}if(!A){ee("Enter or create a launch first."),ea("error");return}er(!0),en("");try{ee("Preparing finalization..."),ea("info"),await a();let l=BigInt(ep||"0"),r=Number(X||"0");if(!l)throw Error("Set initial price to compute pool price");let s=0n;try{s=(0,i.g)((V||"0").trim()||"0")}catch(e){throw Error("Extra ETH for liquidity is invalid. Enter a valid number (or 0).")}if(0n===Q&&0n===s)throw Error("This launch has 0 ETH raised so far. Add a small ETH top-up (or run a sale first) to seed liquidity.");ee("Awaiting wallet signature...");let n=await t.writeContract({address:ec,abi:g.GU,functionName:"finalizeLaunch",args:[A,l,r],value:s,chain:x.A,account:e});en(n),ee("Confirming finalization...");let o=await x.R.waitForTransactionReceipt({hash:n});"success"===o.status?(ee("Launch finalized! Pool created, LP minted, staking vault live."),ea("success")):(ee("Finalize transaction reverted."),ea("error"))}catch(e){ee(String((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||e)),ea("error")}finally{er(!1)}}return(0,r.useEffect)(()=>{let e=!1;return(async function(){if(!A||!/^0x[0-9a-fA-F]{40}$/.test(String(A)))return void J(0n);try{let t=await x.R.getBalance({address:A});e||J(t)}catch(t){e||J(0n)}})().catch(()=>{}),()=>{e=!0}},[A]),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-lm-black border border-lm-terminal-gray p-3 space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"w-6 h-6 flex items-center justify-center bg-lm-orange text-black font-bold text-xs rounded-full",children:"1"}),(0,l.jsx)("span",{className:"text-white font-bold text-sm lm-upper",children:"Create Your Token"})]}),(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Define your meme coin's name, supply, and tokenomics. Tokens are created instantly on-chain."}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Token Name"}),(0,l.jsx)(d.p,{value:j,onValueChange:N,numeric:!1,placeholder:"e.g. Stonk Coin"})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Ticker Symbol"}),(0,l.jsx)(d.p,{value:w,onValueChange:k,numeric:!1,placeholder:"e.g. STONK"}),(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px]",children:"Max 11 characters"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"text-lm-terminal-lightgray text-xs",children:["Description / Metadata URI ",(0,l.jsx)("span",{className:"text-lm-gray",children:"(optional)"})]}),(0,l.jsx)(d.p,{value:C,onValueChange:S,numeric:!1,placeholder:"ipfs://..."})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"text-lm-terminal-lightgray text-xs",children:["Token Image URL ",(0,l.jsx)("span",{className:"text-lm-gray",children:"(optional)"})]}),(0,l.jsx)(d.p,{value:T,onValueChange:E,numeric:!1,placeholder:"https://... or ipfs://..."})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Total Supply"}),(0,l.jsx)(d.p,{value:L,onValueChange:R,placeholder:"1000000"}),(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px]",children:"How many tokens to create (e.g. 1,000,000)"})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Sale Price per Token (in ETH)"}),(0,l.jsx)(d.p,{value:U,onValueChange:I,placeholder:"0.000001"}),(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px]",children:"How much ETH buyers pay per token"})]})]}),(0,l.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-3 space-y-3",children:[(0,l.jsx)("div",{className:"text-white font-bold text-xs lm-upper",children:"Tokenomics"}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Your Share (creator allocation)"}),(0,l.jsxs)("div",{className:"text-lm-orange font-bold text-sm lm-mono",children:[P||"0","%"]})]}),(0,l.jsx)("input",{type:"range",min:0,max:50,step:1,value:Number(P)||0,onChange:e=>F(String(e.target.value)),className:"w-full h-1.5 bg-lm-terminal-gray rounded-none appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5 [&::-webkit-slider-thumb]:bg-lm-orange [&::-webkit-slider-thumb]:rounded-none"}),(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px]",children:"Tokens sent to your wallet on creation. Max 50%."})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Public Sale"}),(0,l.jsxs)("div",{className:"text-lm-green font-bold text-sm lm-mono",children:[M||"0","%"]})]}),(0,l.jsx)("input",{type:"range",min:0,max:100,step:1,value:Number(M)||0,onChange:e=>z(String(e.target.value)),className:"w-full h-1.5 bg-lm-terminal-gray rounded-none appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3.5 [&::-webkit-slider-thumb]:h-3.5 [&::-webkit-slider-thumb]:bg-lm-green [&::-webkit-slider-thumb]:rounded-none"}),(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px]",children:"Percentage of remaining tokens (after creator share) offered for public sale. The rest goes to DEX liquidity."})]})]}),eg&&(0,l.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-3 space-y-2",children:[(0,l.jsx)("div",{className:"text-white font-bold text-xs lm-upper",children:"Distribution Preview"}),(0,l.jsxs)("div",{className:"flex gap-0.5 h-3 rounded-sm overflow-hidden",children:[eg.creatorPctNum>0&&(0,l.jsx)("div",{className:"bg-lm-orange transition-all",style:{width:"".concat(eg.creatorPctNum,"%")}}),eg.salePctOfTotal>0&&(0,l.jsx)("div",{className:"bg-lm-green transition-all",style:{width:"".concat(eg.salePctOfTotal,"%")}}),eg.lpPctOfTotal>0&&(0,l.jsx)("div",{className:"bg-white/20 transition-all",style:{width:"".concat(eg.lpPctOfTotal,"%")}})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("span",{className:"w-2.5 h-2.5 bg-lm-orange flex-shrink-0"}),(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"You (creator)"})]}),(0,l.jsx)("div",{className:"text-white font-bold lm-mono ml-4",children:f(eg.creatorTokens)}),(0,l.jsxs)("div",{className:"text-lm-terminal-lightgray text-[10px] ml-4",children:[eg.creatorPctNum,"%"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("span",{className:"w-2.5 h-2.5 bg-lm-green flex-shrink-0"}),(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Public Sale"})]}),(0,l.jsx)("div",{className:"text-white font-bold lm-mono ml-4",children:f(eg.saleTokens)}),(0,l.jsxs)("div",{className:"text-lm-terminal-lightgray text-[10px] ml-4",children:[eg.salePctOfTotal.toFixed(1),"%"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("span",{className:"w-2.5 h-2.5 bg-white/20 flex-shrink-0"}),(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"DEX Liquidity"})]}),(0,l.jsx)("div",{className:"text-white font-bold lm-mono ml-4",children:f(eg.lpTokens)}),(0,l.jsxs)("div",{className:"text-lm-terminal-lightgray text-[10px] ml-4",children:[eg.lpPctOfTotal.toFixed(1),"%"]})]})]}),eg.totalSaleCostEth>0n&&(0,l.jsxs)("div",{className:"text-xs text-lm-terminal-lightgray pt-1 border-t border-lm-terminal-gray",children:["If every token sells: ",(0,l.jsxs)("span",{className:"text-white font-bold lm-mono",children:[y(eg.totalSaleCostEth)," ETH"]})," raised"]})]}),(0,l.jsx)(c.$,{onClick:e?ef:s,loading:el,disabled:el||!!e&&(!j.trim()||!w.trim()),variant:"primary",size:"lg",className:"w-full",children:el?"Creating Token...":e?"Launch $".concat(w.toUpperCase()||"TOKEN"):"Connect Wallet"}),ei&&(0,l.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-green p-3 space-y-1.5",children:[(0,l.jsx)("div",{className:"text-lm-green font-bold text-xs lm-upper",children:"Token Created Successfully"}),(0,l.jsxs)("div",{className:"text-xs text-lm-gray",children:[(0,l.jsxs)("span",{className:"text-white font-bold",children:["$",ei.symbol]})," is live. Now finalize below to create the DEX pool."]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray",children:"Token"}),(0,l.jsx)("a",{href:b(ei.token),target:"_blank",rel:"noreferrer",className:"text-lm-orange hover:underline lm-mono",children:p(ei.token)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray",children:"Launch Contract"}),(0,l.jsx)("a",{href:b(ei.launch),target:"_blank",rel:"noreferrer",className:"text-lm-orange hover:underline lm-mono",children:p(ei.launch)})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-lm-black border border-lm-terminal-gray p-3 space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"w-6 h-6 flex items-center justify-center bg-lm-orange text-black font-bold text-xs rounded-full",children:"2"}),(0,l.jsx)("span",{className:"text-white font-bold text-sm lm-upper",children:"Go Live on DEX"})]}),(0,l.jsxs)("div",{className:"text-lm-terminal-lightgray text-xs",children:["Creates a Uniswap V3 trading pool, adds initial liquidity, and sets up fee splitting + staking rewards.",ei&&(0,l.jsx)("span",{className:"text-lm-green",children:" Auto-filled from your newly created token above."})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Launch Contract Address"}),(0,l.jsx)(d.p,{value:A,numeric:!1,placeholder:"0x... (auto-filled after creation)",onValueChange:e=>{H(e),/^0x[0-9a-fA-F]{40}$/.test(String(e))?eb(e).catch(()=>{}):K("")}})]}),G&&(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs bg-lm-terminal-darkgray border border-lm-green/20 p-2",children:[(0,l.jsx)("span",{className:"lm-dot lm-dot-green lm-dot-pulse"}),(0,l.jsx)("span",{className:"text-lm-green font-bold",children:"Token detected"}),(0,l.jsxs)("a",{href:b(G),target:"_blank",rel:"noreferrer",className:"text-lm-orange hover:underline lm-mono",children:[p(G)," →"]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Starting Price (ETH per token)"}),(0,l.jsx)(d.p,{value:B,onValueChange:D,placeholder:"0.000001"}),(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px]",children:"Should match the sale price you set above"})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Trading Fee Tier"}),(0,l.jsx)("div",{className:"flex gap-1",children:v.map(e=>(0,l.jsxs)("button",{type:"button",onClick:()=>Y(e.value),className:"flex-1 text-center py-1.5 border transition-colors ".concat(X===e.value?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"),children:[(0,l.jsx)("div",{className:"text-xs font-bold",children:e.label}),(0,l.jsx)("div",{className:"text-[9px] opacity-60",children:e.hint})]},e.value))})]})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"text-lm-terminal-lightgray text-xs",children:["Extra ETH for Liquidity ",(0,l.jsx)("span",{className:"text-lm-gray",children:"(optional)"})]}),(0,l.jsx)(d.p,{value:V,onValueChange:q,placeholder:"0.0"}),(0,l.jsxs)("div",{className:"text-lm-terminal-lightgray text-[10px]",children:["ETH raised from sales is automatically added to the pool. Add more here to deepen liquidity.",A?(0,l.jsxs)("span",{className:"block mt-1",children:["ETH currently in launch contract: ",(0,l.jsxs)("span",{className:"text-white lm-mono font-bold",children:[y(Q)," ETH"]})]}):null,A&&0n===Q?(0,l.jsx)("span",{className:"block mt-1 text-lm-orange",children:"If this is 0, you must top up some ETH (or sell tokens first) or finalization will revert."}):null]})]}),(0,l.jsx)("button",{type:"button",onClick:()=>W(!O),className:"text-lm-terminal-lightgray text-[10px] hover:text-lm-orange transition-colors",children:O?"▾ Hide developer settings":"▸ Developer settings"}),O&&(0,l.jsxs)("div",{className:"space-y-1.5 text-[10px]",children:[(0,l.jsxs)("div",{className:"text-lm-terminal-lightgray",children:["sqrtPriceX96 (auto-computed: ",(0,l.jsx)("span",{className:"text-lm-gray lm-mono",children:eu||"—"}),")"]}),(0,l.jsx)(d.p,{value:$,onValueChange:_,placeholder:"Leave blank for automatic computation",numeric:!1,className:"text-left text-xs"})]}),(0,l.jsx)(c.$,{onClick:e?ey:s,loading:el,disabled:el||!!e&&(!A||!ep),variant:"primary",size:"lg",className:"w-full",children:el?"Finalizing...":e?"Finalize & Create Trading Pool":"Connect Wallet"})]}),Z&&(0,l.jsxs)("div",{className:"text-xs p-2.5 border bg-lm-black flex items-center justify-between gap-2 ".concat("success"===et?"text-lm-green":"error"===et?"text-lm-red":"text-lm-gray"," ").concat("success"===et?"border-lm-green/20":"error"===et?"border-lm-red/20":"border-lm-terminal-gray"),children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:["info"===et&&(0,l.jsx)("span",{className:"lm-spinner flex-shrink-0",style:{width:12,height:12,borderWidth:1.5}}),"success"===et&&(0,l.jsx)("span",{className:"lm-dot lm-dot-green flex-shrink-0"}),"error"===et&&(0,l.jsx)("span",{className:"lm-dot lm-dot-red flex-shrink-0"}),(0,l.jsx)("span",{className:"truncate",children:Z})]}),es&&(0,l.jsx)("a",{href:"".concat(h.$.blockExplorerUrl||"https://explorer.testnet.chain.robinhood.com","/tx/").concat(es),target:"_blank",rel:"noreferrer",className:"text-lm-orange hover:underline flex-shrink-0",children:"View Tx →"})]})]})}},6147:(e,t,a)=>{Promise.resolve().then(a.bind(a,4547)),Promise.resolve().then(a.bind(a,5375))},9361:(e,t,a)=>{"use strict";a.d(t,{g:()=>s});var l=a(2023),r=a(5028);function s(e,t="wei"){return(0,r.X)(e,l.eL[t])}}},e=>{e.O(0,[462,476,619,668,918,441,255,358],()=>e(e.s=6147)),_N_E=e.O()}]);