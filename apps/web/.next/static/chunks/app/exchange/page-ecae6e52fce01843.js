(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[806],{63:(e,t,a)=>{"use strict";var r=a(7260);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},330:(e,t,a)=>{"use strict";a.d(t,{PoolsPanel:()=>F});var r=a(5155),n=a(2115),s=a(598),l=a(5028),i=a(931),o=a(6630),c=a(8590),d=a(7280),m=a(2933),u=a(3376),x=a(8839),h=a(9719),g=a(8604);let p=[{label:"0.05%",fee:500,tickSpacing:10,hint:"Stables"},{label:"0.30%",fee:3e3,tickSpacing:60,hint:"Standard"},{label:"1.00%",fee:1e4,tickSpacing:200,hint:"Volatile"}],f=[{label:"0.5%",bps:50},{label:"1%",bps:100},{label:"3%",bps:300}],b={address:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",symbol:"ETH",decimals:18,logoURI:""};function y(e){return e.toLowerCase()===b.address.toLowerCase()}let v=2n**160n-1n;function N(e,t){return Math.max(Math.ceil(-887272/t)*t,Math.min(Math.floor(887272/t)*t,e))}function w(e,t,a){return Math.pow(1.0001,e)*Math.pow(10,t-a)}function j(e){return 0!==e&&Number.isFinite(e)?e>=1e6?"".concat((e/1e6).toFixed(2),"M"):e>=1e3?"".concat((e/1e3).toFixed(2),"K"):e>=1?e.toFixed(4):e>=1e-4?e.toFixed(6):e>=1e-7?e.toFixed(10):e.toExponential(2):"—"}function k(e){return e<=0?1n:10n**BigInt(e)}function C(e){if(e<-887272||e>887272)throw Error("tick out of range");let t=e<0?-e:e,a=(1&t)!=0?0xfffcb933bd6fad37aa2d162d1a594001n:0x100000000000000000000000000000000n;(2&t)!=0&&(a=0xfff97272373d413259a46990580e213an*a>>128n),(4&t)!=0&&(a=0xfff2e50f5f656932ef12357cf3c7fdccn*a>>128n),(8&t)!=0&&(a=0xffe5caca7e10e4e61c3624eaa0941cd0n*a>>128n),(16&t)!=0&&(a=0xffcb9843d60f6159c9db58835c926644n*a>>128n),(32&t)!=0&&(a=0xff973b41fa98c081472e6896dfb254c0n*a>>128n),(64&t)!=0&&(a=0xff2ea16466c96a3843ec78b326b52861n*a>>128n),(128&t)!=0&&(a=0xfe5dee046a99a2a811c461f1969c3053n*a>>128n),(256&t)!=0&&(a=0xfcbe86c7900a88aedcffc83b479aa3a4n*a>>128n),(512&t)!=0&&(a=0xf987a7253ac413176f2b074cf7815e54n*a>>128n),(1024&t)!=0&&(a=0xf3392b0822b70005940c7a398e4b70f3n*a>>128n),(2048&t)!=0&&(a=0xe7159475a2c29b7443b29c7fa6e889d9n*a>>128n),(4096&t)!=0&&(a=0xd097f3bdfd2022b8845ad8f792aa5825n*a>>128n),(8192&t)!=0&&(a=0xa9f746462d870fdf8a65dc1f90e061e5n*a>>128n),(16384&t)!=0&&(a=0x70d869a156d2a1b890bb3df62baf32f7n*a>>128n),(32768&t)!=0&&(a=0x31be135f97d08fd981231505542fcfa6n*a>>128n),(65536&t)!=0&&(a=0x9aa508b5b7a84e1c677de54f3e99bc9n*a>>128n),(131072&t)!=0&&(a=0x5d6af8dedb81196699c329225ee604n*a>>128n),(262144&t)!=0&&(a=0x2216e584f5fa1ea926041bedfe98n*a>>128n),(524288&t)!=0&&(a=0x48a170391f7dc42444e8fa2n*a>>128n),e>0&&(a=((1n<<256n)-1n)/a);let r=(a&(1n<<32n)-1n)!==0n;return(a>>32n)+(r?1n:0n)}function E(e,t,a){if(0n===a)throw Error("div by zero");return e*t/a}function S(e,t,a){return e>t&&([e,t]=[t,e]),E(a,E(e,t,2n**96n),t-e)}function M(e,t,a){return e>t&&([e,t]=[t,e]),E(a,2n**96n,t-e)}function R(e,t,a,r){let n=2n**96n;return(t>a&&([t,a]=[a,t]),e<=t)?{amount0:E(r,(a-t)*n,t*a),amount1:0n}:e<a?{amount0:E(r,(a-e)*n,e*a),amount1:E(r,e-t,n)}:{amount0:0n,amount1:E(r,a-t,n)}}function L(e){let{mode:t,lower:a,upper:n,current:s,quoteLabel:l}=e;if(!s||!Number.isFinite(s)||s<=0)return null;let i=106;if("full"===t||!a||!n||!Number.isFinite(a)||!Number.isFinite(n)||a<=0||n<=0||a>=n)return(0,r.jsxs)("div",{className:"bg-lm-black border border-lm-terminal-gray p-2 space-y-1 text-[10px]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-lm-terminal-lightgray lm-upper font-bold tracking-wider",children:"Range"}),(0,r.jsx)("span",{className:"lm-badge lm-badge-gray",children:"Full Range"})]}),(0,r.jsxs)("svg",{viewBox:"0 0 ".concat(520," ").concat(140),className:"w-full h-[140px] border border-lm-terminal-gray bg-lm-terminal-darkgray",children:[(0,r.jsx)("rect",{x:"0",y:"0",width:520,height:140,fill:"transparent"}),(0,r.jsx)("line",{x1:44,y1:i,x2:504,y2:i,stroke:"rgba(255,255,255,0.12)",strokeWidth:"1"}),(0,r.jsx)("line",{x1:44,y1:16,x2:504,y2:16,stroke:"rgba(255,255,255,0.06)",strokeWidth:"1"}),(0,r.jsx)("line",{x1:44,y1:61,x2:504,y2:61,stroke:"rgba(255,255,255,0.06)",strokeWidth:"1"}),(0,r.jsx)("line",{x1:159,y1:16,x2:159,y2:i,stroke:"rgba(255,255,255,0.06)",strokeWidth:"1"}),(0,r.jsx)("line",{x1:274,y1:16,x2:274,y2:i,stroke:"rgba(255,255,255,0.06)",strokeWidth:"1"}),(0,r.jsx)("line",{x1:389,y1:16,x2:389,y2:i,stroke:"rgba(255,255,255,0.06)",strokeWidth:"1"}),(0,r.jsx)("path",{d:"M ".concat(44," ").concat(i," C ").concat(159," ").concat(25,", ").concat(389," ").concat(25,", ").concat(504," ").concat(i),fill:"rgba(207,255,4,0.10)",stroke:"rgba(207,255,4,0.35)",strokeWidth:"2"}),(0,r.jsx)("line",{x1:274,y1:16,x2:274,y2:i+2,stroke:"rgba(255,255,255,0.9)",strokeWidth:"2"}),(0,r.jsx)("text",{x:44,y:128,fill:"rgba(255,255,255,0.6)",fontSize:"11",children:"0"}),(0,r.jsxs)("text",{x:274,y:128,fill:"rgba(255,255,255,0.9)",fontSize:"11",textAnchor:"middle",className:"lm-mono",children:[j(s)," ",l]}),(0,r.jsx)("text",{x:504,y:128,fill:"rgba(255,255,255,0.6)",fontSize:"11",textAnchor:"end",children:"∞"})]})]});let o=s>=a&&s<=n,c=Math.log(a),d=Math.log(n),m=Math.log(s),u=e=>Math.max(0,Math.min(1,(e-c)/(d-c))),x=44+460*u(m),h=u(m),g=[];for(let e=0;e<=60;e++){let t=e/60,a=i-76.5*Math.exp(-Math.pow((t-h)/.18,2));g.push([44+460*t,a])}let p=["M ".concat(44," ").concat(i),"L ".concat(g.map(e=>{let[t,a]=e;return"".concat(t.toFixed(2)," ").concat(a.toFixed(2))}).join(" L ")),"L ".concat(504," ").concat(i),"Z"].join(" ");return(0,r.jsxs)("div",{className:"bg-lm-black border border-lm-terminal-gray p-2 space-y-1 text-[10px]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-lm-terminal-lightgray lm-upper font-bold tracking-wider",children:"Range"}),(0,r.jsx)("span",{className:o?"lm-badge lm-badge-green":"lm-badge lm-badge-orange",children:o?"In Range":"Out of Range"})]}),(0,r.jsxs)("svg",{viewBox:"0 0 ".concat(520," ").concat(140),className:"w-full h-[140px] border border-lm-terminal-gray bg-lm-terminal-darkgray",children:[(0,r.jsx)("rect",{x:"0",y:"0",width:520,height:140,fill:"transparent"}),(0,r.jsx)("line",{x1:44,y1:i,x2:504,y2:i,stroke:"rgba(255,255,255,0.12)",strokeWidth:"1"}),(0,r.jsx)("line",{x1:44,y1:16,x2:504,y2:16,stroke:"rgba(255,255,255,0.06)",strokeWidth:"1"}),(0,r.jsx)("line",{x1:44,y1:61,x2:504,y2:61,stroke:"rgba(255,255,255,0.06)",strokeWidth:"1"}),(0,r.jsx)("line",{x1:159,y1:16,x2:159,y2:i,stroke:"rgba(255,255,255,0.06)",strokeWidth:"1"}),(0,r.jsx)("line",{x1:274,y1:16,x2:274,y2:i,stroke:"rgba(255,255,255,0.06)",strokeWidth:"1"}),(0,r.jsx)("line",{x1:389,y1:16,x2:389,y2:i,stroke:"rgba(255,255,255,0.06)",strokeWidth:"1"}),(0,r.jsx)("rect",{x:44,y:16,width:460,height:90,fill:"rgba(0,0,0,0.15)"}),(0,r.jsx)("rect",{x:44,y:16,width:460,height:90,fill:o?"rgba(0,255,0,0.10)":"rgba(207,255,4,0.08)"}),(0,r.jsx)("path",{d:p,fill:"rgba(255,255,255,0.06)"}),(0,r.jsx)("path",{d:p.replace("Z",""),fill:"none",stroke:"rgba(255,255,255,0.28)",strokeWidth:"2"}),(0,r.jsx)("line",{x1:x,y1:16,x2:x,y2:i+2,stroke:"rgba(255,255,255,0.9)",strokeWidth:"2"}),(0,r.jsx)("text",{x:44,y:128,fill:"rgba(255,255,255,0.65)",fontSize:"11",className:"lm-mono",children:j(a)}),(0,r.jsx)("text",{x:x,y:128,fill:"rgba(255,255,255,0.95)",fontSize:"11",textAnchor:"middle",className:"lm-mono",children:j(s)}),(0,r.jsx)("text",{x:504,y:128,fill:"rgba(255,255,255,0.65)",fontSize:"11",textAnchor:"end",className:"lm-mono",children:j(n)}),(0,r.jsx)("text",{x:504,y:14,fill:"rgba(255,255,255,0.45)",fontSize:"10",textAnchor:"end",children:l})]})]})}function T(e){let t=Number(e);return isNaN(t)||0===t?"0":t>=1e6?"".concat((t/1e6).toFixed(2),"M"):t>=1e3?"".concat((t/1e3).toFixed(2),"K"):t>=1?t.toFixed(4):t>=1e-4?t.toFixed(6):t.toExponential(2)}function F(){let{address:e,walletClient:t,requireCorrectChain:a,connect:E}=(0,h.v)(),[F,P]=(0,n.useState)([]),[I,$]=(0,n.useState)(""),[_,A]=(0,n.useState)(""),[q,H]=(0,n.useState)(3e3),[U,W]=(0,n.useState)(""),[B,z]=(0,n.useState)(!1),[O,V]=(0,n.useState)(""),[X,J]=(0,n.useState)(""),[D,Q]=(0,n.useState)(""),[K,Y]=(0,n.useState)(!0),[Z,G]=(0,n.useState)("amt0"),[ee,et]=(0,n.useState)(""),[ea,er]=(0,n.useState)(100),[en,es]=(0,n.useState)("full"),[el,ei]=(0,n.useState)(""),[eo,ec]=(0,n.useState)(""),[ed,em]=(0,n.useState)(""),[eu,ex]=(0,n.useState)("info"),[eh,eg]=(0,n.useState)(!1),[ep,ef]=(0,n.useState)(""),[eb,ey]=(0,n.useState)(""),ev=(0,n.useMemo)(()=>[b,...F],[F]),eN=(0,n.useMemo)(()=>{if(!I)return{selector:"",addr:"",meta:null,isNativeEth:!1};if(y(I))return m.$.weth?{selector:I,addr:m.$.weth,meta:{...b,address:m.$.weth},isNativeEth:!0}:{selector:I,addr:"",meta:null,isNativeEth:!0};let e=F.find(e=>e.address.toLowerCase()===I.toLowerCase());return e?{selector:I,addr:e.address,meta:e,isNativeEth:!1}:{selector:I,addr:"",meta:null,isNativeEth:!1}},[I,F]),ew=(0,n.useMemo)(()=>{if(!_)return{selector:"",addr:"",meta:null,isNativeEth:!1};if(y(_))return m.$.weth?{selector:_,addr:m.$.weth,meta:{...b,address:m.$.weth},isNativeEth:!0}:{selector:_,addr:"",meta:null,isNativeEth:!0};let e=F.find(e=>e.address.toLowerCase()===_.toLowerCase());return e?{selector:_,addr:e.address,meta:e,isNativeEth:!1}:{selector:_,addr:"",meta:null,isNativeEth:!1}},[_,F]),ej=eN.meta,ek=ew.meta,eC=(0,n.useMemo)(()=>p.find(e=>e.fee===q),[q]),eE=(0,n.useMemo)(()=>eN.addr&&ew.addr&&eN.addr.toLowerCase()!==ew.addr.toLowerCase()?{token0:eN.addr.toLowerCase()<ew.addr.toLowerCase()?eN.addr:ew.addr,token1:eN.addr.toLowerCase()<ew.addr.toLowerCase()?ew.addr:eN.addr}:null,[eN.addr,ew.addr]),eS=(0,n.useMemo)(()=>{if(eE)return(eN.addr.toLowerCase()===eE.token0.toLowerCase()?eN.meta:ew.meta)||F.find(e=>e.address.toLowerCase()===eE.token0.toLowerCase())},[eE,eN.addr,eN.meta,ew.meta,F]),eM=(0,n.useMemo)(()=>{if(eE)return(eN.addr.toLowerCase()===eE.token1.toLowerCase()?eN.meta:ew.meta)||F.find(e=>e.address.toLowerCase()===eE.token1.toLowerCase())},[eE,eN.addr,eN.meta,ew.meta,F]),eR=(0,n.useMemo)(()=>{try{var e,t;if(!eE||!eS||!eM)return"";let a=(U||"").trim();if(!a||"0"===a)return"";let r=(0,l.X)(a,18);if(r<=0n)return"";let n=(e=eS.decimals,(t=eM.decimals)>e?r*k(t-e):e>t?r/k(e-t):r);if(n<=0n)return"";let s=2n**96n,i=s*s*n/10n**18n;if(i<=0n)return"";let o=function(e){if(e<0n)throw Error("sqrt of negative");if(e<2n)return e;let t=e,a=t+1n>>1n;for(;a<t;)t=a,a=a+e/a>>1n;return t}(i);if(o<=0n||o>v)return"";return o.toString()}catch(e){return""}},[U,eS,eM,eE]),eL=(0,n.useMemo)(()=>O.trim()?O.trim():eR,[eR,O]),[eT,eF]=(0,n.useState)(""),[eP,eI]=(0,n.useState)(null),[e$,e_]=(0,n.useState)(null),[eA,eq]=(0,n.useState)(""),eH=(0,n.useCallback)(async()=>{if(!m.$.uniFactory||!eE||!eC||!eS||!eM){eF(""),eI(null),e_(null),eq("");return}try{let e=await x.R.readContract({address:m.$.uniFactory,abi:u.HB,functionName:"getPool",args:[eE.token0,eE.token1,q]});if(!e||"0x0000000000000000000000000000000000000000"===e){eF(""),eI(null),e_(null),eq("");return}eF(e);let t=await x.R.readContract({address:e,abi:u.ld,functionName:"slot0"}),a=t[0],r=t[1];e_(a),eI(r);let n={num:a*a,den:2n**192n},s=BigInt(eS.decimals),l=BigInt(eM.decimals),i=n.num,o=n.den;s>l&&(i*=10n**(s-l)),l>s&&(o*=10n**(l-s)),eq(function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(0n===t)return"0";let r=10n**BigInt(a),n=(e*r/t).toString().padStart(a+1,"0"),s=n.slice(0,-a),l=n.slice(-a);return"".concat(s,".").concat(l).replace(/\.?0+$/,e=>"")}(i,o,8))}catch(e){eF(""),eI(null),e_(null),eq("")}},[q,eC,eS,eM,eE]);(0,n.useEffect)(()=>{eH().catch(()=>{})},[eH]),(0,n.useEffect)(()=>{if(!e){ef(""),ey("");return}(async()=>{if(eN.addr&&ej)try{if(eN.isNativeEth){let t=await x.R.getBalance({address:e});ef((0,s.J)(t,18))}else{let t=await x.R.readContract({address:eN.addr,abi:u.bx,functionName:"balanceOf",args:[e]});ef((0,s.J)(t,ej.decimals))}}catch(e){ef("?")}else ef("");if(ew.addr&&ek)try{if(ew.isNativeEth){let t=await x.R.getBalance({address:e});ey((0,s.J)(t,18))}else{let t=await x.R.readContract({address:ew.addr,abi:u.bx,functionName:"balanceOf",args:[e]});ey((0,s.J)(t,ek.decimals))}}catch(e){ey("?")}else ey("")})()},[e,eN.addr,eN.isNativeEth,ew.addr,ew.isNativeEth,ej,ek]);let eU=(0,n.useMemo)(()=>{var e,t,a;if(!eC)return{ticks:null,error:""};if("full"===en){return{ticks:{tickLower:Math.ceil(-887272/(a=eC.tickSpacing))*a,tickUpper:Math.floor(887272/a)*a},error:""}}if(!eS||!eM)return{ticks:null,error:"Select tokens first."};let r=(el||"").trim(),n=(eo||"").trim();if(!r||!n)return{ticks:null,error:""};let s=Number(r),l=Number(n);if(!Number.isFinite(s)||!Number.isFinite(l))return{ticks:null,error:"Enter valid numbers for min/max price."};if(s<=0||l<=0)return{ticks:null,error:"Min/max price must be greater than 0."};if(s>=l)return{ticks:null,error:"Min price must be lower than max price."};let i=Math.pow(10,eM.decimals-eS.decimals);if(!Number.isFinite(i)||i<=0)return{ticks:null,error:"Price scaling overflow. Try a smaller range."};let o=s*i,c=l*i;if(!Number.isFinite(o)||!Number.isFinite(c)||o<=0||c<=0)return{ticks:null,error:"Price range is too large/small to compute ticks."};let d=Math.log(1.0001),m=Math.log(o)/d,u=Math.log(c)/d;if(!Number.isFinite(m)||!Number.isFinite(u))return{ticks:null,error:"Price range is out of tick bounds."};let x=Math.floor(u),h=N(Math.floor(Math.floor(m)/(e=eC.tickSpacing))*e,e),g=N(Math.ceil(x/(t=eC.tickSpacing))*t,t);return Number.isFinite(h)&&Number.isFinite(g)?h>=g?{ticks:null,error:"Range too narrow for this fee tier. Widen the range."}:{ticks:{tickLower:h,tickUpper:g},error:""}:{ticks:null,error:"Invalid tick calculation."}},[eC,eo,el,en,eS,eM]),eW=eU.ticks,eB=eU.error,ez=(0,n.useMemo)(()=>eW&&eS&&eM?{lower:w(eW.tickLower,eS.decimals,eM.decimals),upper:w(eW.tickUpper,eS.decimals,eM.decimals)}:null,[eW,eS,eM]),eO=(0,n.useMemo)(()=>{try{if(null!==eP&&eS&&eM){let e=w(eP,eS.decimals,eM.decimals);return Number.isFinite(e)&&e>0?e:null}let e=Number((U||"").trim());return Number.isFinite(e)&&e>0?e:null}catch(e){return null}},[eP,U,eS,eM]),eV=(0,n.useMemo)(()=>{if(eT&&e$)return e$;try{let e=BigInt((eL||"").trim()||"0");if(e<=0n||e>v)return null;return e}catch(e){return null}},[e$,eT,eL]),eX=(0,n.useMemo)(()=>{if(!eW||!ej||!ek||!eS||!eM||!eV)return null;try{let e,t,a=C(eW.tickLower),r=C(eW.tickUpper),n=(0,l.X)(X||"0",ej.decimals),s=(0,l.X)(D||"0",ek.decimals);if(0n===n&&0n===s)return{used0:0n,used1:0n,desired0:0n,desired1:0n,leftover0:0n,leftover1:0n,mode:"unknown",note:"Enter amounts to see preview."};if(!eE)return null;let i=eE.token0.toLowerCase()===eN.addr.toLowerCase()?n:s,o=eE.token0.toLowerCase()===eN.addr.toLowerCase()?s:n,c=a<r?a:r,d=a>r?a:r;if(eV<=c)t="below",e=S(a,r,i);else if(eV>=d)t="above",e=M(a,r,o);else{t="in";let n=S(eV,r,i),s=M(a,eV,o);e=n<s?n:s}let{amount0:m,amount1:u}=R(eV,a,r,e),x=i>m?i-m:0n,h=o>u?o-u:0n;return{used0:m,used1:u,desired0:i,desired1:o,leftover0:x,leftover1:h,mode:t,note:""}}catch(e){return{used0:0n,used1:0n,desired0:0n,desired1:0n,leftover0:0n,leftover1:0n,mode:"unknown",note:String((null==e?void 0:e.message)||e)}}},[X,D,eV,eW,eS,eM,eE,ej,ek,eN.addr]);(0,n.useEffect)(()=>{let e,t;if(!K||!eE||!ej||!ek||!eW||!eV)return;let a="amt0"===Z?(X||"").trim():(D||"").trim(),r="amt0"===Z?(D||"").trim():(X||"").trim(),n="amt0"===Z?eN.addr:ew.addr,i="amt0"===Z?ew.addr:eN.addr,o="amt0"===Z?ej:ek,c="amt0"===Z?ek:ej;if(!n||!i)return;if(!a){ee&&et(""),r&&("amt0"===Z?Q(""):J(""));return}try{e=(0,l.X)(a,o.decimals)}catch(e){return}let d=C(eW.tickLower),m=C(eW.tickUpper),u=eE.token0.toLowerCase()===n.toLowerCase(),x=eE.token1.toLowerCase()===n.toLowerCase();if(!u&&!x)return;let h=d<m?d:m,g=d>m?d:m,p=eV<=h?"token0":eV>=g?"token1":"";if("token0"===p&&x){ee||et("Current price is below range: deposit uses token0 only. Enter token0 amount.");return}if("token1"===p&&u){ee||et("Current price is above range: deposit uses token1 only. Enter token1 amount.");return}ee&&et(""),t=u?eV<=h?S(d,m,e):S(eV,m,e):eV>=g?M(d,m,e):M(d,eV,e);let f=R(eV,d,m,t),b=function(e,t){let a=(0,s.J)(e,t);return a.includes(".")?a.replace(/(\.\d*?[1-9])0+$/,"$1").replace(/\.0+$/,""):a}(eE.token0.toLowerCase()===i.toLowerCase()?f.amount0:f.amount1,c.decimals);"amt0"===Z?b!==(D||"")&&Q(b):b!==(X||"")&&J(b)},[K,Z,X,D,eE,ej,ek,eW,eV]),(0,n.useEffect)(()=>{(0,d.V)().then(e=>{P(e),I||$(b.address),!_&&e[0]&&A(e[0].address)}).catch(e=>{em(String((null==e?void 0:e.message)||e)),ex("error")})},[]);let eJ=(0,n.useRef)(F);async function eD(e,a,r,n){var s;if(await x.R.readContract({address:r,abi:u.bx,functionName:"allowance",args:[e,a]})>=n)return;if(em("Approving ".concat((null==(s=F.find(e=>e.address===r))?void 0:s.symbol)||"token","...")),ex("info"),!t)throw Error("No wallet client");let l=await t.writeContract({address:r,abi:u.bx,functionName:"approve",args:[a,n],chain:x.A,account:e});await x.R.waitForTransactionReceipt({hash:l})}async function eQ(){if(!e){em("Connect wallet."),ex("error");return}if(!m.$.positionManager||!eE)return;let r=(null==ej?void 0:ej.symbol)||"Token0",n=(null==ek?void 0:ek.symbol)||"Token1";eg(!0);try{let s;await a();try{s=BigInt((eL||"").trim()||"0")}catch(e){throw Error("Initial price is invalid. Enter a valid number.")}if(s<=0n)throw Error("Set an initial price first (enter a price in the field above).");if(s>v)throw Error("Initial price is out of range. Try a smaller price.");if(!t)throw Error("No wallet client");em("Creating ".concat(r,"/").concat(n," pool (").concat(null==eC?void 0:eC.label," fee)...")),ex("info");let l=await t.writeContract({address:m.$.positionManager,abi:u.g4,functionName:"createAndInitializePoolIfNecessary",args:[eE.token0,eE.token1,q,s],value:0n,chain:x.A,account:e});em("Confirming pool creation on-chain...");let i=await x.R.waitForTransactionReceipt({hash:l});"success"===i.status?(em("Pool created! ".concat(r,"/").concat(n," (").concat(null==eC?void 0:eC.label,") is now live.")),ex("success")):(em("Pool creation reverted. The pool may already exist for this pair + fee tier."),ex("error"))}catch(t){let e=String((null==t?void 0:t.shortMessage)||(null==t?void 0:t.message)||t);e.includes("user rejected")||e.includes("User denied")?em("Transaction cancelled."):em("Create pool failed: ".concat(e)),ex("error")}finally{eg(!1)}}async function eK(){if(!e){em("Connect wallet."),ex("error");return}if(m.$.positionManager&&eN.addr&&ew.addr&&ej&&ek&&eC&&eE){if(!eW){em("Invalid price range."),ex("error");return}eg(!0);try{let r;await a();let n=(0,l.X)(X||"0",ej.decimals),s=(0,l.X)(D||"0",ek.decimals);if(0n===n&&0n===s)throw Error("Enter amount for at least one token");if(!t)throw Error("No wallet client");let{tickLower:o,tickUpper:c}=eW,d=eE.token0.toLowerCase()===eN.addr.toLowerCase()?n:s,h=eE.token0.toLowerCase()===eN.addr.toLowerCase()?s:n;if(!eV){if(!eT)throw Error("No pool found. Set an initial price and create the pool first.");throw Error("Loading pool price. Try again in a moment.")}let g=C(o),p=C(c);if(eV<=(g<p?g:p))r=S(g,p,d);else if(eV>=(g>p?g:p))r=M(g,p,h);else{let e=S(eV,p,d),t=M(g,eV,h);r=e<t?e:t}let f=R(eV,g,p,r),b=BigInt(Math.max(0,Math.min(3e3,ea))),y=f.amount0*(10000n-b)/10000n,N=f.amount1*(10000n-b)/10000n,w=BigInt(Math.floor(Date.now()/1e3)+600),j=(()=>{let e=eN.isNativeEth,t=ew.isNativeEth;return e&&eN.addr.toLowerCase()===eE.token0.toLowerCase()?d:e&&eN.addr.toLowerCase()===eE.token1.toLowerCase()?h:t&&ew.addr.toLowerCase()===eE.token0.toLowerCase()?d:t&&ew.addr.toLowerCase()===eE.token1.toLowerCase()?h:0n})();if(eN.isNativeEth||await eD(e,m.$.positionManager,eN.addr,n),ew.isNativeEth||await eD(e,m.$.positionManager,ew.addr,s),eT){em("Minting LP: ".concat(X||"0"," ").concat(ej.symbol," + ").concat(D||"0"," ").concat(ek.symbol,"...")),ex("info");let a=(0,i.p)({abi:u.g4,functionName:"mint",args:[{token0:eE.token0,token1:eE.token1,fee:q,tickLower:o,tickUpper:c,amount0Desired:d,amount1Desired:h,amount0Min:y,amount1Min:N,recipient:e,deadline:w}]}),r=j>0n?[a,(0,i.p)({abi:u.g4,functionName:"refundETH",args:[]})]:[a],n=await t.writeContract({address:m.$.positionManager,abi:u.g4,functionName:"multicall",args:[r],value:j,chain:x.A,account:e});em("Confirming on-chain...");let s=await x.R.waitForTransactionReceipt({hash:n});"success"===s.status?(em("LP position minted! ".concat(ej.symbol,"/").concat(ek.symbol," liquidity added. Check the Positions tab.")),ex("success")):(em("Mint transaction reverted. Check your balances and price range."),ex("error"))}else{let a;try{a=BigInt((eL||"").trim()||"0")}catch(e){throw Error("Set an initial price to create the pool first.")}if(a<=0n||a>v)throw Error("Initial price is invalid (sqrtPriceX96 out of range).");em("Creating pool + minting LP..."),ex("info");let r=(0,i.p)({abi:u.g4,functionName:"createAndInitializePoolIfNecessary",args:[eE.token0,eE.token1,q,a]}),n=(0,i.p)({abi:u.g4,functionName:"mint",args:[{token0:eE.token0,token1:eE.token1,fee:q,tickLower:o,tickUpper:c,amount0Desired:d,amount1Desired:h,amount0Min:y,amount1Min:N,recipient:e,deadline:w}]}),s=j>0n?[r,n,(0,i.p)({abi:u.g4,functionName:"refundETH",args:[]})]:[r,n],l=await t.writeContract({address:m.$.positionManager,abi:u.g4,functionName:"multicall",args:[s],value:j,chain:x.A,account:e});em("Confirming on-chain...");let g=await x.R.waitForTransactionReceipt({hash:l});"success"===g.status?(em("Pool created and LP position minted! Check the Positions tab."),ex("success"),await eH()):(em("Transaction reverted. Check your balances, range, and initial price."),ex("error"))}}catch(t){let e=String((null==t?void 0:t.shortMessage)||(null==t?void 0:t.message)||t);e.includes("user rejected")||e.includes("User denied")?em("Transaction cancelled."):em("Add liquidity failed: ".concat(e)),ex("error")}finally{eg(!1)}}}eJ.current=F,(0,g.SL)((0,n.useCallback)(e=>{if("add_liquidity"!==e.type&&"create_pool"!==e.type)return;let t=eJ.current,a=e=>{if(!e)return"";let a=e.toUpperCase();if("ETH"===a)return b.address;if("WETH"===a&&m.$.weth)return m.$.weth;let r=t.find(e=>e.symbol.toUpperCase()===a);return(null==r?void 0:r.address)||""},r=a(e.token0),n=a(e.token1);r&&$(r),n&&A(n),e.fee&&H(Number(e.fee)),"create_pool"===e.type&&e.price&&W(e.price),"add_liquidity"===e.type&&("full"===e.range?es("full"):"custom"===e.range&&(es("custom"),e.minPrice&&ei(e.minPrice),e.maxPrice&&ec(e.maxPrice)),e.amount0&&J(e.amount0),e.amount1&&Q(e.amount1))},[]));let eY=eN.addr&&ew.addr&&eN.addr.toLowerCase()===ew.addr.toLowerCase();return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-3 space-y-3",children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Select Token Pair"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Token A"}),(0,r.jsxs)("select",{className:"w-full bg-lm-black border border-lm-terminal-gray hover:border-lm-orange p-2 text-sm h-9 text-white font-bold transition-colors disabled:opacity-40",value:I,onChange:e=>$(e.target.value),disabled:eh,children:[0===F.length&&(0,r.jsx)("option",{value:"",disabled:!0,children:"Loading tokens..."}),ev.map(e=>(0,r.jsx)("option",{value:e.address,children:e.symbol},e.address))]}),ep&&(0,r.jsxs)("div",{className:"text-[10px] text-lm-terminal-lightgray lm-mono",children:["Balance: ",(0,r.jsx)("span",{className:"text-white",children:T(ep)})]}),eN.isNativeEth&&(0,r.jsx)("div",{className:"text-[9px] text-lm-terminal-lightgray",children:"Uses native ETH; wraps to WETH inside the position manager"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Token B"}),(0,r.jsxs)("select",{className:"w-full bg-lm-black border border-lm-terminal-gray hover:border-lm-orange p-2 text-sm h-9 text-white font-bold transition-colors disabled:opacity-40",value:_,onChange:e=>A(e.target.value),disabled:eh,children:[0===F.length&&(0,r.jsx)("option",{value:"",disabled:!0,children:"Loading tokens..."}),ev.map(e=>(0,r.jsx)("option",{value:e.address,children:e.symbol},e.address))]}),eb&&(0,r.jsxs)("div",{className:"text-[10px] text-lm-terminal-lightgray lm-mono",children:["Balance: ",(0,r.jsx)("span",{className:"text-white",children:T(eb)})]}),ew.isNativeEth&&(0,r.jsx)("div",{className:"text-[9px] text-lm-terminal-lightgray",children:"Uses native ETH; wraps to WETH inside the position manager"})]})]}),eY&&(0,r.jsx)("div",{className:"text-lm-red text-xs",children:"Tokens must be different."}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Trading Fee"}),(0,r.jsx)("div",{className:"flex gap-1",children:p.map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>H(e.fee),className:"flex-1 py-2 border transition-colors text-center ".concat(q===e.fee?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"),children:[(0,r.jsx)("div",{className:"text-xs font-bold",children:e.label}),(0,r.jsx)("div",{className:"text-[9px] opacity-60",children:e.hint})]},e.fee))})]}),eE&&(0,r.jsxs)("div",{className:"text-xs bg-lm-black border p-3 space-y-1 ".concat(eT?"border-lm-green/20":"border-lm-red/20"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"lm-dot ".concat(eT?"lm-dot-green lm-dot-pulse":"lm-dot-red")}),(0,r.jsx)("span",{className:eT?"text-lm-green font-bold":"text-lm-red",children:eT?"Pool Active":"No Pool Found"})]}),eT&&(0,r.jsxs)("a",{href:"".concat(m.$.blockExplorerUrl||"https://explorer.testnet.chain.robinhood.com","/address/").concat(eT),target:"_blank",rel:"noreferrer",className:"text-lm-orange hover:underline lm-mono text-[10px]",children:[eT.slice(0,6)+"..."+eT.slice(-4)," →"]})]}),eA&&eS&&eM&&(0,r.jsxs)("div",{className:"text-[10px] lm-mono flex items-center gap-1.5 pt-0.5",children:[(0,r.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Current Price:"}),(0,r.jsx)("span",{className:"text-white font-bold",children:eA}),(0,r.jsxs)("span",{className:"text-lm-terminal-lightgray",children:[eM.symbol,"/",eS.symbol]})]})]})]}),eE&&!eT&&(0,r.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-3 space-y-3",children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Initialize New Pool"}),(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px]",children:"This pair has no pool yet. Set an initial price to create one."}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"text-lm-terminal-lightgray text-xs",children:["Initial Price (",(null==eM?void 0:eM.symbol)||"B"," per ",(null==eS?void 0:eS.symbol)||"A",")"]}),(0,r.jsx)(c.p,{value:U,onValueChange:W,placeholder:"e.g. 0.001"}),(U||"").trim()&&!eL?(0,r.jsx)("div",{className:"text-lm-red text-[10px]",children:"Invalid initial price. Enter a positive number."}):null]}),(0,r.jsx)("button",{type:"button",onClick:()=>z(!B),className:"text-lm-terminal-lightgray text-[10px] hover:text-lm-orange transition-colors",children:B?"▾ Hide developer settings":"▸ Developer settings"}),B&&(0,r.jsxs)("div",{className:"space-y-1 text-[10px]",children:[(0,r.jsxs)("div",{className:"text-lm-terminal-lightgray",children:["sqrtPriceX96 (auto: ",(0,r.jsx)("span",{className:"lm-mono text-lm-gray",children:eR||"—"}),")"]}),(0,r.jsx)(c.p,{value:O,onValueChange:V,placeholder:"Leave blank for auto",className:"text-left text-xs",numeric:!1})]}),(0,r.jsx)(o.$,{onClick:e?eQ:E,loading:eh,disabled:eh||!!e&&!eL,variant:"primary",size:"lg",className:"w-full",children:eh?"Creating Pool...":e?"Create Pool":"Connect Wallet"})]}),(0,r.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-3 space-y-3",children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Add Liquidity"}),eT?null:(0,r.jsx)("div",{className:"text-[10px] text-lm-terminal-lightgray",children:"No pool found for this pair + fee. Set an initial price above and we'll create + initialize + mint in one transaction."}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Price Range"}),(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>es("full"),className:"flex-1 text-xs py-2 border transition-colors ".concat("full"===en?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"),children:[(0,r.jsx)("div",{className:"font-bold",children:"Full Range"}),(0,r.jsx)("div",{className:"text-[9px] opacity-60",children:"Earn fees at any price"})]}),(0,r.jsxs)("button",{type:"button",onClick:()=>es("custom"),className:"flex-1 text-xs py-2 border transition-colors ".concat("custom"===en?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"),children:[(0,r.jsx)("div",{className:"font-bold",children:"Custom Range"}),(0,r.jsx)("div",{className:"text-[9px] opacity-60",children:"Concentrated liquidity"})]})]})]}),"custom"===en&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"text-lm-terminal-lightgray text-xs",children:["Min Price (",(null==eM?void 0:eM.symbol)||"B","/",(null==eS?void 0:eS.symbol)||"A",")"]}),(0,r.jsx)(c.p,{value:el,onValueChange:ei,placeholder:"0.0005"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"text-lm-terminal-lightgray text-xs",children:["Max Price (",(null==eM?void 0:eM.symbol)||"B","/",(null==eS?void 0:eS.symbol)||"A",")"]}),(0,r.jsx)(c.p,{value:eo,onValueChange:ec,placeholder:"0.0020"})]})]}),eB?(0,r.jsx)("div",{className:"text-lm-red text-[10px]",children:eB}):null]}),ez&&eS&&eM&&(0,r.jsxs)("div",{className:"bg-lm-black border border-lm-terminal-gray p-2 flex items-center justify-between text-[10px]",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Low: "}),(0,r.jsx)("span",{className:"text-white lm-mono font-bold",children:"full"===en?"0":j(ez.lower)})]}),(0,r.jsx)("span",{className:"text-lm-terminal-gray",children:"←→"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-lm-terminal-lightgray",children:"High: "}),(0,r.jsx)("span",{className:"text-white lm-mono font-bold",children:"full"===en?"∞":j(ez.upper)})]}),(0,r.jsxs)("span",{className:"text-lm-terminal-lightgray",children:[eM.symbol,"/",eS.symbol]})]}),eS&&eM?(0,r.jsx)(L,{mode:en,lower:"custom"===en&&ez?ez.lower:null,upper:"custom"===en&&ez?ez.upper:null,current:eO,quoteLabel:"".concat(eM.symbol,"/").concat(eS.symbol)}):null,(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:(null==ej?void 0:ej.symbol)||"Token A"}),ep&&Number(ep)>0&&(0,r.jsx)("button",{type:"button",onClick:()=>{G("amt0"),J(ep)},className:"text-[10px] text-lm-orange hover:underline",children:"MAX"})]}),(0,r.jsx)(c.p,{value:X,onValueChange:e=>{G("amt0"),J(e)},placeholder:"0.0"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:(null==ek?void 0:ek.symbol)||"Token B"}),eb&&Number(eb)>0&&(0,r.jsx)("button",{type:"button",onClick:()=>{G("amt1"),Q(eb)},className:"text-[10px] text-lm-orange hover:underline",children:"MAX"})]}),(0,r.jsx)(c.p,{value:D,onValueChange:e=>{G("amt1"),Q(e)},placeholder:"0.0"})]})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-[10px] text-lm-terminal-lightgray select-none",children:[(0,r.jsx)("input",{type:"checkbox",checked:K,onChange:e=>Y(e.target.checked),className:"accent-lm-orange"}),"Auto-adjust the other token to match the selected range"]}),K&&ee?(0,r.jsx)("div",{className:"text-[10px] text-lm-orange",children:ee}):null,(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Slippage Tolerance"}),(0,r.jsx)("div",{className:"flex gap-1",children:f.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>er(e.bps),className:"flex-1 text-xs py-1.5 border transition-colors ".concat(ea===e.bps?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"),children:e.label},e.bps))})]}),eX&&(0,r.jsxs)("div",{className:"bg-lm-black border border-lm-terminal-gray p-2.5 space-y-1.5 text-[10px]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray lm-upper font-bold tracking-wider",children:"Deposit Preview"}),"in"===eX.mode?(0,r.jsx)("span",{className:"lm-badge lm-badge-green",children:"In Range"}):"below"===eX.mode||"above"===eX.mode?(0,r.jsx)("span",{className:"lm-badge lm-badge-orange",children:"Single-Sided"}):null]}),eX.note?(0,r.jsx)("div",{className:"text-lm-terminal-lightgray",children:eX.note}):(0,r.jsxs)("div",{className:"space-y-1",children:["below"===eX.mode&&eS&&eM?(0,r.jsxs)("div",{className:"text-lm-terminal-lightgray",children:["Current price is below your range. This deposit uses ",eS.symbol," only."]}):null,"above"===eX.mode&&eS&&eM?(0,r.jsxs)("div",{className:"text-lm-terminal-lightgray",children:["Current price is above your range. This deposit uses ",eM.symbol," only."]}):null,(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-lm-terminal-lightgray",children:null==eS?void 0:eS.symbol}),(0,r.jsxs)("span",{className:"text-white lm-mono font-bold",children:["Used ",eS?T((0,s.J)(eX.used0,eS.decimals)):"0",eS?" \xb7 Leftover ".concat(T((0,s.J)(eX.leftover0,eS.decimals))):""]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-lm-terminal-lightgray",children:null==eM?void 0:eM.symbol}),(0,r.jsxs)("span",{className:"text-white lm-mono font-bold",children:["Used ",eM?T((0,s.J)(eX.used1,eM.decimals)):"0",eM?" \xb7 Leftover ".concat(T((0,s.J)(eX.leftover1,eM.decimals))):""]})]})]})]}),(0,r.jsx)(o.$,{onClick:e?eK:E,loading:eh,disabled:eh||!!e&&(!eW||!eT&&!eV),variant:"primary",size:"lg",className:"w-full",children:eh?"Processing...":e?eT?"Add Liquidity":"Create + Add Liquidity":"Connect Wallet"})]}),ed&&(0,r.jsxs)("div",{className:"text-xs p-2.5 border bg-lm-black flex items-center gap-2 ".concat("success"===eu?"text-lm-green":"error"===eu?"text-lm-red":"text-lm-gray"," ").concat("success"===eu?"border-lm-green/20":"error"===eu?"border-lm-red/20":"border-lm-terminal-gray"),children:["info"===eu&&(0,r.jsx)("span",{className:"lm-spinner flex-shrink-0",style:{width:12,height:12,borderWidth:1.5}}),"success"===eu&&(0,r.jsx)("span",{className:"lm-dot lm-dot-green flex-shrink-0"}),"error"===eu&&(0,r.jsx)("span",{className:"lm-dot lm-dot-red flex-shrink-0"}),(0,r.jsx)("span",{children:ed})]})]})}},739:(e,t,a)=>{Promise.resolve().then(a.bind(a,330)),Promise.resolve().then(a.bind(a,5110)),Promise.resolve().then(a.bind(a,4383))},4383:(e,t,a)=>{"use strict";a.d(t,{ExchangeBootstrap:()=>y});var r=a(5155),n=a(2115),s=a(598),l=a(6594),i=a(8070),o=a(6630),c=a(9719),d=a(8839),m=a(2933),u=a(3376),x=a(8604);let h=2n**128n-1n;function g(e,t,a){return Math.pow(1.0001,e)*Math.pow(10,t-a)}function p(e){return 0!==e&&Number.isFinite(e)?e>=1e9?"".concat((e/1e9).toFixed(2),"B"):e>=1e6?"".concat((e/1e6).toFixed(2),"M"):e>=1e3?"".concat((e/1e3).toFixed(2),"K"):e>=1?e.toFixed(4):e>=1e-4?e.toFixed(6):e>=1e-7?e.toFixed(10):e.toExponential(2):"—"}function f(e){let t=Number(e);return isNaN(t)||0===t?"0":t>=1e6?"".concat((t/1e6).toFixed(2),"M"):t>=1e3?"".concat((t/1e3).toFixed(2),"K"):t>=1?t.toFixed(4):t>=1e-4?t.toFixed(6):t.toExponential(2)}function b(){let{address:e,walletClient:t}=(0,c.v)(),[a,l]=(0,n.useState)([]),[i,x]=(0,n.useState)(""),[b,y]=(0,n.useState)(!1),[v,N]=(0,n.useState)({}),[w,j]=(0,n.useState)({}),[k,C]=(0,n.useState)(null),E=m.$.positionManager;async function S(){if(!e||!E)return void l([]);y(!0),x("Loading positions...");try{let a=await d.R.readContract({address:E,abi:u.g4,functionName:"balanceOf",args:[e]}),r=a>50n?50:Number(a),n=[],s={};async function t(e){let t=e.toLowerCase();if(s[t])return s[t];let a=e.slice(0,6),r=18;try{a=await d.R.readContract({address:e,abi:u.Qi,functionName:"symbol"})}catch(e){}try{r=Number(await d.R.readContract({address:e,abi:u.Qi,functionName:"decimals"}))}catch(e){}return s[t]={sym:a,dec:r},s[t]}let i={};for(let a=0;a<r;a++){let r=await d.R.readContract({address:E,abi:u.g4,functionName:"tokenOfOwnerByIndex",args:[e,BigInt(a)]}),s=await d.R.readContract({address:E,abi:u.g4,functionName:"positions",args:[r]}),l=s.token0,o=s.token1,c=await t(l),x=await t(o),h=Number(s.fee),p=g(Number(s.tickLower),c.dec,x.dec),f=g(Number(s.tickUpper),c.dec,x.dec),b=0,y="".concat(l.toLowerCase(),"-").concat(o.toLowerCase(),"-").concat(h);if(void 0!==i[y])b=i[y];else if(m.$.uniFactory){try{let e=await d.R.readContract({address:m.$.uniFactory,abi:u.HB,functionName:"getPool",args:[l,o,h]});if(e&&"0x0000000000000000000000000000000000000000"!==e){let t=await d.R.readContract({address:e,abi:u.ld,functionName:"slot0"});b=g(t[1],c.dec,x.dec)}}catch(e){}i[y]=b}let v=b>=p&&b<=f;n.push({tokenId:r,token0:l,token1:o,fee:h,tickLower:Number(s.tickLower),tickUpper:Number(s.tickUpper),liquidity:s.liquidity,sym0:c.sym,sym1:x.sym,dec0:c.dec,dec1:x.dec,tokensOwed0:s.tokensOwed0,tokensOwed1:s.tokensOwed1,priceLower:p,priceUpper:f,currentPrice:b,inRange:v})}l(n),x("")}catch(e){x(String((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||e))}finally{y(!1)}}async function M(a){if(!e||!t||!E)return;y(!0);let r=a.tokenId.toString();N(e=>({...e,[r]:"Collecting fees..."})),j(e=>({...e,[r]:"info"}));try{let n=await t.writeContract({address:E,abi:u.g4,functionName:"collect",args:[{tokenId:a.tokenId,recipient:e,amount0Max:h,amount1Max:h}],chain:t.chain,account:e});N(e=>({...e,[r]:"Confirming..."}));let s=await d.R.waitForTransactionReceipt({hash:n});"success"===s.status?(N(e=>({...e,[r]:"Fees collected!"})),j(e=>({...e,[r]:"success"}))):(N(e=>({...e,[r]:"Tx failed"})),j(e=>({...e,[r]:"error"}))),await S()}catch(e){N(t=>({...t,[r]:String((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||e)})),j(e=>({...e,[r]:"error"}))}finally{y(!1)}}async function R(a){if(!e||!t||!E||a.liquidity<=0n)return;y(!0);let r=a.tokenId.toString();N(e=>({...e,[r]:"Removing liquidity..."})),j(e=>({...e,[r]:"info"}));try{let n=BigInt(Math.floor(Date.now()/1e3)+600),s=await t.writeContract({address:E,abi:u.g4,functionName:"decreaseLiquidity",args:[{tokenId:a.tokenId,liquidity:a.liquidity,amount0Min:0n,amount1Min:0n,deadline:n}],chain:t.chain,account:e});N(e=>({...e,[r]:"Removing... collecting tokens"})),await d.R.waitForTransactionReceipt({hash:s});let l=await t.writeContract({address:E,abi:u.g4,functionName:"collect",args:[{tokenId:a.tokenId,recipient:e,amount0Max:h,amount1Max:h}],chain:t.chain,account:e});await d.R.waitForTransactionReceipt({hash:l}),N(e=>({...e,[r]:"Liquidity removed!"})),j(e=>({...e,[r]:"success"})),await S()}catch(e){N(t=>({...t,[r]:String((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||e)})),j(e=>({...e,[r]:"error"}))}finally{y(!1)}}if((0,n.useEffect)(()=>{S().catch(()=>{})},[e]),!e)return(0,r.jsxs)("div",{className:"text-lm-gray text-sm p-6 text-center",children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-lg mb-1",children:"No Wallet Connected"}),(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Connect your wallet to view and manage LP positions."})]});let L=a.filter(e=>e.liquidity>0n),T=a.filter(e=>e.liquidity<=0n);return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center gap-3",children:a.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:[L.length," Active"]}),T.length>0&&(0,r.jsxs)("span",{className:"text-lm-terminal-lightgray text-[10px] lm-upper tracking-wider opacity-50",children:[T.length," Closed"]})]})}),(0,r.jsx)(o.$,{onClick:S,disabled:b,className:"text-lm-orange text-xs border border-lm-terminal-gray hover:border-lm-orange px-3 py-1 transition-colors",children:b?"Loading...":"Refresh"})]}),0===a.length?(0,r.jsxs)("div",{className:"text-center py-8 space-y-2",children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-lg",children:b?"Loading...":"No Positions"}),(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-xs opacity-60",children:i||"Create an LP position in the Pools tab to start earning fees."})]}):(0,r.jsx)("div",{className:"space-y-2",children:a.map(e=>{let t=e.tokenId.toString(),a=e.liquidity>0n,n=e.tokensOwed0>0n||e.tokensOwed1>0n,l=v[t],i=w[t]||"info",c=k===t,d="".concat((e.fee/1e4).toFixed(e.fee<1e3?2:+(e.fee<1e4)),"%");return(0,r.jsxs)("div",{className:"bg-lm-terminal-darkgray border transition-all lm-card-hover ".concat(a&&e.inRange?"border-lm-green/30 lm-in-range":a?"border-lm-orange/30 lm-out-of-range":"border-lm-terminal-gray"),children:[(0,r.jsxs)("button",{type:"button",onClick:()=>C(c?null:t),className:"w-full p-3 flex items-center justify-between text-left hover:bg-lm-black/20",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,r.jsx)("span",{className:"lm-dot ".concat(a?e.inRange?"lm-dot-green lm-dot-pulse":"lm-dot-red":"lm-dot-gray")}),(0,r.jsxs)("span",{className:"text-white font-bold text-sm",children:[e.sym0,"/",e.sym1]}),(0,r.jsx)("span",{className:"text-lm-terminal-lightgray text-[10px] bg-lm-black px-1.5 py-0.5 border border-lm-terminal-gray lm-mono",children:d}),(0,r.jsxs)("span",{className:"text-lm-terminal-lightgray text-[10px] lm-mono opacity-50",children:["#",e.tokenId.toString()]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[a?(0,r.jsx)("span",{className:"lm-badge font-bold ".concat(e.inRange?"lm-badge-filled-green":"lm-badge-filled-red"),children:e.inRange?"IN RANGE":"OUT OF RANGE"}):(0,r.jsx)("span",{className:"lm-badge lm-badge-gray",children:"CLOSED"}),n&&(0,r.jsx)("span",{className:"lm-badge lm-badge-filled-green",children:"FEES"}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-3 h-3 text-lm-terminal-lightgray transition-transform ".concat(c?"rotate-180":""),children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.22 6.22a.75.75 0 011.06 0L8 8.94l2.72-2.72a.75.75 0 111.06 1.06l-3.25 3.25a.75.75 0 01-1.06 0L4.22 7.28a.75.75 0 010-1.06z",clipRule:"evenodd"})})]})]}),(0,r.jsxs)("div",{className:"px-3 pb-2 flex items-center gap-4 text-[10px] flex-wrap",children:[e.currentPrice>0&&(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Price:"}),(0,r.jsx)("span",{className:"text-white lm-mono font-bold",children:p(e.currentPrice)})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Range:"}),(0,r.jsx)("span",{className:"text-white lm-mono",children:p(e.priceLower)}),(0,r.jsx)("span",{className:"text-lm-terminal-gray",children:"—"}),(0,r.jsx)("span",{className:"text-white lm-mono",children:p(e.priceUpper)})]})]}),a&&e.currentPrice>0&&(0,r.jsx)("div",{className:"px-3 pb-2",children:(0,r.jsxs)("div",{className:"relative h-1.5 bg-lm-black rounded-full overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-lm-orange/20 rounded-full",style:{left:"10%",right:"10%"}}),(()=>{let t=Math.min(e.priceLower,.5*e.currentPrice),a=Math.max(e.priceUpper,2*e.currentPrice)-t;if(a<=0)return null;let n=(e.priceLower-t)/a*100,s=(e.priceUpper-t)/a*100,l=(e.currentPrice-t)/a*100;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"absolute top-0 h-full ".concat(e.inRange?"bg-lm-green/40":"bg-lm-orange/40"),style:{left:"".concat(n,"%"),width:"".concat(s-n,"%")}}),(0,r.jsx)("div",{className:"absolute top-0 w-1 h-full bg-white rounded-full",style:{left:"".concat(l,"%"),transform:"translateX(-50%)"}})]})})()]})}),c&&(0,r.jsxs)("div",{className:"px-3 pb-3 space-y-2 border-t border-lm-terminal-gray",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 pt-2 text-[10px]",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-lm-terminal-lightgray lm-upper tracking-wider",children:["Price Range (",e.sym1,"/",e.sym0,")"]}),(0,r.jsxs)("div",{className:"text-white lm-mono text-xs mt-0.5",children:[p(e.priceLower)," — ",p(e.priceUpper)]})]}),e.currentPrice>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray lm-upper tracking-wider",children:"Current Price"}),(0,r.jsxs)("div",{className:"text-white lm-mono text-xs mt-0.5",children:[p(e.currentPrice)," ",e.sym1,"/",e.sym0]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray lm-upper tracking-wider",children:"Fee Tier"}),(0,r.jsx)("div",{className:"text-white text-xs mt-0.5",children:d})]})]}),n&&(0,r.jsxs)("div",{className:"bg-lm-black border border-lm-green/20 p-2 text-xs space-y-0.5",children:[(0,r.jsx)("div",{className:"text-lm-green text-[10px] font-bold lm-upper tracking-wider",children:"Uncollected Fees"}),(0,r.jsxs)("div",{className:"flex gap-4 text-white lm-mono",children:[e.tokensOwed0>0n&&(0,r.jsxs)("span",{children:[f((0,s.J)(e.tokensOwed0,e.dec0))," ",e.sym0]}),e.tokensOwed1>0n&&(0,r.jsxs)("span",{children:[f((0,s.J)(e.tokensOwed1,e.dec1))," ",e.sym1]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap pt-1",children:[(0,r.jsx)(o.$,{size:"sm",className:"bg-lm-green/10 text-lm-green border-lm-green/30 hover:bg-lm-green/20 hover:border-lm-green",onClick:()=>M(e),disabled:b,children:"Collect Fees"}),a&&(0,r.jsx)(o.$,{size:"sm",variant:"danger",onClick:()=>R(e),disabled:b,children:"Remove All Liquidity"}),l&&(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:["info"===i&&(0,r.jsx)("span",{className:"lm-spinner",style:{width:10,height:10,borderWidth:1}}),"success"===i&&(0,r.jsx)("span",{className:"lm-dot lm-dot-green"}),"error"===i&&(0,r.jsx)("span",{className:"lm-dot lm-dot-red"}),(0,r.jsx)("span",{className:"text-[10px] ".concat("success"===i?"text-lm-green":"error"===i?"text-lm-red":"text-lm-gray"),children:l})]})]})]})]},t)})}),i&&a.length>0&&(0,r.jsxs)("div",{className:"text-xs p-2.5 border border-lm-red/20 bg-lm-black flex items-center gap-2 text-lm-red",children:[(0,r.jsx)("span",{className:"lm-dot lm-dot-red flex-shrink-0"}),(0,r.jsx)("span",{children:i})]})]})}function y(e){let{SwapPanel:t,PoolsPanel:a}=e,s=(0,n.useMemo)(()=>[{id:"swap",label:"Swap",hint:"Quote + swap any token pair"},{id:"pools",label:"Pools",hint:"Create pools + add liquidity"},{id:"positions",label:"Positions",hint:"Manage your LP positions"}],[]),[o,c]=(0,n.useState)("swap"),d=(0,n.useCallback)(e=>{["swap","flip_tokens","max_balance","set_fee","set_slippage"].includes(e.type)?c("swap"):["add_liquidity","create_pool"].includes(e.type)?c("pools"):["collect_fees","remove_liquidity","refresh_positions"].includes(e.type)?c("positions"):"switch_tab"===e.type&&["swap","pools","positions"].includes(e.tab)&&c(e.tab)},[]);return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(x.jc,{context:"exchange",onIntent:d,placeholder:"swap 10 ETH for TSLA \xb7 add liquidity \xb7 create pool \xb7 collect fees \xb7 help"}),(0,r.jsxs)(l.Z,{title:"Exchange",hint:"Swap any token pair. Native ETH supported. Create and manage LP positions.",right:(0,r.jsx)(i.Z,{tabs:s,active:o,onChange:c}),children:["swap"===o?(0,r.jsx)(t,{}):null,"pools"===o?(0,r.jsx)(a,{}):null,"positions"===o?(0,r.jsx)(b,{}):null]})]})}},5110:(e,t,a)=>{"use strict";a.d(t,{SwapPanel:()=>C});var r=a(5155),n=a(2115),s=a(63),l=a(598),i=a(5028),o=a(931),c=a(6630),d=a(8590),m=a(7280),u=a(8839),x=a(2933),h=a(3376),g=a(9719),p=a(8604);let f=[{label:"0.05%",fee:500,hint:"Stables"},{label:"0.30%",fee:3e3,hint:"Standard"},{label:"1.00%",fee:1e4,hint:"Volatile"}],b=[{label:"0.5%",bps:50},{label:"1%",bps:100},{label:"3%",bps:300}],y=[{type:"function",name:"deposit",stateMutability:"payable",inputs:[],outputs:[]},{type:"function",name:"withdraw",stateMutability:"nonpayable",inputs:[{name:"wad",type:"uint256"}],outputs:[]}],v={address:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",symbol:"ETH",decimals:18,logoURI:""};function N(e){return e.toLowerCase()===v.address.toLowerCase()}function w(e){return!!x.$.weth&&e.toLowerCase()===x.$.weth.toLowerCase()}function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=Number(e);return isNaN(a)||0===a?"0":a>=1e6?"".concat((a/1e6).toFixed(2),"M"):a>=1e3?"".concat((a/1e3).toFixed(2),"K"):a>=1?a.toFixed(Math.min(4,t)):a>=1e-4?a.toFixed(t):a.toExponential(2)}function k(e){var t;let{tokens:a,value:s,onChange:l,customAddr:i,onCustomAddr:o,customMeta:c,label:m,balance:u,symbol:x,onMax:h,amount:g,onAmountChange:p,amountReadonly:f,quoteDisplay:b,isNativeEth:y}=e,N="__custom__"===s,[w,k]=(0,n.useState)(!1),C=(0,n.useRef)(null);(0,n.useEffect)(()=>{function e(e){C.current&&!C.current.contains(e.target)&&k(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let E=[{addr:v.address,symbol:"ETH",hint:"Native",isEth:!0},...a.map(e=>({addr:e.address,symbol:e.symbol,hint:e.address.slice(0,6)+"...",isEth:!1})),{addr:"__custom__",symbol:"Custom",hint:"Paste address",isEth:!1}],S=N?(null==c?void 0:c.symbol)||"Custom":x||(null==(t=E.find(e=>e.addr===s))?void 0:t.symbol)||"Select";return(0,r.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-3 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:m}),void 0!==u&&(0,r.jsxs)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-mono flex items-center gap-1",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-2.5 h-2.5 opacity-60",children:(0,r.jsx)("path",{d:"M8 1a7 7 0 100 14A7 7 0 008 1zm-.5 3h1v1h-1V4zm-1 2h3v1h-1v3h1v1h-3V10h1V7h-1V6z"})}),(0,r.jsx)("span",{className:"text-white",children:j(u)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"relative flex-shrink-0",ref:C,children:[(0,r.jsxs)("button",{type:"button",onClick:()=>k(!w),className:"flex items-center gap-1.5 h-10 px-3 bg-lm-black border border-lm-terminal-gray hover:border-lm-orange transition-colors min-w-[100px]",children:[(0,r.jsx)("span",{className:"text-white font-bold text-sm",children:S}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-3 h-3 text-lm-terminal-lightgray",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.22 6.22a.75.75 0 011.06 0L8 8.94l2.72-2.72a.75.75 0 111.06 1.06l-3.25 3.25a.75.75 0 01-1.06 0L4.22 7.28a.75.75 0 010-1.06z",clipRule:"evenodd"})})]}),w&&(0,r.jsx)("div",{className:"absolute top-full left-0 mt-1 z-50 bg-lm-black border border-lm-orange w-56 max-h-60 overflow-y-auto shadow-lg",children:E.map(e=>{let t=s===e.addr;return(0,r.jsxs)("button",{type:"button",onClick:()=>{l(e.addr),k(!1)},className:"w-full text-left px-3 py-2 flex items-center justify-between transition-colors ".concat(t?"bg-lm-orange/10 text-lm-orange":"text-white hover:bg-lm-terminal-darkgray"),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-bold text-sm",children:e.symbol}),e.isEth&&(0,r.jsx)("span",{className:"text-lm-terminal-lightgray text-[10px] ml-1.5",children:"Native"})]}),(0,r.jsx)("span",{className:"text-lm-terminal-lightgray text-[10px] lm-mono",children:e.hint})]},e.addr)})})]}),(0,r.jsx)("div",{className:"flex-1 relative",children:f&&void 0!==b?(0,r.jsx)("div",{className:"h-10 bg-lm-black border border-lm-terminal-gray px-3 flex items-center justify-end",children:(0,r.jsx)("span",{className:"lm-mono text-sm ".concat(b&&"No liquidity"!==b?"text-white font-bold":"text-lm-terminal-lightgray"),children:b||"—"})}):(0,r.jsx)(d.p,{value:g||"",onValueChange:p,placeholder:"0.0",className:"h-10 text-sm font-bold"})}),h&&u&&Number(u)>0&&(0,r.jsx)("button",{type:"button",onClick:h,className:"h-10 px-2 text-[10px] font-bold text-lm-orange border border-lm-orange/30 hover:border-lm-orange hover:bg-lm-orange/5 transition-colors lm-upper",children:"Max"})]}),N&&(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("input",{className:"lm-input text-left text-xs h-8",placeholder:"Paste token address (0x...)",value:i,onChange:e=>o(e.target.value)}),c?(0,r.jsxs)("div",{className:"text-lm-green text-[10px] flex items-center gap-1",children:[(0,r.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-lm-green"}),"Detected: ",(0,r.jsx)("span",{className:"text-white font-bold",children:c.symbol})," (",c.decimals," decimals)"]}):42===i.length?(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] animate-pulse",children:"Detecting token..."}):null]}),y&&(0,r.jsxs)("div",{className:"text-[9px] text-lm-terminal-lightgray flex items-center gap-1",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-2.5 h-2.5",children:(0,r.jsx)("path",{d:"M8 1a7 7 0 100 14A7 7 0 008 1zm-.5 3h1v1h-1V4zm-1 2h3v1h-1v3h1v1h-3V10h1V7h-1V6z"})}),"Auto-wraps to WETH for the swap"]})]})}function C(){var e,t,a;let{address:d,walletClient:C,requireCorrectChain:E}=(0,g.v)(),S=(0,s.useSearchParams)(),[M,R]=(0,n.useState)([]),[L,T]=(0,n.useState)(""),[F,P]=(0,n.useState)(""),[I,$]=(0,n.useState)(""),[_,A]=(0,n.useState)(""),[q,H]=(0,n.useState)(null),[U,W]=(0,n.useState)(null),[B,z]=(0,n.useState)(3e3),[O,V]=(0,n.useState)(""),[X,J]=(0,n.useState)(0n),[D,Q]=(0,n.useState)(""),[K,Y]=(0,n.useState)(!1),[Z,G]=(0,n.useState)(100),[ee,et]=(0,n.useState)(!1),[ea,er]=(0,n.useState)(""),[en,es]=(0,n.useState)("info"),[el,ei]=(0,n.useState)(!1),[eo,ec]=(0,n.useState)(""),[ed,em]=(0,n.useState)(""),[eu,ex]=(0,n.useState)(""),eh=(0,n.useRef)(null),eg=(0,n.useRef)(""),ep=(0,n.useRef)(""),ef=(0,n.useMemo)(()=>{if(N(L))return{addr:x.$.weth,meta:{...v,address:x.$.weth},isNativeEth:!0};if("__custom__"===L&&q&&/^0x[0-9a-fA-F]{40}$/.test(I))return{addr:I,meta:q,isNativeEth:!1};let e=M.find(e=>e.address===L);return e?{addr:e.address,meta:e,isNativeEth:!1}:{addr:"",meta:null,isNativeEth:!1}},[L,I,q,M]),eb=(0,n.useMemo)(()=>{if(N(F))return{addr:x.$.weth,meta:{...v,address:x.$.weth},isNativeEth:!0};if("__custom__"===F&&U&&/^0x[0-9a-fA-F]{40}$/.test(_))return{addr:_,meta:U,isNativeEth:!1};let e=M.find(e=>e.address===F);return e?{addr:e.address,meta:e,isNativeEth:!1}:{addr:"",meta:null,isNativeEth:!1}},[F,_,U,M]),ey=(0,n.useMemo)(()=>{if(!x.$.weth)return null;let e=ef.isNativeEth,t=eb.isNativeEth,a=!!ef.addr&&w(ef.addr),r=!!eb.addr&&w(eb.addr);return e&&r?{direction:"wrap"}:a&&t?{direction:"unwrap"}:null},[ef.addr,ef.isNativeEth,eb.addr,eb.isNativeEth]);(0,n.useEffect)(()=>{if("__custom__"!==L||!/^0x[0-9a-fA-F]{40}$/.test(I))return void H(null);(async()=>{try{let[e,t]=await Promise.all([u.R.readContract({address:I,abi:h.Qi,functionName:"symbol"}),u.R.readContract({address:I,abi:h.Qi,functionName:"decimals"})]);H({address:I,symbol:e,decimals:Number(t),logoURI:""})}catch(e){H(null)}})()},[L,I]),(0,n.useEffect)(()=>{if("__custom__"!==F||!/^0x[0-9a-fA-F]{40}$/.test(_))return void W(null);(async()=>{try{let[e,t]=await Promise.all([u.R.readContract({address:_,abi:h.Qi,functionName:"symbol"}),u.R.readContract({address:_,abi:h.Qi,functionName:"decimals"})]);W({address:_,symbol:e,decimals:Number(t),logoURI:""})}catch(e){W(null)}})()},[F,_]),(0,n.useEffect)(()=>{(0,m.V)().then(e=>{R(e),L||T(v.address),!F&&e[0]&&P(e[0].address)}).catch(e=>{er(String((null==e?void 0:e.message)||e)),es("error")})},[]),(0,n.useEffect)(()=>{let e=(S.get("in")||S.get("tokenIn")||"").trim(),t=(S.get("out")||S.get("tokenOut")||S.get("token")||"").trim(),a=(S.get("fee")||S.get("feeTier")||"").trim();if(!e&&!t)return;let r="".concat(e,"|").concat(t,"|").concat(a);if(eg.current===r)return;let n=(e,t)=>{if(!t)return;if((e=>{let t=e.toUpperCase();return"ETH"===t||"WETH"===t||t===v.address.toUpperCase()})(t))return void("in"===e?T(v.address):P(v.address));let a="";if(/^0x[0-9a-fA-F]{40}$/.test(t))a=t;else{let e=M.find(e=>e.symbol.toUpperCase()===t.toUpperCase());e&&(a=e.address)}if(!a)return;let r=M.find(e=>e.address.toLowerCase()===a.toLowerCase());r?"in"===e?T(r.address):P(r.address):"in"===e?(T("__custom__"),$(a)):(P("__custom__"),A(a))};if(!e&&t&&n("in","ETH"),e&&n("in",e),t&&n("out",t),a){let e=Number(a);[500,3e3,1e4].includes(e)&&z(e)}eg.current=r},[S,M]);let ev=(0,n.useRef)(M);ev.current=M;let eN=(0,n.useRef)(eR);eN.current=eR;let ew=(0,n.useRef)(eo);ew.current=eo,(0,p.SL)((0,n.useCallback)(e=>{if("swap"===e.type){let t=ev.current,a=e=>{if(!e)return;let a=e.toUpperCase();if("ETH"===a||"WETH"===a)return v.address;let r=t.find(e=>e.symbol.toUpperCase()===a);return null==r?void 0:r.address},r=a(e.tokenIn),n=a(e.tokenOut);r&&T(r),n&&P(n),e.amount&&V(e.amount),e.fee&&z(Number(e.fee)),e.slippage&&G(Number(e.slippage))}else"flip_tokens"===e.type?eN.current():"max_balance"===e.type?ew.current&&V(ew.current):"set_fee"===e.type?z(Number(e.fee)):"set_slippage"===e.type&&G(Number(e.bps))},[])),(0,n.useEffect)(()=>{if(!d){ec(""),em("");return}(async()=>{if(ef.isNativeEth)try{ec((0,l.J)(await u.R.getBalance({address:d}),18))}catch(e){ec("?")}else if(ef.addr&&ef.meta)try{let e=await u.R.readContract({address:ef.addr,abi:h.bx,functionName:"balanceOf",args:[d]});ec((0,l.J)(e,ef.meta.decimals))}catch(e){ec("?")}else ec("");if(eb.isNativeEth)try{em((0,l.J)(await u.R.getBalance({address:d}),18))}catch(e){em("?")}else if(eb.addr&&eb.meta)try{let e=await u.R.readContract({address:eb.addr,abi:h.bx,functionName:"balanceOf",args:[d]});em((0,l.J)(e,eb.meta.decimals))}catch(e){em("?")}else em("")})()},[d,ef.addr,ef.isNativeEth,ef.meta,eb.addr,eb.isNativeEth,eb.meta]);let ej=(0,n.useCallback)(async()=>{if(ey){Y(!1);let e=(O||"").trim();if(!e||"0"===e||"0."===e||"."===e){J(0n),Q("");return}try{let t=(0,i.X)(e,18);J(t),Q(e)}catch(e){J(0n),Q("")}return}if(!x.$.quoterV2||!ef.addr||!eb.addr||!ef.meta||!eb.meta)return;let e=(O||"").trim();if(!e||"0"===e||"0."===e||"."===e){J(0n),Q("");return}Y(!0);try{let t=(0,i.X)(e,ef.meta.decimals);if(0n===t){J(0n),Q("");return}let a=async e=>(await u.R.readContract({address:x.$.quoterV2,abi:h.D8,functionName:"quoteExactInputSingle",args:[{tokenIn:ef.addr,tokenOut:eb.addr,amountIn:t,fee:e,sqrtPriceLimitX96:0n}]}))[0],r=[B,...f.map(e=>e.fee).filter(e=>e!==B)],n=null,s=B;for(let e of r)try{let t=await a(e);if(t>0n){n=t,s=e;break}}catch(e){}if(null===n){J(0n),Q("No liquidity");return}J(n),Q((0,l.J)(n,eb.meta.decimals));let o="".concat(ef.addr.toLowerCase(),"|").concat(eb.addr.toLowerCase(),"|").concat(t.toString());s!==B&&ep.current!==o&&(ep.current=o,z(s))}finally{Y(!1)}},[O,B,ef.addr,ef.meta,eb.addr,eb.meta,ey]);(0,n.useEffect)(()=>(eh.current&&clearTimeout(eh.current),eh.current=setTimeout(()=>{ej().catch(()=>{})},400),()=>{eh.current&&clearTimeout(eh.current)}),[ej]);let ek=(0,n.useMemo)(()=>{if(!O||!D||"No liquidity"===D||!ef.meta||!eb.meta)return null;let e=Number(O),t=Number(D);return e<=0||t<=0?null:{forward:t/e,inverse:e/t,inSymbol:ef.isNativeEth?"ETH":ef.meta.symbol,outSymbol:eb.isNativeEth?"ETH":eb.meta.symbol}},[O,D,ef.meta,ef.isNativeEth,eb.meta,eb.isNativeEth]),eC=(0,n.useMemo)(()=>X<=0n?0n:X*(10000n-BigInt(Z))/10000n,[X,Z]);async function eE(e,t,a,r,n){if(await u.R.readContract({address:a,abi:h.bx,functionName:"allowance",args:[e,t]})>=r)return;if(er("Approving ".concat(n,"...")),es("info"),!C)throw Error("No wallet client");let s=await C.writeContract({address:a,abi:h.bx,functionName:"approve",args:[t,r],chain:u.A,account:e});await u.R.waitForTransactionReceipt({hash:s})}async function eS(){if(!d){er("Connect wallet to swap."),es("error");return}if(!x.$.swapRouter||!ef.addr||!eb.addr||!ef.meta||!eb.meta){er("Select valid tokens."),es("error");return}let e=ef.isNativeEth?"ETH":ef.meta.symbol,t=eb.isNativeEth?"ETH":eb.meta.symbol;ei(!0),ex("");try{let a,r=(O||"").trim(),n=(0,i.X)(r||"0",ef.meta.decimals);if(0n===n)throw Error("Amount must be greater than 0");if(eo){let t=(0,i.X)(eo,ef.meta.decimals);if(n>t){er("Insufficient ".concat(e," balance. You have ").concat(j(eo)," but need ").concat(r,".")),es("error"),ei(!1);return}}if(er("Preparing swap: ".concat(r," ").concat(e," → ").concat(t,"...")),es("info"),await E(),!C)throw Error("No wallet client");let s=BigInt(Math.floor(Date.now()/1e3)+600),l=BigInt(Math.max(0,Math.min(3e3,Z))),c=0n;try{c=(await u.R.readContract({address:x.$.quoterV2,abi:h.D8,functionName:"quoteExactInputSingle",args:[{tokenIn:ef.addr,tokenOut:eb.addr,amountIn:n,fee:B,sqrtPriceLimitX96:0n}]}))[0]*(10000n-l)/10000n}catch(e){er("Could not fetch quote. Pool may not have liquidity for this pair."),es("error"),ei(!1);return}let m=ef.isNativeEth;if(eb.isNativeEth){m||await eE(d,x.$.swapRouter,ef.addr,n,e),er("Swapping ".concat(r," ").concat(e," → ~").concat(D?j(D):"?"," ").concat(t,"...")),es("info");let l=(0,o.p)({abi:h.zO,functionName:"exactInputSingle",args:[{tokenIn:ef.addr,tokenOut:eb.addr,fee:B,recipient:x.$.swapRouter,deadline:s,amountIn:n,amountOutMinimum:c,sqrtPriceLimitX96:0n}]}),i=(0,o.p)({abi:h.zO,functionName:"unwrapWETH9",args:[c,d]});a=await C.writeContract({address:x.$.swapRouter,abi:h.zO,functionName:"multicall",args:[[l,i]],value:m?n:0n,chain:u.A,account:d})}else m||await eE(d,x.$.swapRouter,ef.addr,n,e),er("Swapping ".concat(r," ").concat(e," → ~").concat(D?j(D):"?"," ").concat(t,"...")),es("info"),a=await C.writeContract({address:x.$.swapRouter,abi:h.zO,functionName:"exactInputSingle",args:[{tokenIn:ef.addr,tokenOut:eb.addr,fee:B,recipient:d,deadline:s,amountIn:n,amountOutMinimum:c,sqrtPriceLimitX96:0n}],value:m?n:0n,chain:u.A,account:d});ex(a),er("Confirming on-chain..."),es("info");let g=await u.R.waitForTransactionReceipt({hash:a});"success"===g.status?(er("Swap confirmed! Received ~".concat(D?j(D):"?"," ").concat(t)),es("success"),V("")):(er("Transaction reverted. The price may have moved beyond your slippage tolerance."),es("error")),ej().catch(()=>{})}catch(t){let e=String((null==t?void 0:t.shortMessage)||(null==t?void 0:t.message)||t);e.includes("user rejected")||e.includes("User denied")?er("Transaction cancelled by user."):er("Swap failed: ".concat(e)),es("error")}finally{ei(!1)}}async function eM(){if(ey){if(!d||!C){er("Connect wallet to wrap."),es("error");return}if(!x.$.weth){er("Missing WETH address in config."),es("error");return}ei(!0),ex("");try{let e=(O||"").trim(),t=(0,i.X)(e||"0",18);if(0n===t)throw Error("Amount must be greater than 0");if(await E(),"wrap"===ey.direction){er("Wrapping ".concat(e," ETH → WETH...")),es("info");let a=await C.writeContract({address:x.$.weth,abi:y,functionName:"deposit",args:[],value:t,chain:u.A,account:d});ex(a),await u.R.waitForTransactionReceipt({hash:a}),er("Wrap confirmed!"),es("success")}else{er("Unwrapping ".concat(e," WETH → ETH...")),es("info");let a=await C.writeContract({address:x.$.weth,abi:y,functionName:"withdraw",args:[t],chain:u.A,account:d});ex(a),await u.R.waitForTransactionReceipt({hash:a}),er("Unwrap confirmed!"),es("success")}V(""),J(0n),Q("")}catch(t){let e=String((null==t?void 0:t.shortMessage)||(null==t?void 0:t.message)||t);e.includes("user rejected")||e.includes("User denied")?er("Transaction cancelled by user."):er("Wrap failed: ".concat(e)),es("error")}finally{ei(!1)}}}function eR(){T(F),$(_),H(U),P(L),A(I),W(q),V(""),J(0n),Q("")}let eL=ef.isNativeEth?"ETH":(null==(e=ef.meta)?void 0:e.symbol)||"",eT=eb.isNativeEth?"ETH":(null==(t=eb.meta)?void 0:t.symbol)||"",eF=K?"Quoting...":D&&"No liquidity"!==D?"".concat(j(D)," ").concat(eT):D,eP=ef.addr&&eb.addr&&O&&Number(O)>0&&D&&"No liquidity"!==D;(0,n.useMemo)(()=>(!ek,null),[ek,D]);let eI=!!eo&&!!O&&Number(O)>Number(eo),e$=el?"Processing...":d?ef.addr&&eb.addr?!O||0>=Number(O)?"Enter Amount":ey?"wrap"===ey.direction?"Wrap ETH to WETH":"Unwrap WETH to ETH":"No liquidity"===D?"No Liquidity for This Pair":eI?"Insufficient ".concat(eL," Balance"):"Swap ".concat(eL," for ").concat(eT):"Select Tokens":"Connect Wallet",e_=ey?!O||0>=Number(O)||el||eI:!eP||el||eI;return(0,r.jsxs)("div",{className:"lm-swap-card p-1",children:[(0,r.jsx)(k,{tokens:M,value:L,onChange:T,customAddr:I,onCustomAddr:$,customMeta:q,label:"You Pay",balance:eo||void 0,symbol:eL,onMax:()=>{eo&&V(eo)},amount:O,onAmountChange:V,isNativeEth:ef.isNativeEth}),(0,r.jsx)("div",{className:"flex justify-center -my-2 relative z-10",children:(0,r.jsx)("button",{type:"button",onClick:eR,disabled:el,className:"w-10 h-10 flex items-center justify-center bg-lm-terminal-darkgray border-2 border-lm-terminal-gray hover:border-lm-orange hover:bg-lm-black text-lm-terminal-lightgray hover:text-lm-orange group disabled:opacity-40 disabled:pointer-events-none",title:"Flip tokens",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 group-hover:rotate-180 transition-transform duration-300",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M2.24 6.8a.75.75 0 001.06-.04l1.95-2.1v8.59a.75.75 0 001.5 0V4.66l1.95 2.1a.75.75 0 101.1-1.02l-3.25-3.5a.75.75 0 00-1.1 0L2.2 5.74a.75.75 0 00.04 1.06zm8 6.4a.75.75 0 00-.04 1.06l3.25 3.5a.75.75 0 001.1 0l3.25-3.5a.75.75 0 10-1.1-1.02l-1.95 2.1V6.75a.75.75 0 00-1.5 0v8.59l-1.95-2.1a.75.75 0 00-1.06-.04z",clipRule:"evenodd"})})})}),(0,r.jsx)(k,{tokens:M,value:F,onChange:P,customAddr:_,onCustomAddr:A,customMeta:U,label:"You Receive",balance:ed||void 0,symbol:eT,amountReadonly:!0,quoteDisplay:eF,isNativeEth:eb.isNativeEth}),(ek||eP)&&(0,r.jsxs)("div",{className:"mx-1 mt-2",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>et(!ee),className:"flex items-center justify-between w-full py-2 px-2 text-[10px] hover:bg-lm-terminal-darkgray/50 transition-colors",children:[(0,r.jsx)("div",{className:"flex items-center gap-2 text-lm-terminal-lightgray",children:ek&&(0,r.jsxs)("span",{className:"text-white lm-mono",children:["1 ",ek.inSymbol," = ",0===(a=ek.forward)||isNaN(a)?"—":a>=1e6?"".concat((a/1e6).toFixed(2),"M"):a>=1e3?"".concat((a/1e3).toFixed(2),"K"):a>=1?a.toFixed(4):a>=1e-4?a.toFixed(6):a.toExponential(2)," ",ek.outSymbol]})}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 text-lm-terminal-lightgray",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-3 h-3",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M6.955 1.45A.5.5 0 017.452 1h1.096a.5.5 0 01.497.45l.17 1.699c.484.12.94.312 1.356.562l1.321-.916a.5.5 0 01.67.033l.774.775a.5.5 0 01.033.67l-.916 1.32c.25.417.443.873.563 1.357l1.699.17a.5.5 0 01.45.497v1.096a.5.5 0 01-.45.497l-1.699.17c-.12.484-.312.94-.562 1.356l.916 1.321a.5.5 0 01-.034.67l-.774.774a.5.5 0 01-.67.033l-1.32-.916c-.417.25-.873.443-1.357.563l-.17 1.699a.5.5 0 01-.497.45H7.452a.5.5 0 01-.497-.45l-.17-1.699a4.973 4.973 0 01-1.356-.562l-1.321.916a.5.5 0 01-.67-.034l-.774-.774a.5.5 0 01-.034-.67l.916-1.32a4.973 4.973 0 01-.562-1.357l-1.699-.17A.5.5 0 011 8.548V7.452a.5.5 0 01.45-.497l1.699-.17c.12-.484.312-.94.562-1.356l-.916-1.321a.5.5 0 01.034-.67l.774-.774a.5.5 0 01.67-.033l1.32.916c.417-.25.873-.443 1.357-.563l.17-1.699zM8 10a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-3 h-3 transition-transform ".concat(ee?"rotate-180":""),children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.22 6.22a.75.75 0 011.06 0L8 8.94l2.72-2.72a.75.75 0 111.06 1.06l-3.25 3.25a.75.75 0 01-1.06 0L4.22 7.28a.75.75 0 010-1.06z",clipRule:"evenodd"})})]})]}),ee&&(0,r.jsxs)("div",{className:"bg-lm-black border border-lm-terminal-gray/50 p-3 space-y-3 mt-1 lm-fade-in",children:[eP&&eb.meta&&(0,r.jsxs)("div",{className:"space-y-1.5 text-[10px]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Minimum received"}),(0,r.jsxs)("span",{className:"text-white lm-mono font-bold",children:[j((0,l.J)(eC,eb.meta.decimals))," ",eT]})]}),(ef.isNativeEth||eb.isNativeEth)&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Route"}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-white lm-mono",children:[(0,r.jsx)("span",{children:eL}),(0,r.jsx)("span",{className:"text-lm-terminal-lightgray",children:"→"}),ef.isNativeEth&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-lm-terminal-lightgray",children:"WETH"}),(0,r.jsx)("span",{className:"text-lm-terminal-lightgray",children:"→"})]}),eb.isNativeEth&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-lm-terminal-lightgray",children:"WETH"}),(0,r.jsx)("span",{className:"text-lm-terminal-lightgray",children:"→"})]}),(0,r.jsx)("span",{children:eT})]})]}),(0,r.jsx)("div",{className:"h-px bg-lm-terminal-gray/30 my-1"})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Fee Tier"}),(0,r.jsx)("div",{className:"flex gap-1",children:f.map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>z(e.fee),className:"flex-1 py-2 border text-center ".concat(B===e.fee?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"),children:[(0,r.jsx)("div",{className:"text-xs font-bold",children:e.label}),(0,r.jsx)("div",{className:"text-[9px] opacity-60",children:e.hint})]},e.fee))})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Max Slippage"}),(0,r.jsx)("div",{className:"flex gap-1",children:b.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>G(e.bps),className:"flex-1 text-xs py-2 border ".concat(Z===e.bps?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"),children:e.label},e.bps))}),(0,r.jsx)("div",{className:"text-[9px] text-lm-terminal-lightgray",children:"Swap reverts if price moves beyond this tolerance."})]})]})]}),eI&&(0,r.jsxs)("div",{className:"mx-1 mt-1.5 lm-callout lm-callout-red text-[10px] flex items-center gap-2",children:[(0,r.jsx)("span",{className:"lm-dot lm-dot-red"}),(0,r.jsxs)("span",{children:["Insufficient balance. You have ",(0,r.jsx)("span",{className:"text-white font-bold",children:j(eo)})," ",eL," but need ",(0,r.jsx)("span",{className:"text-white font-bold",children:O}),"."]})]}),(0,r.jsx)("div",{className:"p-1 pt-2",children:(0,r.jsx)(c.$,{onClick:ey?eM:eS,loading:el,disabled:e_,variant:e_?"default":"primary",size:"lg",className:"w-full ".concat(e_?"":"bg-lm-orange text-black"),children:e$})}),ea&&(0,r.jsxs)("div",{className:"mx-1 mb-1 text-xs p-2.5 border bg-lm-black flex items-center justify-between gap-2 ".concat("success"===en?"text-lm-green":"error"===en?"text-lm-red":"text-lm-gray"," ").concat("success"===en?"border-lm-green/20":"error"===en?"border-lm-red/20":"border-lm-terminal-gray"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:["info"===en&&(0,r.jsx)("span",{className:"lm-spinner flex-shrink-0",style:{width:12,height:12,borderWidth:1.5}}),"success"===en&&(0,r.jsx)("span",{className:"lm-dot lm-dot-green flex-shrink-0"}),"error"===en&&(0,r.jsx)("span",{className:"lm-dot lm-dot-red flex-shrink-0"}),(0,r.jsx)("span",{className:"truncate",children:ea})]}),eu&&(0,r.jsx)("a",{href:"".concat(x.$.blockExplorerUrl||"https://explorer.testnet.chain.robinhood.com","/tx/").concat(eu),target:"_blank",rel:"noreferrer",className:"text-lm-orange hover:underline text-[10px] flex-shrink-0",children:"View Tx →"})]})]})}},7280:(e,t,a)=>{"use strict";a.d(t,{V:()=>l});var r=a(8839),n=a(2933),s=a(3376);async function l(){if(!n.$.tokenRegistry)return[];let e=await r.R.readContract({address:n.$.tokenRegistry,abi:s.wn,functionName:"tokenCount"}),t=[];for(let a=0n;a<e;a++){let e=await r.R.readContract({address:n.$.tokenRegistry,abi:s.wn,functionName:"tokenAt",args:[a]}),l=await r.R.readContract({address:n.$.tokenRegistry,abi:s.wn,functionName:"getToken",args:[e]});(null==l?void 0:l.whitelisted)&&t.push({address:e,symbol:l.symbol,decimals:Number(l.decimals),logoURI:l.logoURI||void 0,metadataURI:l.metadataURI||void 0})}return t}}},e=>{e.O(0,[462,476,668,918,441,255,358],()=>e(e.s=739)),_N_E=e.O()}]);