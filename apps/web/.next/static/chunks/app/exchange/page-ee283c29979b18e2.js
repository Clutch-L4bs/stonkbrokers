(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[806],{330:(e,t,a)=>{"use strict";a.d(t,{PoolsPanel:()=>S});var l=a(5155),n=a(2115),r=a(5028),s=a(598),i=a(6630),o=a(8590),c=a(7280),d=a(2933),m=a(3376),u=a(8839),x=a(9719),h=a(8604);let g=[{label:"0.05%",fee:500,tickSpacing:10,hint:"Stables"},{label:"0.30%",fee:3e3,tickSpacing:60,hint:"Standard"},{label:"1.00%",fee:1e4,tickSpacing:200,hint:"Volatile"}],p=[{label:"0.5%",bps:50},{label:"1%",bps:100},{label:"3%",bps:300}];function f(e){return e<-887272?-887272:e>887272?887272:e}function b(e,t){let a=Math.trunc(e/t)*t;return e<0&&a>e&&(a-=t),f(a)}function y(e,t,a){return Math.pow(1.0001,e)*Math.pow(10,t-a)}function v(e){return 0!==e&&Number.isFinite(e)?e>=1e6?"".concat((e/1e6).toFixed(2),"M"):e>=1e3?"".concat((e/1e3).toFixed(2),"K"):e>=1?e.toFixed(4):e>=1e-4?e.toFixed(6):e>=1e-7?e.toFixed(10):e.toExponential(2):"—"}function N(e){return e<=0?1n:10n**BigInt(e)}function w(e){if(e<-887272||e>887272)throw Error("tick out of range");let t=e<0?-e:e,a=(1&t)!=0?0xfffcb933bd6fad37aa2d162d1a594001n:0x100000000000000000000000000000000n;(2&t)!=0&&(a=0xfff97272373d413259a46990580e213an*a>>128n),(4&t)!=0&&(a=0xfff2e50f5f656932ef12357cf3c7fdccn*a>>128n),(8&t)!=0&&(a=0xffe5caca7e10e4e61c3624eaa0941cd0n*a>>128n),(16&t)!=0&&(a=0xffcb9843d60f6159c9db58835c926644n*a>>128n),(32&t)!=0&&(a=0xff973b41fa98c081472e6896dfb254c0n*a>>128n),(64&t)!=0&&(a=0xff2ea16466c96a3843ec78b326b52861n*a>>128n),(128&t)!=0&&(a=0xfe5dee046a99a2a811c461f1969c3053n*a>>128n),(256&t)!=0&&(a=0xfcbe86c7900a88aedcffc83b479aa3a4n*a>>128n),(512&t)!=0&&(a=0xf987a7253ac413176f2b074cf7815e54n*a>>128n),(1024&t)!=0&&(a=0xf3392b0822b70005940c7a398e4b70f3n*a>>128n),(2048&t)!=0&&(a=0xe7159475a2c29b7443b29c7fa6e889d9n*a>>128n),(4096&t)!=0&&(a=0xd097f3bdfd2022b8845ad8f792aa5825n*a>>128n),(8192&t)!=0&&(a=0xa9f746462d870fdf8a65dc1f90e061e5n*a>>128n),(16384&t)!=0&&(a=0x70d869a156d2a1b890bb3df62baf32f7n*a>>128n),(32768&t)!=0&&(a=0x31be135f97d08fd981231505542fcfa6n*a>>128n),(65536&t)!=0&&(a=0x9aa508b5b7a84e1c677de54f3e99bc9n*a>>128n),(131072&t)!=0&&(a=0x5d6af8dedb81196699c329225ee604n*a>>128n),(262144&t)!=0&&(a=0x2216e584f5fa1ea926041bedfe98n*a>>128n),(524288&t)!=0&&(a=0x48a170391f7dc42444e8fa2n*a>>128n),e>0&&(a=((1n<<256n)-1n)/a);let l=(a&(1n<<32n)-1n)!==0n;return(a>>32n)+(l?1n:0n)}function j(e,t,a){if(0n===a)throw Error("div by zero");return e*t/a}function k(e,t,a){return e>t&&([e,t]=[t,e]),j(a,j(e,t,2n**96n),t-e)}function C(e,t,a){return e>t&&([e,t]=[t,e]),j(a,2n**96n,t-e)}function E(e){let t=Number(e);return isNaN(t)||0===t?"0":t>=1e6?"".concat((t/1e6).toFixed(2),"M"):t>=1e3?"".concat((t/1e3).toFixed(2),"K"):t>=1?t.toFixed(4):t>=1e-4?t.toFixed(6):t.toExponential(2)}function S(){let{address:e,walletClient:t,requireCorrectChain:a,connect:S}=(0,x.v)(),[R,M]=(0,n.useState)([]),[L,F]=(0,n.useState)(""),[P,I]=(0,n.useState)(""),[T,_]=(0,n.useState)(3e3),[q,A]=(0,n.useState)(""),[$,B]=(0,n.useState)(!1),[O,U]=(0,n.useState)(""),[z,V]=(0,n.useState)(""),[H,X]=(0,n.useState)(""),[J,W]=(0,n.useState)(100),[D,Q]=(0,n.useState)("full"),[K,Y]=(0,n.useState)(""),[G,Z]=(0,n.useState)(""),[ee,et]=(0,n.useState)(""),[ea,el]=(0,n.useState)("info"),[en,er]=(0,n.useState)(!1),[es,ei]=(0,n.useState)(""),[eo,ec]=(0,n.useState)(""),ed=(0,n.useMemo)(()=>R.find(e=>e.address===L),[R,L]),em=(0,n.useMemo)(()=>R.find(e=>e.address===P),[R,P]),eu=(0,n.useMemo)(()=>g.find(e=>e.fee===T),[T]),ex=(0,n.useMemo)(()=>L&&P&&L.toLowerCase()!==P.toLowerCase()?{token0:L.toLowerCase()<P.toLowerCase()?L:P,token1:L.toLowerCase()<P.toLowerCase()?P:L}:null,[L,P]),eh=(0,n.useMemo)(()=>ex?R.find(e=>e.address===ex.token0):void 0,[ex,R]),eg=(0,n.useMemo)(()=>ex?R.find(e=>e.address===ex.token1):void 0,[ex,R]),ep=(0,n.useMemo)(()=>{try{var e,t;if(!ex||!eh||!eg)return"";let a=(q||"").trim();if(!a||"0"===a)return"";let l=(0,r.X)(a,18);if(l<=0n)return"";let n=(e=eh.decimals,(t=eg.decimals)>e?l*N(t-e):e>t?l/N(e-t):l);if(n<=0n)return"";let s=2n**96n;return(function(e){if(e<0n)throw Error("sqrt of negative");if(e<2n)return e;let t=e,a=t+1n>>1n;for(;a<t;)t=a,a=a+e/a>>1n;return t})(s*s*n/10n**18n).toString()}catch(e){return""}},[q,eh,eg,ex]),ef=(0,n.useMemo)(()=>O.trim()?O.trim():ep,[ep,O]),[eb,ey]=(0,n.useState)(""),[ev,eN]=(0,n.useState)(null),[ew,ej]=(0,n.useState)(null),[ek,eC]=(0,n.useState)("");(0,n.useEffect)(()=>{(async function(){if(!d.$.uniFactory||!ex||!eu||!eh||!eg){ey(""),eN(null),ej(null),eC("");return}try{let e=await u.R.readContract({address:d.$.uniFactory,abi:m.HB,functionName:"getPool",args:[ex.token0,ex.token1,T]});if(!e||"0x0000000000000000000000000000000000000000"===e){ey(""),eN(null),ej(null),eC("");return}ey(e);let t=await u.R.readContract({address:e,abi:m.ld,functionName:"slot0"}),a=t[0],l=t[1];ej(a),eN(l);let n={num:a*a,den:2n**192n},r=BigInt(eh.decimals),s=BigInt(eg.decimals),i=n.num,o=n.den;r>s&&(i*=10n**(r-s)),s>r&&(o*=10n**(s-r)),eC(function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(0n===t)return"0";let l=10n**BigInt(a),n=(e*l/t).toString().padStart(a+1,"0"),r=n.slice(0,-a),s=n.slice(-a);return"".concat(r,".").concat(s).replace(/\.?0+$/,e=>"")}(i,o,8))}catch(e){ey(""),eN(null),ej(null),eC("")}})().catch(()=>{})},[T,eu,eh,eg,ex]),(0,n.useEffect)(()=>{if(!e){ei(""),ec("");return}(async()=>{if(L&&ed)try{let t=await u.R.readContract({address:L,abi:m.bx,functionName:"balanceOf",args:[e]});ei((0,s.J)(t,ed.decimals))}catch(e){ei("?")}else ei("");if(P&&em)try{let t=await u.R.readContract({address:P,abi:m.bx,functionName:"balanceOf",args:[e]});ec((0,s.J)(t,em.decimals))}catch(e){ec("?")}else ec("")})()},[e,L,P,ed,em]);let eE=(0,n.useMemo)(()=>{if(!eu)return null;if("full"===D){var e=eu.tickSpacing;let t=t=>{let a=Math.trunc(t/e)*e;return t<0&&a>t&&(a-=e),a};return{tickLower:t(-887272),tickUpper:t(887272)}}try{if(!eh||!eg)return null;let e=(K||"").trim(),t=(G||"").trim();if(!e||!t)return null;let a=Number(e),l=Number(t);if(!Number.isFinite(a)||!Number.isFinite(l)||a<=0||l<=0||a>=l)return null;let n=eg.decimals-eh.decimals,r=a*Math.pow(10,n),s=l*Math.pow(10,n);if(!Number.isFinite(r)||!Number.isFinite(s)||r<=0||s<=0)return null;let i=Math.floor(Math.log(r)/Math.log(1.0001)),o=Math.floor(Math.log(s)/Math.log(1.0001));return{tickLower:b(i,eu.tickSpacing),tickUpper:function(e,t){let a=b(e,t);return a===e?a:f(a+t)}(o,eu.tickSpacing)}}catch(e){return null}},[eu,G,K,D,eh,eg]),eS=(0,n.useMemo)(()=>eE&&eh&&eg?{lower:y(eE.tickLower,eh.decimals,eg.decimals),upper:y(eE.tickUpper,eh.decimals,eg.decimals)}:null,[eE,eh,eg]),eR=(0,n.useMemo)(()=>{if(!eE||!eu||!ed||!em||!eh||!eg||!ew||null===ev)return null;try{let e,t=w(eE.tickLower),a=w(eE.tickUpper),l=(0,r.X)(z||"0",ed.decimals),n=(0,r.X)(H||"0",em.decimals);if(0n===l&&0n===n)return{used0:0n,used1:0n,note:"Enter amounts to see preview."};if(!ex)return null;let s=ex.token0.toLowerCase()===L.toLowerCase()?l:n,i=ex.token0.toLowerCase()===L.toLowerCase()?n:l;if(ew<=(t<a?t:a))e=k(t,a,s);else if(ew>=(t>a?t:a))e=C(t,a,i);else{let l=k(ew,a,s),n=C(t,ew,i);e=l<n?l:n}let{amount0:o,amount1:c}=function(e,t,a,l){let n=2n**96n;return(t>a&&([t,a]=[a,t]),e<=t)?{amount0:j(l,(a-t)*n,t*a),amount1:0n}:e<a?{amount0:j(l,(a-e)*n,e*a),amount1:j(l,e-t,n)}:{amount0:0n,amount1:j(l,a-t,n)}}(ew,t,a,e);return{used0:o,used1:c,note:""}}catch(e){return{used0:0n,used1:0n,note:String((null==e?void 0:e.message)||e)}}},[z,H,ew,ev,eu,eE,eh,eg,ex,ed,em,L]);(0,n.useEffect)(()=>{(0,c.V)().then(e=>{M(e),!L&&e[0]&&F(e[0].address),!P&&e[1]&&I(e[1].address)}).catch(e=>{et(String((null==e?void 0:e.message)||e)),el("error")})},[]);let eM=(0,n.useRef)(R);async function eL(e,a,l,n){var r;if(await u.R.readContract({address:l,abi:m.bx,functionName:"allowance",args:[e,a]})>=n)return;if(et("Approving ".concat((null==(r=R.find(e=>e.address===l))?void 0:r.symbol)||"token","...")),el("info"),!t)throw Error("No wallet client");let s=await t.writeContract({address:l,abi:m.bx,functionName:"approve",args:[a,n],chain:u.A,account:e});await u.R.waitForTransactionReceipt({hash:s})}async function eF(){if(!e){et("Connect wallet."),el("error");return}if(!d.$.positionManager||!ex)return;let l=(null==ed?void 0:ed.symbol)||"Token0",n=(null==em?void 0:em.symbol)||"Token1";er(!0);try{await a();let r=BigInt(ef||"0");if(0n===r)throw Error("Set an initial price first (enter a price in the field above).");if(!t)throw Error("No wallet client");et("Creating ".concat(l,"/").concat(n," pool (").concat(null==eu?void 0:eu.label," fee)...")),el("info");let s=await t.writeContract({address:d.$.positionManager,abi:m.g4,functionName:"createAndInitializePoolIfNecessary",args:[ex.token0,ex.token1,T,r],value:0n,chain:u.A,account:e});et("Confirming pool creation on-chain...");let i=await u.R.waitForTransactionReceipt({hash:s});"success"===i.status?(et("Pool created! ".concat(l,"/").concat(n," (").concat(null==eu?void 0:eu.label,") is now live.")),el("success")):(et("Pool creation reverted. The pool may already exist for this pair + fee tier."),el("error"))}catch(t){let e=String((null==t?void 0:t.shortMessage)||(null==t?void 0:t.message)||t);e.includes("user rejected")||e.includes("User denied")?et("Transaction cancelled."):et("Create pool failed: ".concat(e)),el("error")}finally{er(!1)}}async function eP(){if(!e){et("Connect wallet."),el("error");return}if(d.$.positionManager&&L&&P&&ed&&em&&eu&&ex){if(!eE){et("Invalid price range."),el("error");return}er(!0);try{await a();let l=(0,r.X)(z||"0",ed.decimals),n=(0,r.X)(H||"0",em.decimals);if(0n===l&&0n===n)throw Error("Enter amount for at least one token");if(!t)throw Error("No wallet client");await eL(e,d.$.positionManager,L,l),await eL(e,d.$.positionManager,P,n);let{tickLower:s,tickUpper:i}=eE,o=ex.token0.toLowerCase()===L.toLowerCase()?l:n,c=ex.token0.toLowerCase()===L.toLowerCase()?n:l,x=BigInt(Math.max(0,Math.min(3e3,J))),h=BigInt(Math.floor(Date.now()/1e3)+600);et("Minting LP: ".concat(z||"0"," ").concat(ed.symbol," + ").concat(H||"0"," ").concat(em.symbol,"...")),el("info");let g=await t.writeContract({address:d.$.positionManager,abi:m.g4,functionName:"mint",args:[{token0:ex.token0,token1:ex.token1,fee:T,tickLower:s,tickUpper:i,amount0Desired:o,amount1Desired:c,amount0Min:o*(10000n-x)/10000n,amount1Min:c*(10000n-x)/10000n,recipient:e,deadline:h}],value:0n,chain:u.A,account:e});et("Confirming on-chain...");let p=await u.R.waitForTransactionReceipt({hash:g});"success"===p.status?(et("LP position minted! ".concat(ed.symbol,"/").concat(em.symbol," liquidity added. Check the Positions tab.")),el("success")):(et("Mint transaction reverted. Check your balances and price range."),el("error"))}catch(t){let e=String((null==t?void 0:t.shortMessage)||(null==t?void 0:t.message)||t);e.includes("user rejected")||e.includes("User denied")?et("Transaction cancelled."):et("Add liquidity failed: ".concat(e)),el("error")}finally{er(!1)}}}eM.current=R,(0,h.SL)((0,n.useCallback)(e=>{if("add_liquidity"!==e.type&&"create_pool"!==e.type)return;let t=eM.current,a=e=>{if(!e)return"";let a=e.toUpperCase(),l=t.find(e=>e.symbol.toUpperCase()===a);return(null==l?void 0:l.address)||""},l=a(e.token0),n=a(e.token1);l&&F(l),n&&I(n),e.fee&&_(Number(e.fee)),"create_pool"===e.type&&e.price&&A(e.price),"add_liquidity"===e.type&&("full"===e.range?Q("full"):"custom"===e.range&&(Q("custom"),e.minPrice&&Y(e.minPrice),e.maxPrice&&Z(e.maxPrice)),e.amount0&&V(e.amount0),e.amount1&&X(e.amount1))},[]));let eI=L&&P&&L.toLowerCase()===P.toLowerCase();return(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-3 space-y-3",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Select Token Pair"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Token A"}),(0,l.jsxs)("select",{className:"w-full bg-lm-black border border-lm-terminal-gray hover:border-lm-orange p-2 text-sm h-9 text-white font-bold transition-colors disabled:opacity-40",value:L,onChange:e=>F(e.target.value),disabled:en,children:[0===R.length&&(0,l.jsx)("option",{value:"",disabled:!0,children:"Loading tokens..."}),R.map(e=>(0,l.jsx)("option",{value:e.address,children:e.symbol},e.address))]}),es&&(0,l.jsxs)("div",{className:"text-[10px] text-lm-terminal-lightgray lm-mono",children:["Balance: ",(0,l.jsx)("span",{className:"text-white",children:E(es)})]})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Token B"}),(0,l.jsxs)("select",{className:"w-full bg-lm-black border border-lm-terminal-gray hover:border-lm-orange p-2 text-sm h-9 text-white font-bold transition-colors disabled:opacity-40",value:P,onChange:e=>I(e.target.value),disabled:en,children:[0===R.length&&(0,l.jsx)("option",{value:"",disabled:!0,children:"Loading tokens..."}),R.map(e=>(0,l.jsx)("option",{value:e.address,children:e.symbol},e.address))]}),eo&&(0,l.jsxs)("div",{className:"text-[10px] text-lm-terminal-lightgray lm-mono",children:["Balance: ",(0,l.jsx)("span",{className:"text-white",children:E(eo)})]})]})]}),eI&&(0,l.jsx)("div",{className:"text-lm-red text-xs",children:"Tokens must be different."}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Trading Fee"}),(0,l.jsx)("div",{className:"flex gap-1",children:g.map(e=>(0,l.jsxs)("button",{type:"button",onClick:()=>_(e.fee),className:"flex-1 py-2 border transition-colors text-center ".concat(T===e.fee?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"),children:[(0,l.jsx)("div",{className:"text-xs font-bold",children:e.label}),(0,l.jsx)("div",{className:"text-[9px] opacity-60",children:e.hint})]},e.fee))})]}),ex&&(0,l.jsxs)("div",{className:"text-xs bg-lm-black border p-3 space-y-1 ".concat(eb?"border-lm-green/20":"border-lm-red/20"),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"lm-dot ".concat(eb?"lm-dot-green lm-dot-pulse":"lm-dot-red")}),(0,l.jsx)("span",{className:eb?"text-lm-green font-bold":"text-lm-red",children:eb?"Pool Active":"No Pool Found"})]}),eb&&(0,l.jsxs)("a",{href:"".concat(d.$.blockExplorerUrl||"https://explorer.testnet.chain.robinhood.com","/address/").concat(eb),target:"_blank",rel:"noreferrer",className:"text-lm-orange hover:underline lm-mono text-[10px]",children:[eb.slice(0,6)+"..."+eb.slice(-4)," →"]})]}),ek&&eh&&eg&&(0,l.jsxs)("div",{className:"text-[10px] lm-mono flex items-center gap-1.5 pt-0.5",children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Current Price:"}),(0,l.jsx)("span",{className:"text-white font-bold",children:ek}),(0,l.jsxs)("span",{className:"text-lm-terminal-lightgray",children:[eg.symbol,"/",eh.symbol]})]})]})]}),ex&&!eb&&(0,l.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-3 space-y-3",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Initialize New Pool"}),(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px]",children:"This pair has no pool yet. Set an initial price to create one."}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"text-lm-terminal-lightgray text-xs",children:["Initial Price (",(null==eg?void 0:eg.symbol)||"B"," per ",(null==eh?void 0:eh.symbol)||"A",")"]}),(0,l.jsx)(o.p,{value:q,onValueChange:A,placeholder:"e.g. 0.001"})]}),(0,l.jsx)("button",{type:"button",onClick:()=>B(!$),className:"text-lm-terminal-lightgray text-[10px] hover:text-lm-orange transition-colors",children:$?"▾ Hide developer settings":"▸ Developer settings"}),$&&(0,l.jsxs)("div",{className:"space-y-1 text-[10px]",children:[(0,l.jsxs)("div",{className:"text-lm-terminal-lightgray",children:["sqrtPriceX96 (auto: ",(0,l.jsx)("span",{className:"lm-mono text-lm-gray",children:ep||"—"}),")"]}),(0,l.jsx)(o.p,{value:O,onValueChange:U,placeholder:"Leave blank for auto",className:"text-left text-xs",numeric:!1})]}),(0,l.jsx)(i.$,{onClick:e?eF:S,loading:en,disabled:en||!!e&&!ef,variant:"primary",size:"lg",className:"w-full",children:en?"Creating Pool...":e?"Create Pool":"Connect Wallet"})]}),(0,l.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-3 space-y-3",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Add Liquidity"}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Price Range"}),(0,l.jsxs)("div",{className:"flex gap-1",children:[(0,l.jsxs)("button",{type:"button",onClick:()=>Q("full"),className:"flex-1 text-xs py-2 border transition-colors ".concat("full"===D?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"),children:[(0,l.jsx)("div",{className:"font-bold",children:"Full Range"}),(0,l.jsx)("div",{className:"text-[9px] opacity-60",children:"Earn fees at any price"})]}),(0,l.jsxs)("button",{type:"button",onClick:()=>Q("custom"),className:"flex-1 text-xs py-2 border transition-colors ".concat("custom"===D?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"),children:[(0,l.jsx)("div",{className:"font-bold",children:"Custom Range"}),(0,l.jsx)("div",{className:"text-[9px] opacity-60",children:"Concentrated liquidity"})]})]})]}),"custom"===D&&(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"text-lm-terminal-lightgray text-xs",children:["Min Price (",(null==eg?void 0:eg.symbol)||"B","/",(null==eh?void 0:eh.symbol)||"A",")"]}),(0,l.jsx)(o.p,{value:K,onValueChange:Y,placeholder:"0.0005"})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"text-lm-terminal-lightgray text-xs",children:["Max Price (",(null==eg?void 0:eg.symbol)||"B","/",(null==eh?void 0:eh.symbol)||"A",")"]}),(0,l.jsx)(o.p,{value:G,onValueChange:Z,placeholder:"0.0020"})]})]}),eS&&eh&&eg&&(0,l.jsxs)("div",{className:"bg-lm-black border border-lm-terminal-gray p-2 flex items-center justify-between text-[10px]",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Low: "}),(0,l.jsx)("span",{className:"text-white lm-mono font-bold",children:"full"===D?"0":v(eS.lower)})]}),(0,l.jsx)("span",{className:"text-lm-terminal-gray",children:"←→"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"High: "}),(0,l.jsx)("span",{className:"text-white lm-mono font-bold",children:"full"===D?"∞":v(eS.upper)})]}),(0,l.jsxs)("span",{className:"text-lm-terminal-lightgray",children:[eg.symbol,"/",eh.symbol]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:(null==ed?void 0:ed.symbol)||"Token A"}),es&&Number(es)>0&&(0,l.jsx)("button",{type:"button",onClick:()=>V(es),className:"text-[10px] text-lm-orange hover:underline",children:"MAX"})]}),(0,l.jsx)(o.p,{value:z,onValueChange:V,placeholder:"0.0"})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:(null==em?void 0:em.symbol)||"Token B"}),eo&&Number(eo)>0&&(0,l.jsx)("button",{type:"button",onClick:()=>X(eo),className:"text-[10px] text-lm-orange hover:underline",children:"MAX"})]}),(0,l.jsx)(o.p,{value:H,onValueChange:X,placeholder:"0.0"})]})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Slippage Tolerance"}),(0,l.jsx)("div",{className:"flex gap-1",children:p.map(e=>(0,l.jsx)("button",{type:"button",onClick:()=>W(e.bps),className:"flex-1 text-xs py-1.5 border transition-colors ".concat(J===e.bps?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"),children:e.label},e.bps))})]}),eR&&(0,l.jsxs)("div",{className:"bg-lm-black border border-lm-terminal-gray p-2.5 space-y-1.5 text-[10px]",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray lm-upper font-bold tracking-wider",children:"Deposit Preview"}),eR.note?(0,l.jsx)("div",{className:"text-lm-terminal-lightgray",children:eR.note}):(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:null==eh?void 0:eh.symbol}),(0,l.jsx)("span",{className:"text-white lm-mono font-bold",children:eh?E((0,s.J)(eR.used0,eh.decimals)):"0"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:null==eg?void 0:eg.symbol}),(0,l.jsx)("span",{className:"text-white lm-mono font-bold",children:eg?E((0,s.J)(eR.used1,eg.decimals)):"0"})]})]})]}),(0,l.jsx)(i.$,{onClick:e?eP:S,loading:en,disabled:en||!!e&&!eE,variant:"primary",size:"lg",className:"w-full",children:en?"Processing...":e?"Add Liquidity":"Connect Wallet"})]}),ee&&(0,l.jsxs)("div",{className:"text-xs p-2.5 border bg-lm-black flex items-center gap-2 ".concat("success"===ea?"text-lm-green":"error"===ea?"text-lm-red":"text-lm-gray"," ").concat("success"===ea?"border-lm-green/20":"error"===ea?"border-lm-red/20":"border-lm-terminal-gray"),children:["info"===ea&&(0,l.jsx)("span",{className:"lm-spinner flex-shrink-0",style:{width:12,height:12,borderWidth:1.5}}),"success"===ea&&(0,l.jsx)("span",{className:"lm-dot lm-dot-green flex-shrink-0"}),"error"===ea&&(0,l.jsx)("span",{className:"lm-dot lm-dot-red flex-shrink-0"}),(0,l.jsx)("span",{children:ee})]})]})}},739:(e,t,a)=>{Promise.resolve().then(a.bind(a,330)),Promise.resolve().then(a.bind(a,5110)),Promise.resolve().then(a.bind(a,4383))},4383:(e,t,a)=>{"use strict";a.d(t,{ExchangeBootstrap:()=>y});var l=a(5155),n=a(2115),r=a(598),s=a(6594),i=a(8070),o=a(6630),c=a(9719),d=a(8839),m=a(2933),u=a(3376),x=a(8604);let h=2n**128n-1n;function g(e,t,a){return Math.pow(1.0001,e)*Math.pow(10,t-a)}function p(e){return 0!==e&&Number.isFinite(e)?e>=1e9?"".concat((e/1e9).toFixed(2),"B"):e>=1e6?"".concat((e/1e6).toFixed(2),"M"):e>=1e3?"".concat((e/1e3).toFixed(2),"K"):e>=1?e.toFixed(4):e>=1e-4?e.toFixed(6):e>=1e-7?e.toFixed(10):e.toExponential(2):"—"}function f(e){let t=Number(e);return isNaN(t)||0===t?"0":t>=1e6?"".concat((t/1e6).toFixed(2),"M"):t>=1e3?"".concat((t/1e3).toFixed(2),"K"):t>=1?t.toFixed(4):t>=1e-4?t.toFixed(6):t.toExponential(2)}function b(){let{address:e,walletClient:t}=(0,c.v)(),[a,s]=(0,n.useState)([]),[i,x]=(0,n.useState)(""),[b,y]=(0,n.useState)(!1),[v,N]=(0,n.useState)({}),[w,j]=(0,n.useState)({}),[k,C]=(0,n.useState)(null),E=m.$.positionManager;async function S(){if(!e||!E)return void s([]);y(!0),x("Loading positions...");try{let a=await d.R.readContract({address:E,abi:u.g4,functionName:"balanceOf",args:[e]}),l=a>50n?50:Number(a),n=[],r={};async function t(e){let t=e.toLowerCase();if(r[t])return r[t];let a=e.slice(0,6),l=18;try{a=await d.R.readContract({address:e,abi:u.Qi,functionName:"symbol"})}catch(e){}try{l=Number(await d.R.readContract({address:e,abi:u.Qi,functionName:"decimals"}))}catch(e){}return r[t]={sym:a,dec:l},r[t]}let i={};for(let a=0;a<l;a++){let l=await d.R.readContract({address:E,abi:u.g4,functionName:"tokenOfOwnerByIndex",args:[e,BigInt(a)]}),r=await d.R.readContract({address:E,abi:u.g4,functionName:"positions",args:[l]}),s=r.token0,o=r.token1,c=await t(s),x=await t(o),h=Number(r.fee),p=g(Number(r.tickLower),c.dec,x.dec),f=g(Number(r.tickUpper),c.dec,x.dec),b=0,y="".concat(s.toLowerCase(),"-").concat(o.toLowerCase(),"-").concat(h);if(void 0!==i[y])b=i[y];else if(m.$.uniFactory){try{let e=await d.R.readContract({address:m.$.uniFactory,abi:u.HB,functionName:"getPool",args:[s,o,h]});if(e&&"0x0000000000000000000000000000000000000000"!==e){let t=await d.R.readContract({address:e,abi:u.ld,functionName:"slot0"});b=g(t[1],c.dec,x.dec)}}catch(e){}i[y]=b}let v=b>=p&&b<=f;n.push({tokenId:l,token0:s,token1:o,fee:h,tickLower:Number(r.tickLower),tickUpper:Number(r.tickUpper),liquidity:r.liquidity,sym0:c.sym,sym1:x.sym,dec0:c.dec,dec1:x.dec,tokensOwed0:r.tokensOwed0,tokensOwed1:r.tokensOwed1,priceLower:p,priceUpper:f,currentPrice:b,inRange:v})}s(n),x("")}catch(e){x(String((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||e))}finally{y(!1)}}async function R(a){if(!e||!t||!E)return;y(!0);let l=a.tokenId.toString();N(e=>({...e,[l]:"Collecting fees..."})),j(e=>({...e,[l]:"info"}));try{let n=await t.writeContract({address:E,abi:u.g4,functionName:"collect",args:[{tokenId:a.tokenId,recipient:e,amount0Max:h,amount1Max:h}],chain:t.chain,account:e});N(e=>({...e,[l]:"Confirming..."}));let r=await d.R.waitForTransactionReceipt({hash:n});"success"===r.status?(N(e=>({...e,[l]:"Fees collected!"})),j(e=>({...e,[l]:"success"}))):(N(e=>({...e,[l]:"Tx failed"})),j(e=>({...e,[l]:"error"}))),await S()}catch(e){N(t=>({...t,[l]:String((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||e)})),j(e=>({...e,[l]:"error"}))}finally{y(!1)}}async function M(a){if(!e||!t||!E||a.liquidity<=0n)return;y(!0);let l=a.tokenId.toString();N(e=>({...e,[l]:"Removing liquidity..."})),j(e=>({...e,[l]:"info"}));try{let n=BigInt(Math.floor(Date.now()/1e3)+600),r=await t.writeContract({address:E,abi:u.g4,functionName:"decreaseLiquidity",args:[{tokenId:a.tokenId,liquidity:a.liquidity,amount0Min:0n,amount1Min:0n,deadline:n}],chain:t.chain,account:e});N(e=>({...e,[l]:"Removing... collecting tokens"})),await d.R.waitForTransactionReceipt({hash:r});let s=await t.writeContract({address:E,abi:u.g4,functionName:"collect",args:[{tokenId:a.tokenId,recipient:e,amount0Max:h,amount1Max:h}],chain:t.chain,account:e});await d.R.waitForTransactionReceipt({hash:s}),N(e=>({...e,[l]:"Liquidity removed!"})),j(e=>({...e,[l]:"success"})),await S()}catch(e){N(t=>({...t,[l]:String((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||e)})),j(e=>({...e,[l]:"error"}))}finally{y(!1)}}if((0,n.useEffect)(()=>{S().catch(()=>{})},[e]),!e)return(0,l.jsxs)("div",{className:"text-lm-gray text-sm p-6 text-center",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-lg mb-1",children:"No Wallet Connected"}),(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs",children:"Connect your wallet to view and manage LP positions."})]});let L=a.filter(e=>e.liquidity>0n),F=a.filter(e=>e.liquidity<=0n);return(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"flex items-center gap-3",children:a.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:[L.length," Active"]}),F.length>0&&(0,l.jsxs)("span",{className:"text-lm-terminal-lightgray text-[10px] lm-upper tracking-wider opacity-50",children:[F.length," Closed"]})]})}),(0,l.jsx)(o.$,{onClick:S,disabled:b,className:"text-lm-orange text-xs border border-lm-terminal-gray hover:border-lm-orange px-3 py-1 transition-colors",children:b?"Loading...":"Refresh"})]}),0===a.length?(0,l.jsxs)("div",{className:"text-center py-8 space-y-2",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-lg",children:b?"Loading...":"No Positions"}),(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-xs opacity-60",children:i||"Create an LP position in the Pools tab to start earning fees."})]}):(0,l.jsx)("div",{className:"space-y-2",children:a.map(e=>{let t=e.tokenId.toString(),a=e.liquidity>0n,n=e.tokensOwed0>0n||e.tokensOwed1>0n,s=v[t],i=w[t]||"info",c=k===t,d="".concat((e.fee/1e4).toFixed(e.fee<1e3?2:+(e.fee<1e4)),"%");return(0,l.jsxs)("div",{className:"bg-lm-terminal-darkgray border transition-all lm-card-hover ".concat(a&&e.inRange?"border-lm-green/30 lm-in-range":a?"border-lm-orange/30 lm-out-of-range":"border-lm-terminal-gray"),children:[(0,l.jsxs)("button",{type:"button",onClick:()=>C(c?null:t),className:"w-full p-3 flex items-center justify-between text-left hover:bg-lm-black/20",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,l.jsx)("span",{className:"lm-dot ".concat(a?e.inRange?"lm-dot-green lm-dot-pulse":"lm-dot-red":"lm-dot-gray")}),(0,l.jsxs)("span",{className:"text-white font-bold text-sm",children:[e.sym0,"/",e.sym1]}),(0,l.jsx)("span",{className:"text-lm-terminal-lightgray text-[10px] bg-lm-black px-1.5 py-0.5 border border-lm-terminal-gray lm-mono",children:d}),(0,l.jsxs)("span",{className:"text-lm-terminal-lightgray text-[10px] lm-mono opacity-50",children:["#",e.tokenId.toString()]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[a?(0,l.jsx)("span",{className:"lm-badge font-bold ".concat(e.inRange?"lm-badge-filled-green":"lm-badge-filled-red"),children:e.inRange?"IN RANGE":"OUT OF RANGE"}):(0,l.jsx)("span",{className:"lm-badge lm-badge-gray",children:"CLOSED"}),n&&(0,l.jsx)("span",{className:"lm-badge lm-badge-filled-green",children:"FEES"}),(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-3 h-3 text-lm-terminal-lightgray transition-transform ".concat(c?"rotate-180":""),children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M4.22 6.22a.75.75 0 011.06 0L8 8.94l2.72-2.72a.75.75 0 111.06 1.06l-3.25 3.25a.75.75 0 01-1.06 0L4.22 7.28a.75.75 0 010-1.06z",clipRule:"evenodd"})})]})]}),(0,l.jsxs)("div",{className:"px-3 pb-2 flex items-center gap-4 text-[10px] flex-wrap",children:[e.currentPrice>0&&(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Price:"}),(0,l.jsx)("span",{className:"text-white lm-mono font-bold",children:p(e.currentPrice)})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Range:"}),(0,l.jsx)("span",{className:"text-white lm-mono",children:p(e.priceLower)}),(0,l.jsx)("span",{className:"text-lm-terminal-gray",children:"—"}),(0,l.jsx)("span",{className:"text-white lm-mono",children:p(e.priceUpper)})]})]}),a&&e.currentPrice>0&&(0,l.jsx)("div",{className:"px-3 pb-2",children:(0,l.jsxs)("div",{className:"relative h-1.5 bg-lm-black rounded-full overflow-hidden",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-lm-orange/20 rounded-full",style:{left:"10%",right:"10%"}}),(()=>{let t=Math.min(e.priceLower,.5*e.currentPrice),a=Math.max(e.priceUpper,2*e.currentPrice)-t;if(a<=0)return null;let n=(e.priceLower-t)/a*100,r=(e.priceUpper-t)/a*100,s=(e.currentPrice-t)/a*100;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"absolute top-0 h-full ".concat(e.inRange?"bg-lm-green/40":"bg-lm-orange/40"),style:{left:"".concat(n,"%"),width:"".concat(r-n,"%")}}),(0,l.jsx)("div",{className:"absolute top-0 w-1 h-full bg-white rounded-full",style:{left:"".concat(s,"%"),transform:"translateX(-50%)"}})]})})()]})}),c&&(0,l.jsxs)("div",{className:"px-3 pb-3 space-y-2 border-t border-lm-terminal-gray",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 pt-2 text-[10px]",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"text-lm-terminal-lightgray lm-upper tracking-wider",children:["Price Range (",e.sym1,"/",e.sym0,")"]}),(0,l.jsxs)("div",{className:"text-white lm-mono text-xs mt-0.5",children:[p(e.priceLower)," — ",p(e.priceUpper)]})]}),e.currentPrice>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray lm-upper tracking-wider",children:"Current Price"}),(0,l.jsxs)("div",{className:"text-white lm-mono text-xs mt-0.5",children:[p(e.currentPrice)," ",e.sym1,"/",e.sym0]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray lm-upper tracking-wider",children:"Fee Tier"}),(0,l.jsx)("div",{className:"text-white text-xs mt-0.5",children:d})]})]}),n&&(0,l.jsxs)("div",{className:"bg-lm-black border border-lm-green/20 p-2 text-xs space-y-0.5",children:[(0,l.jsx)("div",{className:"text-lm-green text-[10px] font-bold lm-upper tracking-wider",children:"Uncollected Fees"}),(0,l.jsxs)("div",{className:"flex gap-4 text-white lm-mono",children:[e.tokensOwed0>0n&&(0,l.jsxs)("span",{children:[f((0,r.J)(e.tokensOwed0,e.dec0))," ",e.sym0]}),e.tokensOwed1>0n&&(0,l.jsxs)("span",{children:[f((0,r.J)(e.tokensOwed1,e.dec1))," ",e.sym1]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap pt-1",children:[(0,l.jsx)(o.$,{size:"sm",className:"bg-lm-green/10 text-lm-green border-lm-green/30 hover:bg-lm-green/20 hover:border-lm-green",onClick:()=>R(e),disabled:b,children:"Collect Fees"}),a&&(0,l.jsx)(o.$,{size:"sm",variant:"danger",onClick:()=>M(e),disabled:b,children:"Remove All Liquidity"}),s&&(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:["info"===i&&(0,l.jsx)("span",{className:"lm-spinner",style:{width:10,height:10,borderWidth:1}}),"success"===i&&(0,l.jsx)("span",{className:"lm-dot lm-dot-green"}),"error"===i&&(0,l.jsx)("span",{className:"lm-dot lm-dot-red"}),(0,l.jsx)("span",{className:"text-[10px] ".concat("success"===i?"text-lm-green":"error"===i?"text-lm-red":"text-lm-gray"),children:s})]})]})]})]},t)})}),i&&a.length>0&&(0,l.jsxs)("div",{className:"text-xs p-2.5 border border-lm-red/20 bg-lm-black flex items-center gap-2 text-lm-red",children:[(0,l.jsx)("span",{className:"lm-dot lm-dot-red flex-shrink-0"}),(0,l.jsx)("span",{children:i})]})]})}function y(e){let{SwapPanel:t,PoolsPanel:a}=e,r=(0,n.useMemo)(()=>[{id:"swap",label:"Swap",hint:"Quote + swap any token pair"},{id:"pools",label:"Pools",hint:"Create pools + add liquidity"},{id:"positions",label:"Positions",hint:"Manage your LP positions"}],[]),[o,c]=(0,n.useState)("swap"),d=(0,n.useCallback)(e=>{["swap","flip_tokens","max_balance","set_fee","set_slippage"].includes(e.type)?c("swap"):["add_liquidity","create_pool"].includes(e.type)?c("pools"):["collect_fees","remove_liquidity","refresh_positions"].includes(e.type)?c("positions"):"switch_tab"===e.type&&["swap","pools","positions"].includes(e.tab)&&c(e.tab)},[]);return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(x.jc,{context:"exchange",onIntent:d,placeholder:"swap 10 ETH for TSLA \xb7 add liquidity \xb7 create pool \xb7 collect fees \xb7 help"}),(0,l.jsxs)(s.Z,{title:"Exchange",hint:"Swap any token pair. Native ETH supported. Create and manage LP positions.",right:(0,l.jsx)(i.Z,{tabs:r,active:o,onChange:c}),children:["swap"===o?(0,l.jsx)(t,{}):null,"pools"===o?(0,l.jsx)(a,{}):null,"positions"===o?(0,l.jsx)(b,{}):null]})]})}},5110:(e,t,a)=>{"use strict";a.d(t,{SwapPanel:()=>w});var l=a(5155),n=a(2115),r=a(598),s=a(5028),i=a(931),o=a(6630),c=a(8590),d=a(7280),m=a(8839),u=a(2933),x=a(3376),h=a(9719),g=a(8604);let p=[{label:"0.05%",fee:500,hint:"Stables"},{label:"0.30%",fee:3e3,hint:"Standard"},{label:"1.00%",fee:1e4,hint:"Volatile"}],f=[{label:"0.5%",bps:50},{label:"1%",bps:100},{label:"3%",bps:300}],b={address:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",symbol:"ETH",decimals:18,logoURI:""};function y(e){return e.toLowerCase()===b.address.toLowerCase()}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=Number(e);return isNaN(a)||0===a?"0":a>=1e6?"".concat((a/1e6).toFixed(2),"M"):a>=1e3?"".concat((a/1e3).toFixed(2),"K"):a>=1?a.toFixed(Math.min(4,t)):a>=1e-4?a.toFixed(t):a.toExponential(2)}function N(e){var t;let{tokens:a,value:r,onChange:s,customAddr:i,onCustomAddr:o,customMeta:d,label:m,balance:u,symbol:x,onMax:h,amount:g,onAmountChange:p,amountReadonly:f,quoteDisplay:y,isNativeEth:N}=e,w="__custom__"===r,[j,k]=(0,n.useState)(!1),C=(0,n.useRef)(null);(0,n.useEffect)(()=>{function e(e){C.current&&!C.current.contains(e.target)&&k(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let E=[{addr:b.address,symbol:"ETH",hint:"Native",isEth:!0},...a.map(e=>({addr:e.address,symbol:e.symbol,hint:e.address.slice(0,6)+"...",isEth:!1})),{addr:"__custom__",symbol:"Custom",hint:"Paste address",isEth:!1}],S=w?(null==d?void 0:d.symbol)||"Custom":x||(null==(t=E.find(e=>e.addr===r))?void 0:t.symbol)||"Select";return(0,l.jsxs)("div",{className:"bg-lm-terminal-darkgray border border-lm-terminal-gray p-3 space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:m}),void 0!==u&&(0,l.jsxs)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-mono flex items-center gap-1",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-2.5 h-2.5 opacity-60",children:(0,l.jsx)("path",{d:"M8 1a7 7 0 100 14A7 7 0 008 1zm-.5 3h1v1h-1V4zm-1 2h3v1h-1v3h1v1h-3V10h1V7h-1V6z"})}),(0,l.jsx)("span",{className:"text-white",children:v(u)})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("div",{className:"relative flex-shrink-0",ref:C,children:[(0,l.jsxs)("button",{type:"button",onClick:()=>k(!j),className:"flex items-center gap-1.5 h-10 px-3 bg-lm-black border border-lm-terminal-gray hover:border-lm-orange transition-colors min-w-[100px]",children:[(0,l.jsx)("span",{className:"text-white font-bold text-sm",children:S}),(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-3 h-3 text-lm-terminal-lightgray",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M4.22 6.22a.75.75 0 011.06 0L8 8.94l2.72-2.72a.75.75 0 111.06 1.06l-3.25 3.25a.75.75 0 01-1.06 0L4.22 7.28a.75.75 0 010-1.06z",clipRule:"evenodd"})})]}),j&&(0,l.jsx)("div",{className:"absolute top-full left-0 mt-1 z-50 bg-lm-black border border-lm-orange w-56 max-h-60 overflow-y-auto shadow-lg",children:E.map(e=>{let t=r===e.addr;return(0,l.jsxs)("button",{type:"button",onClick:()=>{s(e.addr),k(!1)},className:"w-full text-left px-3 py-2 flex items-center justify-between transition-colors ".concat(t?"bg-lm-orange/10 text-lm-orange":"text-white hover:bg-lm-terminal-darkgray"),children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-bold text-sm",children:e.symbol}),e.isEth&&(0,l.jsx)("span",{className:"text-lm-terminal-lightgray text-[10px] ml-1.5",children:"Native"})]}),(0,l.jsx)("span",{className:"text-lm-terminal-lightgray text-[10px] lm-mono",children:e.hint})]},e.addr)})})]}),(0,l.jsx)("div",{className:"flex-1 relative",children:f&&void 0!==y?(0,l.jsx)("div",{className:"h-10 bg-lm-black border border-lm-terminal-gray px-3 flex items-center justify-end",children:(0,l.jsx)("span",{className:"lm-mono text-sm ".concat(y&&"No liquidity"!==y?"text-white font-bold":"text-lm-terminal-lightgray"),children:y||"—"})}):(0,l.jsx)(c.p,{value:g||"",onValueChange:p,placeholder:"0.0",className:"h-10 text-sm font-bold"})}),h&&u&&Number(u)>0&&(0,l.jsx)("button",{type:"button",onClick:h,className:"h-10 px-2 text-[10px] font-bold text-lm-orange border border-lm-orange/30 hover:border-lm-orange hover:bg-lm-orange/5 transition-colors lm-upper",children:"Max"})]}),w&&(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("input",{className:"lm-input text-left text-xs h-8",placeholder:"Paste token address (0x...)",value:i,onChange:e=>o(e.target.value)}),d?(0,l.jsxs)("div",{className:"text-lm-green text-[10px] flex items-center gap-1",children:[(0,l.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-lm-green"}),"Detected: ",(0,l.jsx)("span",{className:"text-white font-bold",children:d.symbol})," (",d.decimals," decimals)"]}):42===i.length?(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] animate-pulse",children:"Detecting token..."}):null]}),N&&(0,l.jsxs)("div",{className:"text-[9px] text-lm-terminal-lightgray flex items-center gap-1",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-2.5 h-2.5",children:(0,l.jsx)("path",{d:"M8 1a7 7 0 100 14A7 7 0 008 1zm-.5 3h1v1h-1V4zm-1 2h3v1h-1v3h1v1h-3V10h1V7h-1V6z"})}),"Auto-wraps to WETH for the swap"]})]})}function w(){var e,t,a;let{address:c,walletClient:w,requireCorrectChain:j}=(0,h.v)(),[k,C]=(0,n.useState)([]),[E,S]=(0,n.useState)(""),[R,M]=(0,n.useState)(""),[L,F]=(0,n.useState)(""),[P,I]=(0,n.useState)(""),[T,_]=(0,n.useState)(null),[q,A]=(0,n.useState)(null),[$,B]=(0,n.useState)(3e3),[O,U]=(0,n.useState)(""),[z,V]=(0,n.useState)(0n),[H,X]=(0,n.useState)(""),[J,W]=(0,n.useState)(!1),[D,Q]=(0,n.useState)(100),[K,Y]=(0,n.useState)(!1),[G,Z]=(0,n.useState)(""),[ee,et]=(0,n.useState)("info"),[ea,el]=(0,n.useState)(!1),[en,er]=(0,n.useState)(""),[es,ei]=(0,n.useState)(""),[eo,ec]=(0,n.useState)(""),ed=(0,n.useRef)(null),em=(0,n.useMemo)(()=>{if(y(E))return{addr:u.$.weth,meta:{...b,address:u.$.weth},isNativeEth:!0};if("__custom__"===E&&T&&/^0x[0-9a-fA-F]{40}$/.test(L))return{addr:L,meta:T,isNativeEth:!1};let e=k.find(e=>e.address===E);return e?{addr:e.address,meta:e,isNativeEth:!1}:{addr:"",meta:null,isNativeEth:!1}},[E,L,T,k]),eu=(0,n.useMemo)(()=>{if(y(R))return{addr:u.$.weth,meta:{...b,address:u.$.weth},isNativeEth:!0};if("__custom__"===R&&q&&/^0x[0-9a-fA-F]{40}$/.test(P))return{addr:P,meta:q,isNativeEth:!1};let e=k.find(e=>e.address===R);return e?{addr:e.address,meta:e,isNativeEth:!1}:{addr:"",meta:null,isNativeEth:!1}},[R,P,q,k]);(0,n.useEffect)(()=>{if("__custom__"!==E||!/^0x[0-9a-fA-F]{40}$/.test(L))return void _(null);(async()=>{try{let[e,t]=await Promise.all([m.R.readContract({address:L,abi:x.Qi,functionName:"symbol"}),m.R.readContract({address:L,abi:x.Qi,functionName:"decimals"})]);_({address:L,symbol:e,decimals:Number(t),logoURI:""})}catch(e){_(null)}})()},[E,L]),(0,n.useEffect)(()=>{if("__custom__"!==R||!/^0x[0-9a-fA-F]{40}$/.test(P))return void A(null);(async()=>{try{let[e,t]=await Promise.all([m.R.readContract({address:P,abi:x.Qi,functionName:"symbol"}),m.R.readContract({address:P,abi:x.Qi,functionName:"decimals"})]);A({address:P,symbol:e,decimals:Number(t),logoURI:""})}catch(e){A(null)}})()},[R,P]),(0,n.useEffect)(()=>{(0,d.V)().then(e=>{C(e),E||S(b.address),!R&&e[0]&&M(e[0].address)}).catch(e=>{Z(String((null==e?void 0:e.message)||e)),et("error")})},[]);let ex=(0,n.useRef)(k);ex.current=k;let eh=(0,n.useRef)(eN);eh.current=eN;let eg=(0,n.useRef)(en);eg.current=en,(0,g.SL)((0,n.useCallback)(e=>{if("swap"===e.type){let t=ex.current,a=e=>{if(!e)return;let a=e.toUpperCase();if("ETH"===a||"WETH"===a)return b.address;let l=t.find(e=>e.symbol.toUpperCase()===a);return null==l?void 0:l.address},l=a(e.tokenIn),n=a(e.tokenOut);l&&S(l),n&&M(n),e.amount&&U(e.amount),e.fee&&B(Number(e.fee)),e.slippage&&Q(Number(e.slippage))}else"flip_tokens"===e.type?eh.current():"max_balance"===e.type?eg.current&&U(eg.current):"set_fee"===e.type?B(Number(e.fee)):"set_slippage"===e.type&&Q(Number(e.bps))},[])),(0,n.useEffect)(()=>{if(!c){er(""),ei("");return}(async()=>{if(em.isNativeEth)try{er((0,r.J)(await m.R.getBalance({address:c}),18))}catch(e){er("?")}else if(em.addr&&em.meta)try{let e=await m.R.readContract({address:em.addr,abi:x.bx,functionName:"balanceOf",args:[c]});er((0,r.J)(e,em.meta.decimals))}catch(e){er("?")}else er("");if(eu.isNativeEth)try{ei((0,r.J)(await m.R.getBalance({address:c}),18))}catch(e){ei("?")}else if(eu.addr&&eu.meta)try{let e=await m.R.readContract({address:eu.addr,abi:x.bx,functionName:"balanceOf",args:[c]});ei((0,r.J)(e,eu.meta.decimals))}catch(e){ei("?")}else ei("")})()},[c,em.addr,em.isNativeEth,em.meta,eu.addr,eu.isNativeEth,eu.meta]);let ep=(0,n.useCallback)(async()=>{if(!u.$.quoterV2||!em.addr||!eu.addr||!em.meta||!eu.meta)return;let e=(O||"").trim();if(!e||"0"===e||"0."===e||"."===e){V(0n),X("");return}W(!0);try{let t=(0,s.X)(e,em.meta.decimals);if(0n===t){V(0n),X("");return}let a=await m.R.readContract({address:u.$.quoterV2,abi:x.D8,functionName:"quoteExactInputSingle",args:[{tokenIn:em.addr,tokenOut:eu.addr,amountIn:t,fee:$,sqrtPriceLimitX96:0n}]});V(a[0]),X((0,r.J)(a[0],eu.meta.decimals))}catch(e){V(0n),X("No liquidity")}finally{W(!1)}},[O,$,em.addr,em.meta,eu.addr,eu.meta]);(0,n.useEffect)(()=>(ed.current&&clearTimeout(ed.current),ed.current=setTimeout(()=>{ep().catch(()=>{})},400),()=>{ed.current&&clearTimeout(ed.current)}),[ep]);let ef=(0,n.useMemo)(()=>{if(!O||!H||"No liquidity"===H||!em.meta||!eu.meta)return null;let e=Number(O),t=Number(H);return e<=0||t<=0?null:{forward:t/e,inverse:e/t,inSymbol:em.isNativeEth?"ETH":em.meta.symbol,outSymbol:eu.isNativeEth?"ETH":eu.meta.symbol}},[O,H,em.meta,em.isNativeEth,eu.meta,eu.isNativeEth]),eb=(0,n.useMemo)(()=>z<=0n?0n:z*(10000n-BigInt(D))/10000n,[z,D]);async function ey(e,t,a,l,n){if(await m.R.readContract({address:a,abi:x.bx,functionName:"allowance",args:[e,t]})>=l)return;if(Z("Approving ".concat(n,"...")),et("info"),!w)throw Error("No wallet client");let r=await w.writeContract({address:a,abi:x.bx,functionName:"approve",args:[t,l],chain:m.A,account:e});await m.R.waitForTransactionReceipt({hash:r})}async function ev(){if(!c){Z("Connect wallet to swap."),et("error");return}if(!u.$.swapRouter||!em.addr||!eu.addr||!em.meta||!eu.meta){Z("Select valid tokens."),et("error");return}let e=em.isNativeEth?"ETH":em.meta.symbol,t=eu.isNativeEth?"ETH":eu.meta.symbol;el(!0),ec("");try{let a,l=(O||"").trim(),n=(0,s.X)(l||"0",em.meta.decimals);if(0n===n)throw Error("Amount must be greater than 0");if(en){let t=(0,s.X)(en,em.meta.decimals);if(n>t){Z("Insufficient ".concat(e," balance. You have ").concat(v(en)," but need ").concat(l,".")),et("error"),el(!1);return}}if(Z("Preparing swap: ".concat(l," ").concat(e," → ").concat(t,"...")),et("info"),await j(),!w)throw Error("No wallet client");let r=BigInt(Math.floor(Date.now()/1e3)+600),o=BigInt(Math.max(0,Math.min(3e3,D))),d=0n;try{d=(await m.R.readContract({address:u.$.quoterV2,abi:x.D8,functionName:"quoteExactInputSingle",args:[{tokenIn:em.addr,tokenOut:eu.addr,amountIn:n,fee:$,sqrtPriceLimitX96:0n}]}))[0]*(10000n-o)/10000n}catch(e){Z("Could not fetch quote. Pool may not have liquidity for this pair."),et("error"),el(!1);return}let h=em.isNativeEth;if(eu.isNativeEth){h||await ey(c,u.$.swapRouter,em.addr,n,e),Z("Swapping ".concat(l," ").concat(e," → ~").concat(H?v(H):"?"," ").concat(t,"...")),et("info");let s=(0,i.p)({abi:x.zO,functionName:"exactInputSingle",args:[{tokenIn:em.addr,tokenOut:eu.addr,fee:$,recipient:u.$.swapRouter,deadline:r,amountIn:n,amountOutMinimum:d,sqrtPriceLimitX96:0n}]}),o=(0,i.p)({abi:x.zO,functionName:"unwrapWETH9",args:[d,c]});a=await w.writeContract({address:u.$.swapRouter,abi:x.zO,functionName:"multicall",args:[[s,o]],value:h?n:0n,chain:m.A,account:c})}else h||await ey(c,u.$.swapRouter,em.addr,n,e),Z("Swapping ".concat(l," ").concat(e," → ~").concat(H?v(H):"?"," ").concat(t,"...")),et("info"),a=await w.writeContract({address:u.$.swapRouter,abi:x.zO,functionName:"exactInputSingle",args:[{tokenIn:em.addr,tokenOut:eu.addr,fee:$,recipient:c,deadline:r,amountIn:n,amountOutMinimum:d,sqrtPriceLimitX96:0n}],value:h?n:0n,chain:m.A,account:c});ec(a),Z("Confirming on-chain..."),et("info");let g=await m.R.waitForTransactionReceipt({hash:a});"success"===g.status?(Z("Swap confirmed! Received ~".concat(H?v(H):"?"," ").concat(t)),et("success"),U("")):(Z("Transaction reverted. The price may have moved beyond your slippage tolerance."),et("error")),ep().catch(()=>{})}catch(t){let e=String((null==t?void 0:t.shortMessage)||(null==t?void 0:t.message)||t);e.includes("user rejected")||e.includes("User denied")?Z("Transaction cancelled by user."):Z("Swap failed: ".concat(e)),et("error")}finally{el(!1)}}function eN(){S(R),F(P),_(q),M(E),I(L),A(T),U(""),V(0n),X("")}let ew=em.isNativeEth?"ETH":(null==(e=em.meta)?void 0:e.symbol)||"",ej=eu.isNativeEth?"ETH":(null==(t=eu.meta)?void 0:t.symbol)||"",ek=J?"Quoting...":H&&"No liquidity"!==H?"".concat(v(H)," ").concat(ej):H,eC=em.addr&&eu.addr&&O&&Number(O)>0&&H&&"No liquidity"!==H;(0,n.useMemo)(()=>(!ef,null),[ef,H]);let eE=!!en&&!!O&&Number(O)>Number(en),eS=ea?"Processing...":c?em.addr&&eu.addr?!O||0>=Number(O)?"Enter Amount":"No liquidity"===H?"No Liquidity for This Pair":eE?"Insufficient ".concat(ew," Balance"):"Swap ".concat(ew," for ").concat(ej):"Select Tokens":"Connect Wallet",eR=!eC||ea||eE;return(0,l.jsxs)("div",{className:"lm-swap-card p-1",children:[(0,l.jsx)(N,{tokens:k,value:E,onChange:S,customAddr:L,onCustomAddr:F,customMeta:T,label:"You Pay",balance:en||void 0,symbol:ew,onMax:()=>{en&&U(en)},amount:O,onAmountChange:U,isNativeEth:em.isNativeEth}),(0,l.jsx)("div",{className:"flex justify-center -my-2 relative z-10",children:(0,l.jsx)("button",{type:"button",onClick:eN,disabled:ea,className:"w-10 h-10 flex items-center justify-center bg-lm-terminal-darkgray border-2 border-lm-terminal-gray hover:border-lm-orange hover:bg-lm-black text-lm-terminal-lightgray hover:text-lm-orange group disabled:opacity-40 disabled:pointer-events-none",title:"Flip tokens",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 group-hover:rotate-180 transition-transform duration-300",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M2.24 6.8a.75.75 0 001.06-.04l1.95-2.1v8.59a.75.75 0 001.5 0V4.66l1.95 2.1a.75.75 0 101.1-1.02l-3.25-3.5a.75.75 0 00-1.1 0L2.2 5.74a.75.75 0 00.04 1.06zm8 6.4a.75.75 0 00-.04 1.06l3.25 3.5a.75.75 0 001.1 0l3.25-3.5a.75.75 0 10-1.1-1.02l-1.95 2.1V6.75a.75.75 0 00-1.5 0v8.59l-1.95-2.1a.75.75 0 00-1.06-.04z",clipRule:"evenodd"})})})}),(0,l.jsx)(N,{tokens:k,value:R,onChange:M,customAddr:P,onCustomAddr:I,customMeta:q,label:"You Receive",balance:es||void 0,symbol:ej,amountReadonly:!0,quoteDisplay:ek,isNativeEth:eu.isNativeEth}),(ef||eC)&&(0,l.jsxs)("div",{className:"mx-1 mt-2",children:[(0,l.jsxs)("button",{type:"button",onClick:()=>Y(!K),className:"flex items-center justify-between w-full py-2 px-2 text-[10px] hover:bg-lm-terminal-darkgray/50 transition-colors",children:[(0,l.jsx)("div",{className:"flex items-center gap-2 text-lm-terminal-lightgray",children:ef&&(0,l.jsxs)("span",{className:"text-white lm-mono",children:["1 ",ef.inSymbol," = ",0===(a=ef.forward)||isNaN(a)?"—":a>=1e6?"".concat((a/1e6).toFixed(2),"M"):a>=1e3?"".concat((a/1e3).toFixed(2),"K"):a>=1?a.toFixed(4):a>=1e-4?a.toFixed(6):a.toExponential(2)," ",ef.outSymbol]})}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5 text-lm-terminal-lightgray",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-3 h-3",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M6.955 1.45A.5.5 0 017.452 1h1.096a.5.5 0 01.497.45l.17 1.699c.484.12.94.312 1.356.562l1.321-.916a.5.5 0 01.67.033l.774.775a.5.5 0 01.033.67l-.916 1.32c.25.417.443.873.563 1.357l1.699.17a.5.5 0 01.45.497v1.096a.5.5 0 01-.45.497l-1.699.17c-.12.484-.312.94-.562 1.356l.916 1.321a.5.5 0 01-.034.67l-.774.774a.5.5 0 01-.67.033l-1.32-.916c-.417.25-.873.443-1.357.563l-.17 1.699a.5.5 0 01-.497.45H7.452a.5.5 0 01-.497-.45l-.17-1.699a4.973 4.973 0 01-1.356-.562l-1.321.916a.5.5 0 01-.67-.034l-.774-.774a.5.5 0 01-.034-.67l.916-1.32a4.973 4.973 0 01-.562-1.357l-1.699-.17A.5.5 0 011 8.548V7.452a.5.5 0 01.45-.497l1.699-.17c.12-.484.312-.94.562-1.356l-.916-1.321a.5.5 0 01.034-.67l.774-.774a.5.5 0 01.67-.033l1.32.916c.417-.25.873-.443 1.357-.563l.17-1.699zM8 10a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-3 h-3 transition-transform ".concat(K?"rotate-180":""),children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M4.22 6.22a.75.75 0 011.06 0L8 8.94l2.72-2.72a.75.75 0 111.06 1.06l-3.25 3.25a.75.75 0 01-1.06 0L4.22 7.28a.75.75 0 010-1.06z",clipRule:"evenodd"})})]})]}),K&&(0,l.jsxs)("div",{className:"bg-lm-black border border-lm-terminal-gray/50 p-3 space-y-3 mt-1 lm-fade-in",children:[eC&&eu.meta&&(0,l.jsxs)("div",{className:"space-y-1.5 text-[10px]",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Minimum received"}),(0,l.jsxs)("span",{className:"text-white lm-mono font-bold",children:[v((0,r.J)(eb,eu.meta.decimals))," ",ej]})]}),(em.isNativeEth||eu.isNativeEth)&&(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"Route"}),(0,l.jsxs)("div",{className:"flex items-center gap-1 text-white lm-mono",children:[(0,l.jsx)("span",{children:ew}),(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"→"}),em.isNativeEth&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"WETH"}),(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"→"})]}),eu.isNativeEth&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"WETH"}),(0,l.jsx)("span",{className:"text-lm-terminal-lightgray",children:"→"})]}),(0,l.jsx)("span",{children:ej})]})]}),(0,l.jsx)("div",{className:"h-px bg-lm-terminal-gray/30 my-1"})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Fee Tier"}),(0,l.jsx)("div",{className:"flex gap-1",children:p.map(e=>(0,l.jsxs)("button",{type:"button",onClick:()=>B(e.fee),className:"flex-1 py-2 border text-center ".concat($===e.fee?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"),children:[(0,l.jsx)("div",{className:"text-xs font-bold",children:e.label}),(0,l.jsx)("div",{className:"text-[9px] opacity-60",children:e.hint})]},e.fee))})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("div",{className:"text-lm-terminal-lightgray text-[10px] lm-upper font-bold tracking-wider",children:"Max Slippage"}),(0,l.jsx)("div",{className:"flex gap-1",children:f.map(e=>(0,l.jsx)("button",{type:"button",onClick:()=>Q(e.bps),className:"flex-1 text-xs py-2 border ".concat(D===e.bps?"border-lm-orange text-lm-orange bg-lm-orange/5":"border-lm-terminal-gray text-lm-gray hover:border-lm-gray"),children:e.label},e.bps))}),(0,l.jsx)("div",{className:"text-[9px] text-lm-terminal-lightgray",children:"Swap reverts if price moves beyond this tolerance."})]})]})]}),eE&&(0,l.jsxs)("div",{className:"mx-1 mt-1.5 lm-callout lm-callout-red text-[10px] flex items-center gap-2",children:[(0,l.jsx)("span",{className:"lm-dot lm-dot-red"}),(0,l.jsxs)("span",{children:["Insufficient balance. You have ",(0,l.jsx)("span",{className:"text-white font-bold",children:v(en)})," ",ew," but need ",(0,l.jsx)("span",{className:"text-white font-bold",children:O}),"."]})]}),(0,l.jsx)("div",{className:"p-1 pt-2",children:(0,l.jsx)(o.$,{onClick:ev,loading:ea,disabled:eR,variant:eR?"default":"primary",size:"lg",className:"w-full ".concat(eR?"":"bg-lm-orange text-black"),children:eS})}),G&&(0,l.jsxs)("div",{className:"mx-1 mb-1 text-xs p-2.5 border bg-lm-black flex items-center justify-between gap-2 ".concat("success"===ee?"text-lm-green":"error"===ee?"text-lm-red":"text-lm-gray"," ").concat("success"===ee?"border-lm-green/20":"error"===ee?"border-lm-red/20":"border-lm-terminal-gray"),children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:["info"===ee&&(0,l.jsx)("span",{className:"lm-spinner flex-shrink-0",style:{width:12,height:12,borderWidth:1.5}}),"success"===ee&&(0,l.jsx)("span",{className:"lm-dot lm-dot-green flex-shrink-0"}),"error"===ee&&(0,l.jsx)("span",{className:"lm-dot lm-dot-red flex-shrink-0"}),(0,l.jsx)("span",{className:"truncate",children:G})]}),eo&&(0,l.jsx)("a",{href:"".concat(u.$.blockExplorerUrl||"https://explorer.testnet.chain.robinhood.com","/tx/").concat(eo),target:"_blank",rel:"noreferrer",className:"text-lm-orange hover:underline text-[10px] flex-shrink-0",children:"View Tx →"})]})]})}},7280:(e,t,a)=>{"use strict";a.d(t,{V:()=>s});var l=a(8839),n=a(2933),r=a(3376);async function s(){if(!n.$.tokenRegistry)return[];let e=await l.R.readContract({address:n.$.tokenRegistry,abi:r.wn,functionName:"tokenCount"}),t=[];for(let a=0n;a<e;a++){let e=await l.R.readContract({address:n.$.tokenRegistry,abi:r.wn,functionName:"tokenAt",args:[a]}),s=await l.R.readContract({address:n.$.tokenRegistry,abi:r.wn,functionName:"getToken",args:[e]});(null==s?void 0:s.whitelisted)&&t.push({address:e,symbol:s.symbol,decimals:Number(s.decimals),logoURI:s.logoURI||void 0,metadataURI:s.metadataURI||void 0})}return t}}},e=>{e.O(0,[462,476,668,918,441,255,358],()=>e(e.s=739)),_N_E=e.O()}]);